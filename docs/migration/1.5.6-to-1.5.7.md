# ä» 1.5.6 å‡çº§åˆ° 1.5.7 çš„è¿ç§»è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•ä» Workflow CLI 1.5.6 å‡çº§åˆ° 1.5.7ï¼Œä»¥åŠé…ç½®æ ¼å¼çš„å˜åŒ–ã€‚

**é‡è¦**ï¼šæœ¬æ¬¡å‡çº§åŒ…å«é…ç½®æ ¼å¼å˜åŒ–ï¼Œéœ€è¦**æ‰‹åŠ¨è¿ç§»**é…ç½®æ–‡ä»¶ã€‚

---

## ğŸ”„ é…ç½®å˜åŒ–

### Jira é…ç½®æ–‡ä»¶åˆå¹¶

åœ¨ 1.5.7 ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å°†ä¸¤ä¸ªç‹¬ç«‹çš„ Jira é…ç½®æ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªï¼š

**æ—§é…ç½®ç»“æ„**ï¼ˆ1.5.6 åŠä¹‹å‰ï¼‰ï¼š
- `~/.workflow/config/jira-status.toml` - Jira é¡¹ç›®çŠ¶æ€æ˜ å°„é…ç½®
- `~/.workflow/config/jira-users.toml` - Jira ç”¨æˆ·ç¼“å­˜é…ç½®

**æ–°é…ç½®ç»“æ„**ï¼ˆ1.5.7 åŠä¹‹åï¼‰ï¼š
- `~/.workflow/config/jira.toml` - åˆå¹¶åçš„ Jira é…ç½®ï¼ˆåŒ…å«çŠ¶æ€å’Œç”¨æˆ·ï¼‰

### é…ç½®æ ¼å¼å¯¹æ¯”

#### æ—§æ ¼å¼ï¼š`jira-status.toml`
```toml
[WEW]
created-pr = "In Progress"
merged-pr = "In Review"

[NA]
created-pr = "In Progress"
merged-pr = "In Review"
```

#### æ—§æ ¼å¼ï¼š`jira-users.toml`
```toml
[[users]]
email = "zhang.wei@brain.im"
account-_id = "628d9616269a9a0068f27e0c"
display-_name = "Zhang Wei"
```

#### æ–°æ ¼å¼ï¼š`jira.toml`
```toml
[[users]]
email = "zhang.wei@brain.im"
account-_id = "628d9616269a9a0068f27e0c"
display-_name = "Zhang Wei"

[status.WEW]
created-pr = "In Progress"
merged-pr = "In Review"

[status.NA]
created-pr = "In Progress"
merged-pr = "In Review"
```

---

## ğŸš€ è¿ç§»æ­¥éª¤

å‡çº§åˆ° 1.5.7 åï¼Œå¯ä»¥ä½¿ç”¨è¿ç§»è„šæœ¬è‡ªåŠ¨åˆå¹¶é…ç½®æ–‡ä»¶ï¼Œæˆ–æ‰‹åŠ¨è¿ç§»ã€‚

### æ–¹å¼ä¸€ï¼šä½¿ç”¨è¿ç§»è„šæœ¬ï¼ˆæ¨èï¼‰

æˆ‘ä»¬æä¾›äº†è·¨å¹³å°çš„è¿ç§»è„šæœ¬æ¥ç®€åŒ–è¿ç§»è¿‡ç¨‹ï¼š

#### macOS/Linuxï¼ˆShell è„šæœ¬ï¼‰

**æ–¹å¼ä¸€ï¼šç›´æ¥ä¸‹è½½æ‰§è¡Œï¼ˆæ¨èï¼‰**

```bash
# é¢„è§ˆè¿ç§»ï¼ˆæ¨èï¼Œå…ˆæŸ¥çœ‹å°†è¦æ‰§è¡Œçš„æ“ä½œï¼‰
curl -fsSL https://raw.githubusercontent.com/zevwings/workflow.rs/master/scripts/migrate/1.5.6-to-1.5.7.sh | bash -s -- --dry-run

# æ‰§è¡Œè¿ç§»
curl -fsSL https://raw.githubusercontent.com/zevwings/workflow.rs/master/scripts/migrate/1.5.6-to-1.5.7.sh | bash -s --

# æ‰§è¡Œè¿ç§»å¹¶åˆ é™¤æ—§æ–‡ä»¶
curl -fsSL https://raw.githubusercontent.com/zevwings/workflow.rs/master/scripts/migrate/1.5.6-to-1.5.7.sh | bash -s -- --cleanup
```

**æ–¹å¼äºŒï¼šæœ¬åœ°æ‰§è¡Œ**

```bash
# é¢„è§ˆè¿ç§»
bash scripts/migrate/1.5.6-to-1.5.7.sh --dry-run

# æ‰§è¡Œè¿ç§»
bash scripts/migrate/1.5.6-to-1.5.7.sh

# æ‰§è¡Œè¿ç§»å¹¶åˆ é™¤æ—§æ–‡ä»¶
bash scripts/migrate/1.5.6-to-1.5.7.sh --cleanup
```

#### Windowsï¼ˆPowerShell è„šæœ¬ï¼‰

```powershell
# é¢„è§ˆè¿ç§»
.\scripts\migrate\1.5.6-to-1.5.7.ps1 -DryRun

# æ‰§è¡Œè¿ç§»
.\scripts\migrate\1.5.6-to-1.5.7.ps1

# æ‰§è¡Œè¿ç§»å¹¶åˆ é™¤æ—§æ–‡ä»¶
.\scripts\migrate\1.5.6-to-1.5.7.ps1 -Cleanup
```

**è„šæœ¬åŠŸèƒ½**ï¼š
- è‡ªåŠ¨æ£€æµ‹é…ç½®æ–‡ä»¶ä½ç½®ï¼ˆæ”¯æŒ macOS iCloud è·¯å¾„ï¼‰
- è‡ªåŠ¨å¤‡ä»½æ—§é…ç½®æ–‡ä»¶ï¼ˆ`.bak` åç¼€ï¼‰
- è‡ªåŠ¨åˆå¹¶é…ç½®å†…å®¹
- éªŒè¯é…ç½®æ ¼å¼
- æ”¯æŒé¢„è§ˆæ¨¡å¼ï¼ˆ`--dry-run` / `-DryRun`ï¼‰
- æ”¯æŒæ¸…ç†æ—§æ–‡ä»¶ï¼ˆ`--cleanup` / `-Cleanup`ï¼‰
- **è‡ªåŠ¨å®‰è£…ä¾èµ–**ï¼šå¦‚æœ `toml` åº“æœªå®‰è£…ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å®‰è£…

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨è¿ç§»

å¦‚æœæ‚¨ä¸æƒ³ä½¿ç”¨è„šæœ¬ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆå¹¶é…ç½®æ–‡ä»¶ï¼š

1. **å¤‡ä»½ç°æœ‰é…ç½®**ï¼ˆæ¨èï¼‰ï¼š
   ```bash
   cp ~/.workflow/config/jira-status.toml ~/.workflow/config/jira-status.toml.bak
   cp ~/.workflow/config/jira-users.toml ~/.workflow/config/jira-users.toml.bak
   ```

2. **åˆ›å»ºæ–°çš„ `jira.toml` æ–‡ä»¶**ï¼š
   ```bash
   touch ~/.workflow/config/jira.toml
   ```

3. **åˆå¹¶é…ç½®å†…å®¹**ï¼š
   - å°† `jira-users.toml` ä¸­çš„ `[[users]]` éƒ¨åˆ†å¤åˆ¶åˆ° `jira.toml`
   - å°† `jira-status.toml` ä¸­çš„é¡¹ç›®é…ç½®è½¬æ¢ä¸º `[status.PROJECT_KEY]` æ ¼å¼å¹¶æ·»åŠ åˆ° `jira.toml`

4. **éªŒè¯é…ç½®æ­£ç¡®æ€§**ï¼š
   ```bash
   cat ~/.workflow/config/jira.toml
   ```
   ç¡®è®¤é…ç½®æ ¼å¼æ­£ç¡®ã€‚

5. **æµ‹è¯•åŠŸèƒ½**ï¼š
   ```bash
   workflow jira status configure PROJ
   workflow jira users get
   ```
   ç¡®è®¤åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚

6. **åˆ é™¤æ—§é…ç½®æ–‡ä»¶**ï¼ˆå¯é€‰ï¼‰ï¼š
   ```bash
   rm ~/.workflow/config/jira-status.toml
   rm ~/.workflow/config/jira-users.toml
   ```
   ç¡®è®¤æ–°é…ç½®æ­£å¸¸å·¥ä½œåï¼Œå¯ä»¥åˆ é™¤æ—§æ–‡ä»¶ã€‚

---

## âœ… è¿ç§»éªŒè¯

è¿ç§»å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

1. **æ£€æŸ¥æ–°é…ç½®æ–‡ä»¶**ï¼š
   ```bash
   cat ~/.workflow/config/jira.toml
   ```
   ç¡®è®¤é…ç½®å·²æ­£ç¡®åˆå¹¶ï¼Œæ ¼å¼ç¬¦åˆæ–°ç»“æ„ã€‚

2. **æµ‹è¯• Jira åŠŸèƒ½**ï¼š
   ```bash
   workflow jira status configure PROJ
   workflow jira users get
   ```
   ç¡®è®¤åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®å®‰å…¨**ï¼š
   - **å¼ºçƒˆå»ºè®®**åœ¨è¿ç§»å‰å¤‡ä»½é…ç½®æ–‡ä»¶
   - è¿ç§»å®Œæˆåï¼Œç¡®è®¤æ–°é…ç½®æ­£å¸¸å·¥ä½œå†åˆ é™¤æ—§æ–‡ä»¶

2. **é…ç½®æ ¼å¼**ï¼š
   - ç¡®ä¿ `jira.toml` ä¸­çš„çŠ¶æ€é…ç½®ä½¿ç”¨ `[status.PROJECT_KEY]` æ ¼å¼
   - ç”¨æˆ·é…ç½®ä½¿ç”¨ `[[users]]` æ•°ç»„è¡¨æ ¼å¼

3. **å¤šç”¨æˆ·ç¯å¢ƒ**ï¼š
   - æ¯ä¸ªç”¨æˆ·çš„é…ç½®ç›®å½•éœ€è¦ç‹¬ç«‹è¿ç§»
   - ä¸ä¼šå½±å“å…¶ä»–ç”¨æˆ·çš„é…ç½®

4. **æ—§é…ç½®æ–‡ä»¶**ï¼š
   - 1.5.7 ç‰ˆæœ¬**ä¸å†æ”¯æŒ**ä»æ—§é…ç½®æ–‡ä»¶è¯»å–
   - å¿…é¡»å®Œæˆè¿ç§»æ‰èƒ½æ­£å¸¸ä½¿ç”¨ Jira åŠŸèƒ½

---

## ğŸ”™ å›æ»šè¯´æ˜

å¦‚æœéœ€è¦å›æ»šåˆ° 1.5.6ï¼š

1. **æ¢å¤æ—§é…ç½®æ–‡ä»¶**ï¼š
   - å¦‚æœæ—§æ–‡ä»¶è¿˜åœ¨ï¼Œç›´æ¥ä½¿ç”¨å³å¯
   - å¦‚æœå·²åˆ é™¤ï¼Œå¯ä»¥ä»å¤‡ä»½æ¢å¤

2. **é™çº§è½¯ä»¶ç‰ˆæœ¬**ï¼š
   ```bash
   # å¸è½½ 1.5.7
   workflow uninstall

   # å®‰è£… 1.5.6
   # ï¼ˆæ ¹æ®æ‚¨çš„å®‰è£…æ–¹å¼ï¼‰
   ```

3. **åˆ é™¤æ–°é…ç½®æ–‡ä»¶**ï¼ˆå¯é€‰ï¼‰ï¼š
   ```bash
   rm ~/.workflow/config/jira.toml
   ```

**æ³¨æ„**ï¼šå›æ»šåï¼Œ1.5.6 ç‰ˆæœ¬æ— æ³•è¯»å–æ–°çš„ `jira.toml` æ ¼å¼ï¼Œå¿…é¡»ä½¿ç”¨æ—§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q: è¿ç§»å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: å¦‚æœè¿ç§»è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜ï¼š
1. æ£€æŸ¥ `jira.toml` æ–‡ä»¶çš„æ ¼å¼æ˜¯å¦æ­£ç¡®
2. ä»å¤‡ä»½æ¢å¤æ—§é…ç½®æ–‡ä»¶ï¼ˆ`.bak` æ–‡ä»¶ï¼‰
3. å‚è€ƒé…ç½®æ ¼å¼å¯¹æ¯”éƒ¨åˆ†é‡æ–°è¿ç§»
4. æˆ–ä½¿ç”¨è¿ç§»è„šæœ¬é‡æ–°æ‰§è¡Œè¿ç§»
5. æˆ–è”ç³»æ”¯æŒå›¢é˜Ÿ

### Q: è¿ç§»è„šæœ¬æŠ¥é”™ "éœ€è¦å®‰è£… toml åº“" æ€ä¹ˆåŠï¼Ÿ

A: å®‰è£… `toml` åº“ï¼š
```bash
pip install toml
```

æˆ–è€…ä½¿ç”¨æ‰‹åŠ¨è¿ç§»æ–¹å¼ã€‚

### Q: å¯ä»¥è·³è¿‡è¿ç§»å—ï¼Ÿ

A: **ä¸å¯ä»¥**ã€‚1.5.7 ç‰ˆæœ¬ä¸å†æ”¯æŒæ—§é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œå¿…é¡»å®Œæˆè¿ç§»æ‰èƒ½æ­£å¸¸ä½¿ç”¨ Jira åŠŸèƒ½ã€‚

### Q: è¿ç§»ä¼šå½±å“ç°æœ‰åŠŸèƒ½å—ï¼Ÿ

A: è¿ç§»å®Œæˆåï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½ä¼šæ­£å¸¸å·¥ä½œã€‚è¿ç§»åªæ˜¯å°†é…ç½®ä»ä¸¤ä¸ªæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼ŒåŠŸèƒ½æœ¬èº«æ²¡æœ‰å˜åŒ–ã€‚

### Q: è¿ç§»è„šæœ¬æŠ¥é”™ "éœ€è¦å®‰è£… toml åº“" æ€ä¹ˆåŠï¼Ÿ

A: å®‰è£… `toml` åº“ï¼š
```bash
pip install toml
```

æˆ–è€…ä½¿ç”¨æ‰‹åŠ¨è¿ç§»æ–¹å¼ã€‚

### Q: å¦‚ä½•ç¡®è®¤è¿ç§»æ˜¯å¦æˆåŠŸï¼Ÿ

A: æ£€æŸ¥ï¼š
1. `jira.toml` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”åŒ…å«å®Œæ•´é…ç½®
2. Jira ç›¸å…³åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œï¼ˆä½¿ç”¨ `workflow jira` å‘½ä»¤æµ‹è¯•ï¼‰
3. é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯å¦ç¬¦åˆæ–°ç»“æ„

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [é…ç½®æ–‡ä»¶åˆå¹¶åˆ†æ](../requirements/CONFIG_FILES_MERGE_ANALYSIS.md) - è¯¦ç»†çš„é…ç½®åˆå¹¶æ–¹æ¡ˆåˆ†æ
- [è¿ç§»ç³»ç»Ÿæ¶æ„è¯´æ˜](../architecture/commands/MIGRATE_COMMAND_architecture.md) - è¿ç§»ç³»ç»Ÿçš„æŠ€æœ¯å®ç°
- [Jira æ¨¡å—æ¶æ„æ–‡æ¡£](../architecture/lib/JIRA_architecture.md) - Jira æ¨¡å—çš„è¯¦ç»†è¯´æ˜

---

**æœ€åæ›´æ–°**: 2025-01-27
**é€‚ç”¨ç‰ˆæœ¬**: 1.5.6 â†’ 1.5.7
