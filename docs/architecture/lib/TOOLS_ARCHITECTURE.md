# å·¥å…·å‡½æ•°æ¨¡å—æ¶æ„æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿° Workflow CLI çš„å·¥å…·å‡½æ•°æ¨¡å—æ¶æ„ï¼ŒåŒ…æ‹¬ï¼š
- æ—¥å¿—è¾“å‡ºç³»ç»Ÿï¼ˆå¸¦é¢œè‰²çš„æ—¥å¿—å®å’Œæ—¥å¿—çº§åˆ«ç®¡ç†ï¼‰
- å­—ç¬¦ä¸²å¤„ç†å·¥å…·ï¼ˆæ•æ„Ÿå€¼éšè—ï¼‰
- æµè§ˆå™¨å’Œå‰ªè´´æ¿æ“ä½œ
- æ–‡ä»¶è§£å‹å’Œæ ¡éªŒå’ŒéªŒè¯
- ç”¨æˆ·ç¡®è®¤å¯¹è¯æ¡†
- æ ¼å¼åŒ–å·¥å…·ï¼ˆæ–‡ä»¶å¤§å°æ ¼å¼åŒ–ï¼‰
- å¹³å°æ£€æµ‹å·¥å…·ï¼ˆGitHub Releases å¹³å°è¯†åˆ«ï¼‰
- è¡¨æ ¼è¾“å‡ºå·¥å…·ï¼ˆç»Ÿä¸€çš„è¡¨æ ¼æ˜¾ç¤ºæ¥å£ï¼‰

**æ³¨æ„**ï¼šäº¤äº’å¼å¯¹è¯æ¡†ï¼ˆInputDialog, SelectDialog, MultiSelectDialog, ConfirmDialogï¼‰å·²ç§»è‡³ç‹¬ç«‹çš„ Dialog æ¨¡å—ï¼Œè¯·å‚è€ƒ [Dialog æ¨¡å—æ¶æ„æ–‡æ¡£](./DIALOG_ARCHITECTURE.md)ã€‚è¿›åº¦æŒ‡ç¤ºå™¨ï¼ˆSpinner, Progressï¼‰å·²ç§»è‡³ç‹¬ç«‹çš„ Indicator æ¨¡å—ï¼Œè¯·å‚è€ƒ [Indicator æ¨¡å—æ¶æ„æ–‡æ¡£](./INDICATOR_ARCHITECTURE.md)ã€‚

è¿™äº›å·¥å…·å‡½æ•°ä¸ºæ•´ä¸ªé¡¹ç›®æä¾›é€šç”¨çš„åŸºç¡€è®¾æ–½æ”¯æŒï¼Œè¢«æ‰€æœ‰æ¨¡å—å¹¿æ³›ä½¿ç”¨ã€‚

---

## ğŸ“ æ¨¡å—ç»“æ„

### æ ¸å¿ƒæ¨¡å—æ–‡ä»¶

```
src/lib/base/util/
â”œâ”€â”€ mod.rs         # æ¨¡å—å…¥å£ï¼Œé‡æ–°å¯¼å‡ºæ‰€æœ‰å…¬å…± API
â”œâ”€â”€ logger.rs      # æ—¥å¿—è¾“å‡ºç³»ç»Ÿï¼ˆ~566 è¡Œï¼‰
â”œâ”€â”€ string.rs      # å­—ç¬¦ä¸²å¤„ç†å·¥å…·ï¼ˆ~38 è¡Œï¼‰
â”œâ”€â”€ browser.rs     # æµè§ˆå™¨æ“ä½œï¼ˆ~29 è¡Œï¼‰
â”œâ”€â”€ clipboard.rs   # å‰ªè´´æ¿æ“ä½œï¼ˆ~35 è¡Œï¼‰
â”œâ”€â”€ unzip.rs       # æ–‡ä»¶è§£å‹å·¥å…·ï¼ˆ~61 è¡Œï¼‰
â”œâ”€â”€ checksum.rs    # æ ¡éªŒå’ŒéªŒè¯å·¥å…·ï¼ˆ~164 è¡Œï¼‰
â”œâ”€â”€ confirm.rs     # ç”¨æˆ·ç¡®è®¤å¯¹è¯æ¡†ï¼ˆ~45 è¡Œï¼‰
â”œâ”€â”€ format.rs      # æ ¼å¼åŒ–å·¥å…·ï¼ˆ~42 è¡Œï¼‰
â”œâ”€â”€ platform.rs    # å¹³å°æ£€æµ‹å·¥å…·ï¼ˆ~84 è¡Œï¼‰
â””â”€â”€ table.rs       # è¡¨æ ¼è¾“å‡ºå·¥å…·ï¼ˆ~382 è¡Œï¼‰
```

**æ€»è®¡ï¼šçº¦ 1446 è¡Œä»£ç ï¼Œ11 ä¸ªæ–‡ä»¶ï¼Œ9 ä¸ªä¸»è¦ç»„ä»¶**

### ä¾èµ–æ¨¡å—

- **`colored`**ï¼šç»ˆç«¯é¢œè‰²è¾“å‡º
- **`open`**ï¼šæ‰“å¼€æµè§ˆå™¨
- **`arboard`**ï¼šå‰ªè´´æ¿æ“ä½œ
- **`zip`**ï¼šZIP æ–‡ä»¶è§£å‹
- **`sha2`**ï¼šSHA256 æ ¡éªŒå’Œ
- **`dialoguer`**ï¼šç”¨æˆ·ç¡®è®¤å¯¹è¯æ¡†
- **`tabled`**ï¼šè¡¨æ ¼è¾“å‡ºæ ¼å¼åŒ–

### æ¨¡å—é›†æˆ

å·¥å…·æ¨¡å—è¢«æ‰€æœ‰å…¶ä»–æ¨¡å—å¹¿æ³›ä½¿ç”¨ï¼š

- **æ—¥å¿—ç³»ç»Ÿ**ï¼šæ‰€æœ‰æ¨¡å—ä½¿ç”¨ `log_*!` å®è¾“å‡ºæ—¥å¿—
- **å‰ªè´´æ¿**ï¼šPRã€Log å’Œ Jira å‘½ä»¤ä½¿ç”¨ `Clipboard::copy()`
- **æµè§ˆå™¨**ï¼šPR å‘½ä»¤ä½¿ç”¨ `Browser::open()`
- **æ–‡ä»¶æ“ä½œ**ï¼šLifecycle å‘½ä»¤ä½¿ç”¨ `Unzip::extract()` å’Œ `Checksum::verify()`
- **ç”¨æˆ·ç¡®è®¤**ï¼šå¤šä¸ªå‘½ä»¤ä½¿ç”¨ `confirm()` å‡½æ•°
- **æ ¼å¼åŒ–å·¥å…·**ï¼šLifecycle å‘½ä»¤ä½¿ç”¨ `format_size()` æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
- **å¹³å°æ£€æµ‹**ï¼šLifecycle å‘½ä»¤ä½¿ç”¨ `detect_release_platform()` æ£€æµ‹å¹³å°
- **è¡¨æ ¼è¾“å‡º**ï¼šPR å‘½ä»¤ä½¿ç”¨ `TableBuilder` æ˜¾ç¤º PR åˆ—è¡¨

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£**ï¼šæ¯ä¸ªå·¥å…·å‡½æ•°åªè´Ÿè´£ä¸€ä¸ªæ˜ç¡®çš„åŠŸèƒ½
2. **æ˜“ç”¨æ€§**ï¼šæä¾›ç®€æ´çš„ API å’Œå®
3. **å¯é…ç½®æ€§**ï¼šæ—¥å¿—çº§åˆ«å¯é€šè¿‡ç¯å¢ƒå˜é‡æˆ–è¿è¡Œæ—¶è®¾ç½®
4. **è·¨å¹³å°**ï¼šæ‰€æœ‰å·¥å…·å‡½æ•°æ”¯æŒå¤šå¹³å°

### æ ¸å¿ƒç»„ä»¶

#### 1. æ—¥å¿—è¾“å‡ºç³»ç»Ÿ (`logger.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾›å¸¦é¢œè‰²çš„æ—¥å¿—è¾“å‡ºåŠŸèƒ½ï¼Œæ”¯æŒæ—¥å¿—çº§åˆ«æ§åˆ¶ï¼ŒåŒ…æ‹¬ï¼š
- æ—¥å¿—çº§åˆ«æšä¸¾ï¼ˆNone, Error, Warn, Info, Debugï¼‰
- å¸¦é¢œè‰²çš„æ—¥å¿—è¾“å‡ºï¼ˆæˆåŠŸã€é”™è¯¯ã€è­¦å‘Šã€ä¿¡æ¯ã€è°ƒè¯•ï¼‰
- æ—¥å¿—çº§åˆ«ç®¡ç†ï¼ˆç¯å¢ƒå˜é‡ã€è¿è¡Œæ—¶è®¾ç½®ï¼‰
- æ—¥å¿—å®ï¼ˆ`log_success!`, `log_error!`, `log_warning!`, `log_info!`, `log_debug!`, `log_message!`, `log_break!`ï¼‰

### æ ¸å¿ƒç»„ä»¶

#### LogLevel æšä¸¾

```rust
pub enum LogLevel {
    None = 0,   // ä¸è¾“å‡ºä»»ä½•æ—¥å¿—
    Error = 1,  // åªè¾“å‡ºé”™è¯¯
    Warn = 2,   // è¾“å‡ºè­¦å‘Šå’Œé”™è¯¯
    Info = 3,   // è¾“å‡ºä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯ï¼ˆé»˜è®¤ï¼‰
    Debug = 4,  // è¾“å‡ºæ‰€æœ‰æ—¥å¿—ï¼ˆåŒ…æ‹¬è°ƒè¯•ï¼‰
}
```

**ç‰¹æ€§**ï¼š
- æ”¯æŒä»å­—ç¬¦ä¸²è§£æï¼ˆ`FromStr` å®ç°ï¼‰
- æ”¯æŒæ¯”è¾ƒå’Œæ’åºï¼ˆ`PartialOrd`, `Ord` å®ç°ï¼‰
- é»˜è®¤çº§åˆ«æ ¹æ®ç¼–è¯‘æ¨¡å¼è‡ªåŠ¨å†³å®šï¼š
  - Debug æ¨¡å¼ï¼š`Debug` çº§åˆ«
  - Release æ¨¡å¼ï¼š`Info` çº§åˆ«
- æ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½®ï¼ˆ`workflow config log set`ï¼‰
- æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€è®¾ç½®

#### Logger ç»“æ„ä½“

æä¾›é™æ€æ–¹æ³•ç”¨äºæ ¼å¼åŒ–æ—¥å¿—æ¶ˆæ¯ï¼š

- `Logger::success(message)` - æˆåŠŸæ¶ˆæ¯ï¼ˆç»¿è‰² âœ“ï¼‰
- `Logger::error(message)` - é”™è¯¯æ¶ˆæ¯ï¼ˆçº¢è‰² âœ—ï¼‰
- `Logger::warning(message)` - è­¦å‘Šæ¶ˆæ¯ï¼ˆé»„è‰² âš ï¼‰
- `Logger::info(message)` - ä¿¡æ¯æ¶ˆæ¯ï¼ˆè“è‰² â„¹ï¼‰
- `Logger::debug(message)` - è°ƒè¯•æ¶ˆæ¯ï¼ˆç°è‰² âš™ï¼‰

æä¾›æ‰“å°æ–¹æ³•ï¼ˆå—æ—¥å¿—çº§åˆ«æ§åˆ¶ï¼‰ï¼š

- `Logger::print_success(message)` - æ€»æ˜¯è¾“å‡ºï¼ˆä¸å—æ—¥å¿—çº§åˆ«é™åˆ¶ï¼‰
- `Logger::print_error(message)` - ä»…åœ¨ `>= Error` æ—¶è¾“å‡º
- `Logger::print_warning(message)` - ä»…åœ¨ `>= Warn` æ—¶è¾“å‡º
- `Logger::print_info(message)` - ä»…åœ¨ `>= Info` æ—¶è¾“å‡º
- `Logger::print_debug(message)` - ä»…åœ¨ `>= Debug` æ—¶è¾“å‡º
- `Logger::print_message(message)` - æ€»æ˜¯è¾“å‡ºï¼ˆä¸å—æ—¥å¿—çº§åˆ«é™åˆ¶ï¼‰
- `Logger::print_separator(char, length)` - æ‰“å°åˆ†éš”çº¿
- `Logger::print_separator_with_text(char, length, text)` - æ‰“å°å¸¦æ–‡æœ¬çš„åˆ†éš”çº¿

### æ—¥å¿—å®

#### log_success!

```rust
log_success!("Operation completed");
log_success!("Found {} items", count);
```

- æ€»æ˜¯è¾“å‡ºï¼Œä¸å—æ—¥å¿—çº§åˆ«é™åˆ¶
- ç”¨äºæ˜¾ç¤ºå‘½ä»¤æ‰§è¡ŒæˆåŠŸçš„ç»“æœ

#### log_error!

```rust
log_error!("Operation failed");
log_error!("Error: {} - {}", code, message);
```

- ä»…åœ¨æ—¥å¿—çº§åˆ« `>= Error` æ—¶è¾“å‡º
- ç”¨äºæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯

#### log_warning!

```rust
log_warning!("This is a warning");
log_warning!("Warning: {} items missing", count);
```

- ä»…åœ¨æ—¥å¿—çº§åˆ« `>= Warn` æ—¶è¾“å‡º
- ç”¨äºæ˜¾ç¤ºè­¦å‘Šä¿¡æ¯

#### log_info!

```rust
log_info!("Processing data");
log_info!("Processing {} items", count);
```

- ä»…åœ¨æ—¥å¿—çº§åˆ« `>= Info` æ—¶è¾“å‡º
- ç”¨äºæ˜¾ç¤ºä¸€èˆ¬ä¿¡æ¯

#### log_debug!

```rust
log_debug!("Debug information");
log_debug!("Debug: {} = {}", key, value);
```

- ä»…åœ¨æ—¥å¿—çº§åˆ« `>= Debug` æ—¶è¾“å‡º
- åœ¨ Debug æ¨¡å¼ä¸‹è‡ªåŠ¨å¯ç”¨ï¼Œåœ¨ Release æ¨¡å¼ä¸‹ä¸è¾“å‡º
- ç”¨äºå¼€å‘è°ƒè¯•

#### log_message!

```rust
log_message!("Running environment checks...");
log_message!("[1/2] Checking Git repository status...");
```

- æ€»æ˜¯è¾“å‡ºï¼Œä¸å—æ—¥å¿—çº§åˆ«é™åˆ¶
- ç”¨äºè¾“å‡º setup/check ç­‰å‘½ä»¤çš„è¯´æ˜ä¿¡æ¯
- è¿™äº›ä¿¡æ¯æ˜¯æŒ‡ä»¤æ€§çš„ï¼Œç”¨æˆ·éœ€è¦çœ‹åˆ°

#### log_break!

```rust
log_break!();                    // è¾“å‡ºæ¢è¡Œç¬¦
log_break!('-');                 // ä½¿ç”¨é»˜è®¤åˆ†éš”ç¬¦ï¼ˆ80ä¸ª '-'ï¼‰
log_break!('=');                 // æŒ‡å®šåˆ†éš”ç¬¦å­—ç¬¦
log_break!('=', 100);            // æŒ‡å®šåˆ†éš”ç¬¦å­—ç¬¦å’Œé•¿åº¦
log_break!('=', 20, "text");     // åœ¨åˆ†éš”çº¿ä¸­é—´æ’å…¥æ–‡æœ¬
```

- ç”¨äºè¾“å‡ºåˆ†éš”çº¿æˆ–æ¢è¡Œ
- æ”¯æŒè‡ªå®šä¹‰å­—ç¬¦å’Œé•¿åº¦
- æ”¯æŒåœ¨åˆ†éš”çº¿ä¸­é—´æ’å…¥æ–‡æœ¬

### æ—¥å¿—çº§åˆ«ç®¡ç†

#### åˆå§‹åŒ–æ—¥å¿—çº§åˆ«

```rust
// ä»ç¯å¢ƒå˜é‡æˆ–ä½¿ç”¨é»˜è®¤å€¼
LogLevel::init(None);

// æ˜¾å¼è®¾ç½®æ—¥å¿—çº§åˆ«
LogLevel::init(Some(LogLevel::Debug));
```

**ä¼˜å…ˆçº§**ï¼š
1. å¦‚æœæä¾›äº† `level` å‚æ•°ï¼Œä½¿ç”¨å‚æ•°å€¼ï¼ˆé€šå¸¸ä»é…ç½®æ–‡ä»¶è¯»å–ï¼‰
2. å¦åˆ™ä½¿ç”¨é»˜è®¤çº§åˆ«ï¼ˆæ ¹æ®ç¼–è¯‘æ¨¡å¼å†³å®šï¼‰

#### è¿è¡Œæ—¶è®¾ç½®æ—¥å¿—çº§åˆ«

```rust
LogLevel::set_level(LogLevel::Debug);
let current_level = LogLevel::get_level();
```

### è®¾è®¡å†³ç­–

1. **æˆåŠŸæ¶ˆæ¯æ€»æ˜¯æ˜¾ç¤º**ï¼šæˆåŠŸæ¶ˆæ¯æ˜¯å‘½ä»¤æ‰§è¡Œç»“æœçš„é‡è¦åé¦ˆï¼Œåº”è¯¥å§‹ç»ˆæ˜¾ç¤ºç»™ç”¨æˆ·
2. **è¯´æ˜ä¿¡æ¯ä¸å—æ—¥å¿—çº§åˆ«é™åˆ¶**ï¼šsetup/check ç­‰å‘½ä»¤çš„è¯´æ˜ä¿¡æ¯æ˜¯æŒ‡ä»¤æ€§çš„ï¼Œç”¨æˆ·éœ€è¦çœ‹åˆ°
3. **è°ƒè¯•ä¿¡æ¯è‡ªåŠ¨æ§åˆ¶**ï¼šæ ¹æ®ç¼–è¯‘æ¨¡å¼è‡ªåŠ¨å†³å®šæ˜¯å¦è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œé¿å…åœ¨ Release ç‰ˆæœ¬ä¸­æ³„éœ²è°ƒè¯•ä¿¡æ¯
4. **çº¿ç¨‹å®‰å…¨**ï¼šä½¿ç”¨ `Mutex` ä¿è¯æ—¥å¿—çº§åˆ«çš„çº¿ç¨‹å®‰å…¨è®¿é—®

### ä½¿ç”¨åœºæ™¯

- **CLI å‘½ä»¤è¾“å‡º**ï¼šæ‰€æœ‰å‘½ä»¤ä½¿ç”¨æ—¥å¿—å®è¾“å‡ºæ‰§è¡Œç»“æœ
- **é”™è¯¯å¤„ç†**ï¼šä½¿ç”¨ `log_error!` æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
- **è¿›åº¦æç¤º**ï¼šä½¿ç”¨ `log_info!` æ˜¾ç¤ºå¤„ç†è¿›åº¦
- **è°ƒè¯•å¼€å‘**ï¼šä½¿ç”¨ `log_debug!` è¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼ˆä»…åœ¨ Debug æ¨¡å¼ï¼‰

#### 2. å­—ç¬¦ä¸²å¤„ç†å·¥å…· (`string.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾›å­—ç¬¦ä¸²å¤„ç†ç›¸å…³çš„å·¥å…·å‡½æ•°ï¼Œä¸»è¦ç”¨äºæ•æ„Ÿä¿¡æ¯çš„éšè—ã€‚

### æ ¸å¿ƒå‡½æ•°

#### mask_sensitive_value

```rust
pub fn mask_sensitive_value(value: &str) -> String
```

**åŠŸèƒ½**ï¼šéšè—æ•æ„Ÿå€¼ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰

**è§„åˆ™**ï¼š
- çŸ­å€¼ï¼ˆé•¿åº¦ â‰¤ 12ï¼‰ï¼šå®Œå…¨éšè—ï¼Œæ˜¾ç¤ºä¸º `***`
- é•¿å€¼ï¼ˆé•¿åº¦ > 12ï¼‰ï¼šæ˜¾ç¤ºå‰ 4 ä¸ªå­—ç¬¦å’Œå 4 ä¸ªå­—ç¬¦ï¼Œä¸­é—´ç”¨ `***` ä»£æ›¿

**ç¤ºä¾‹**ï¼š

```rust
use workflow::mask_sensitive_value;

assert_eq!(mask_sensitive_value("short"), "***");
assert_eq!(mask_sensitive_value("verylongapikey123456"), "very***3456");
```

### ä½¿ç”¨åœºæ™¯

- **æ—¥å¿—è¾“å‡º**ï¼šåœ¨æ—¥å¿—ä¸­éšè— API Keyã€å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯
- **é…ç½®æ˜¾ç¤º**ï¼šåœ¨æ˜¾ç¤ºé…ç½®æ—¶éšè—æ•æ„Ÿå€¼
- **é”™è¯¯ä¿¡æ¯**ï¼šåœ¨é”™è¯¯ä¿¡æ¯ä¸­éšè—æ•æ„Ÿæ•°æ®

#### 3. æµè§ˆå™¨æ“ä½œ (`browser.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾›åœ¨ç³»ç»Ÿé»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€ URL çš„åŠŸèƒ½ã€‚

### æ ¸å¿ƒç»„ä»¶

#### Browser ç»“æ„ä½“

```rust
pub struct Browser;
```

#### Browser::open

```rust
pub fn open(url: &str) -> Result<()>
```

**åŠŸèƒ½**ï¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ URL

**å‚æ•°**ï¼š
- `url` - è¦æ‰“å¼€çš„ URL

**é”™è¯¯**ï¼šå¦‚æœæ— æ³•æ‰“å¼€æµè§ˆå™¨ï¼Œè¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯

**å®ç°**ï¼šä½¿ç”¨ `open` crate æä¾›çš„è·¨å¹³å°åŠŸèƒ½

### ä½¿ç”¨åœºæ™¯

- **æ‰“å¼€æ–‡æ¡£**ï¼šåœ¨ç”¨æˆ·éœ€è¦æŸ¥çœ‹æ–‡æ¡£æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
- **æ‰“å¼€ GitHub é“¾æ¥**ï¼šåœ¨ PR ç›¸å…³å‘½ä»¤ä¸­æ‰“å¼€ GitHub é“¾æ¥
- **æ‰“å¼€ Jira é“¾æ¥**ï¼šåœ¨ Jira ç›¸å…³å‘½ä»¤ä¸­æ‰“å¼€ Jira é“¾æ¥

#### 4. å‰ªè´´æ¿æ“ä½œ (`clipboard.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾›å‰ªè´´æ¿çš„è¯»å†™åŠŸèƒ½ã€‚

### æ ¸å¿ƒç»„ä»¶

#### Clipboard ç»“æ„ä½“

```rust
pub struct Clipboard;
```

#### Clipboard::copy

```rust
pub fn copy(text: &str) -> Result<()>
```

**åŠŸèƒ½**ï¼šå¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿

**å‚æ•°**ï¼š
- `text` - è¦å¤åˆ¶çš„æ–‡æœ¬

**é”™è¯¯**ï¼šå¦‚æœå¤åˆ¶å¤±è´¥ï¼Œè¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯

**å®ç°**ï¼šä½¿ç”¨ `clipboard` crate æä¾›çš„è·¨å¹³å°åŠŸèƒ½

### å¹³å°é™åˆ¶

**é‡è¦è¯´æ˜**ï¼šå‰ªè´´æ¿åŠŸèƒ½åœ¨ä»¥ä¸‹å¹³å°ä¸å¯ç”¨ï¼ˆé™é»˜å¤±è´¥ï¼Œä¸å½±å“å…¶ä»–åŠŸèƒ½ï¼‰ï¼š

- **Linux ARM64** (`aarch64-unknown-linux-gnu`)ï¼šç”±äº XCB åº“åœ¨ Ubuntu æºä¸­ä¸å¯ç”¨ï¼Œäº¤å‰ç¼–è¯‘æ—¶æ— æ³•é“¾æ¥ XCB åº“
- **musl é™æ€é“¾æ¥ç‰ˆæœ¬** (`*-unknown-linux-musl`)ï¼šmusl ä¸æ”¯æŒ XCB åº“

**æ”¯æŒå¹³å°**ï¼š
- âœ… macOS (Intel å’Œ Apple Silicon)
- âœ… Linux x86_64 (glibc)
- âœ… Windows (x86_64 å’Œ ARM64)

**è®¾è®¡è¯´æ˜**ï¼š
- åœ¨ä¸å—æ”¯æŒçš„å¹³å°ä¸Šï¼Œ`Clipboard::copy()` ä¼šé™é»˜æˆåŠŸï¼ˆè¿”å› `Ok(())`ï¼‰ï¼Œä½†ä¸ä¼šå®é™…å¤åˆ¶å†…å®¹
- è¿™æ ·è®¾è®¡æ˜¯ä¸ºäº†ç¡®ä¿å…¶ä»–åŠŸèƒ½ä¸å—å½±å“ï¼Œç”¨æˆ·ä»å¯ä»¥æ­£å¸¸ä½¿ç”¨å…¶ä»–å‘½ä»¤

### ä½¿ç”¨åœºæ™¯

- **å¤åˆ¶å‘½ä»¤**ï¼šå¤åˆ¶ç”Ÿæˆçš„å‘½ä»¤åˆ°å‰ªè´´æ¿ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨
- **å¤åˆ¶ URL**ï¼šå¤åˆ¶ç”Ÿæˆçš„ URL åˆ°å‰ªè´´æ¿
- **å¤åˆ¶é…ç½®**ï¼šå¤åˆ¶é…ç½®ä¿¡æ¯åˆ°å‰ªè´´æ¿

#### 5. æ–‡ä»¶è§£å‹å·¥å…· (`unzip.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾› tar.gz æ–‡ä»¶è§£å‹åŠŸèƒ½ã€‚

### æ ¸å¿ƒç»„ä»¶

#### Unzip ç»“æ„ä½“

```rust
pub struct Unzip;
```

#### Unzip::extract_tar_gz

```rust
pub fn extract_tar_gz(tar_gz_path: &Path, output_dir: &Path) -> Result<()>
```

**åŠŸèƒ½**ï¼šè§£å‹ tar.gz æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•

**å‚æ•°**ï¼š
- `tar_gz_path` - tar.gz æ–‡ä»¶è·¯å¾„
- `output_dir` - è§£å‹ç›®æ ‡ç›®å½•

**é”™è¯¯**ï¼šå¦‚æœè§£å‹å¤±è´¥ï¼Œè¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯

**å®ç°**ï¼š
- ä½¿ç”¨ `flate2` crate è¿›è¡Œ Gzip è§£å‹
- ä½¿ç”¨ `tar` crate è¿›è¡Œ tar å½’æ¡£è§£å‹

**ç¤ºä¾‹**ï¼š

```rust
use workflow::Unzip;
use std::path::Path;

Unzip::extract_tar_gz(
    Path::new("archive.tar.gz"),
    Path::new("./output")
)?;
```

### ä½¿ç”¨åœºæ™¯

- **æ›´æ–°åŠŸèƒ½**ï¼šè§£å‹ä¸‹è½½çš„æ›´æ–°åŒ…
- **å®‰è£…åŠŸèƒ½**ï¼šè§£å‹å®‰è£…åŒ…
- **è¡¥å…¨è„šæœ¬å®‰è£…**ï¼šè§£å‹è¡¥å…¨è„šæœ¬åŒ…

#### 6. æ ¡éªŒå’ŒéªŒè¯å·¥å…· (`checksum.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾›æ–‡ä»¶æ ¡éªŒå’Œè®¡ç®—å’ŒéªŒè¯åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- è®¡ç®—æ–‡ä»¶çš„ SHA256 å“ˆå¸Œå€¼
- è§£ææ ¡éªŒå’Œæ–‡ä»¶å†…å®¹
- éªŒè¯æ–‡ä»¶å®Œæ•´æ€§
- æ„å»ºæ ¡éªŒå’Œ URLï¼ˆçº¯å­—ç¬¦ä¸²æ“ä½œï¼‰

### æ ¸å¿ƒç»„ä»¶

#### Checksum ç»“æ„ä½“

```rust
pub struct Checksum;
```

#### Checksum::calculate_file_sha256

```rust
pub fn calculate_file_sha256(file_path: &Path) -> Result<String>
```

**åŠŸèƒ½**ï¼šè®¡ç®—æ–‡ä»¶çš„ SHA256 å“ˆå¸Œå€¼

**å‚æ•°**ï¼š
- `file_path` - è¦è®¡ç®—å“ˆå¸Œå€¼çš„æ–‡ä»¶è·¯å¾„

**è¿”å›**ï¼šè¿”å›æ–‡ä»¶çš„ SHA256 å“ˆå¸Œå€¼ï¼ˆåå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼‰

**å®ç°**ï¼š
- ä½¿ç”¨ `sha2` crate è¿›è¡Œ SHA256 è®¡ç®—
- ä½¿ç”¨ 8KB ç¼“å†²åŒºé€å—è¯»å–æ–‡ä»¶ï¼Œé¿å…å†…å­˜å ç”¨è¿‡å¤§

#### Checksum::parse_hash_from_content

```rust
pub fn parse_hash_from_content(content: &str) -> Result<String>
```

**åŠŸèƒ½**ï¼šä»æ ¡éªŒå’Œæ–‡ä»¶å†…å®¹ä¸­æå–å“ˆå¸Œå€¼

**å‚æ•°**ï¼š
- `content` - æ ¡éªŒå’Œæ–‡ä»¶çš„æ–‡æœ¬å†…å®¹

**è¿”å›**ï¼šè¿”å›æå–çš„å“ˆå¸Œå€¼

**æ ¼å¼æ”¯æŒ**ï¼š
- `"hash  filename"` æ ¼å¼ï¼ˆæ ‡å‡†æ ¼å¼ï¼‰
- `"hash"` æ ¼å¼ï¼ˆåªæœ‰å“ˆå¸Œå€¼ï¼‰

**ç¤ºä¾‹**ï¼š

```rust
use workflow::Checksum;

let content = "abc123def456  file.tar.gz";
let hash = Checksum::parse_hash_from_content(content)?;
assert_eq!(hash, "abc123def456");
```

#### Checksum::verify

```rust
pub fn verify(file_path: &Path, expected_hash: &str) -> Result<()>
```

**åŠŸèƒ½**ï¼šéªŒè¯æ–‡ä»¶å®Œæ•´æ€§ï¼ˆé€šè¿‡æ¯”è¾ƒå“ˆå¸Œå€¼ï¼‰

**å‚æ•°**ï¼š
- `file_path` - è¦éªŒè¯çš„æ–‡ä»¶è·¯å¾„
- `expected_hash` - æœŸæœ›çš„ SHA256 å“ˆå¸Œå€¼

**è¿”å›**ï¼šå¦‚æœå“ˆå¸Œå€¼åŒ¹é…ï¼Œè¿”å› `Ok(())`ï¼›å¦åˆ™è¿”å›é”™è¯¯

**å®ç°**ï¼š
- è®¡ç®—æ–‡ä»¶çš„å®é™…å“ˆå¸Œå€¼
- ä¸æœŸæœ›å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒ
- è¾“å‡ºéªŒè¯ç»“æœæ—¥å¿—

#### Checksum::build_url

```rust
pub fn build_url(url: &str) -> String
```

**åŠŸèƒ½**ï¼šä»ä¸‹è½½ URL æ„å»ºæ ¡éªŒå’Œ URL

**å‚æ•°**ï¼š
- `download_url` - ä¸‹è½½æ–‡ä»¶çš„ URL

**è¿”å›**ï¼šè¿”å›æ ¡éªŒå’Œæ–‡ä»¶çš„ URL

**è§„åˆ™**ï¼šåœ¨ä¸‹è½½ URL åæ·»åŠ  `.sha256` åç¼€

**ç¤ºä¾‹**ï¼š

```rust
use workflow::Checksum;

let url = "https://example.com/file.tar.gz";
assert_eq!(Checksum::build_url(url), "https://example.com/file.tar.gz.sha256");
```

### ä½¿ç”¨åœºæ™¯

- **æ›´æ–°åŠŸèƒ½**ï¼šéªŒè¯ä¸‹è½½çš„æ›´æ–°åŒ…å®Œæ•´æ€§
- **å®‰è£…åŠŸèƒ½**ï¼šéªŒè¯å®‰è£…åŒ…å®Œæ•´æ€§
- **å®‰å…¨éªŒè¯**ï¼šç¡®ä¿ä¸‹è½½çš„æ–‡ä»¶æœªè¢«ç¯¡æ”¹

#### 7. ç”¨æˆ·ç¡®è®¤å¯¹è¯æ¡† (`confirm.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾›ç»Ÿä¸€çš„ç”¨æˆ·ç¡®è®¤æ¥å£ï¼Œç®€åŒ– `Confirm::new()` çš„ä½¿ç”¨ã€‚

### æ ¸å¿ƒå‡½æ•°

#### confirm

```rust
pub fn confirm(prompt: &str, default: bool, message: Option<&str>) -> Result<bool>
```

**åŠŸèƒ½**ï¼šæ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†å¹¶è·å–ç”¨æˆ·é€‰æ‹©

**å‚æ•°**ï¼š
- `prompt` - æç¤ºä¿¡æ¯
- `default` - é»˜è®¤é€‰æ‹©ï¼ˆtrue è¡¨ç¤ºé»˜è®¤ç¡®è®¤ï¼Œfalse è¡¨ç¤ºé»˜è®¤å–æ¶ˆï¼‰
- `cancel_message` - å–æ¶ˆæ—¶çš„é”™è¯¯æ¶ˆæ¯ï¼ˆå¯é€‰ï¼‰
  - å¦‚æœä¸º `Some(msg)`ï¼Œå–æ¶ˆæ—¶è¿”å›é”™è¯¯
  - å¦‚æœä¸º `None`ï¼Œå–æ¶ˆæ—¶è¿”å› `Ok(false)`

**è¿”å›**ï¼š
- ç”¨æˆ·ç¡®è®¤ï¼šè¿”å› `Ok(true)`
- ç”¨æˆ·å–æ¶ˆä¸” `cancel_message` ä¸º `Some`ï¼šè¿”å›é”™è¯¯
- ç”¨æˆ·å–æ¶ˆä¸” `cancel_message` ä¸º `None`ï¼šè¿”å› `Ok(false)`

**å®ç°**ï¼šä½¿ç”¨ `dialoguer` crate æä¾›äº¤äº’å¼ç¡®è®¤å¯¹è¯æ¡†

### ä½¿ç”¨åœºæ™¯

#### åœºæ™¯ 1ï¼šéœ€è¦æ ¹æ®ç”¨æˆ·é€‰æ‹©æ‰§è¡Œä¸åŒé€»è¾‘

```rust
use workflow::confirm;

if confirm("Do you want to continue?", true, None)? {
    // ç”¨æˆ·ç¡®è®¤ï¼Œæ‰§è¡Œæ“ä½œ
} else {
    // ç”¨æˆ·å–æ¶ˆï¼Œæ‰§è¡Œå…¶ä»–é€»è¾‘
}
```

#### åœºæ™¯ 2ï¼šéœ€è¦ç”¨æˆ·ç¡®è®¤æ‰èƒ½ç»§ç»­ï¼Œå–æ¶ˆåˆ™ç»ˆæ­¢

```rust
use workflow::confirm;

confirm(
    "This operation cannot be undone. Continue?",
    false,
    Some("Operation cancelled.")
)?;
// å¦‚æœç”¨æˆ·å–æ¶ˆï¼Œå‡½æ•°ä¼šè¿”å›é”™è¯¯ï¼Œä¸ä¼šç»§ç»­æ‰§è¡Œ
```

### è®¾è®¡å†³ç­–

1. **ç»Ÿä¸€çš„ç¡®è®¤æ¥å£**ï¼šç®€åŒ– `Confirm::new()` çš„ä½¿ç”¨ï¼Œæä¾›æ›´ç®€æ´çš„ API
2. **çµæ´»çš„å–æ¶ˆå¤„ç†**ï¼šæ”¯æŒä¸¤ç§å–æ¶ˆå¤„ç†æ–¹å¼ï¼š
   - è¿”å› `Ok(false)`ï¼šå…è®¸è°ƒç”¨è€…æ ¹æ®è¿”å›å€¼å†³å®šåç»­é€»è¾‘
   - è¿”å›é”™è¯¯ï¼šå¼ºåˆ¶è¦æ±‚ç”¨æˆ·ç¡®è®¤ï¼Œå–æ¶ˆåˆ™ç»ˆæ­¢æ“ä½œ

#### 8. æ ¼å¼åŒ–å·¥å…· (`format.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾›å„ç§æ ¼å¼åŒ–å‡½æ•°ï¼ŒåŒ…æ‹¬æ–‡ä»¶å¤§å°æ ¼å¼åŒ–ç­‰ã€‚

### æ ¸å¿ƒå‡½æ•°

#### format_size

```rust
pub fn format_size(bytes: u64) -> String
```

**åŠŸèƒ½**ï¼šæ ¼å¼åŒ–æ–‡ä»¶å¤§å°

**å‚æ•°**ï¼š
- `bytes` - å­—èŠ‚æ•°

**è¿”å›**ï¼šæ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ "1.23 MB" æˆ– "1024 B"

**è§„åˆ™**ï¼š
- è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å•ä½ï¼ˆB, KB, MB, GB, TBï¼‰
- å°äº 1024 å­—èŠ‚æ—¶æ˜¾ç¤ºä¸º "X B"
- å¤§äºç­‰äº 1024 å­—èŠ‚æ—¶æ˜¾ç¤ºä¸º "X.XX UNIT"ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰

**ç¤ºä¾‹**ï¼š
```rust
use workflow::base::util::format_size;

assert_eq!(format_size(0), "0 B");
assert_eq!(format_size(1024), "1.00 KB");
assert_eq!(format_size(1048576), "1.00 MB");
```

### ä½¿ç”¨åœºæ™¯

- **æ–‡ä»¶å¤§å°æ˜¾ç¤º**ï¼šåœ¨ä¸‹è½½ã€æ›´æ–°ç­‰å‘½ä»¤ä¸­æ˜¾ç¤ºæ–‡ä»¶å¤§å°
- **è¿›åº¦æç¤º**ï¼šæ˜¾ç¤ºä¸‹è½½è¿›åº¦å’Œæ–‡ä»¶å¤§å°

#### 9. å¹³å°æ£€æµ‹å·¥å…· (`platform.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾›å¹³å°æ£€æµ‹ç›¸å…³çš„å·¥å…·å‡½æ•°ï¼Œç”¨äºè¯†åˆ«å½“å‰è¿è¡Œçš„æ“ä½œç³»ç»Ÿå’Œæ¶æ„ã€‚

### æ ¸å¿ƒå‡½æ•°

#### detect_release_platform

```rust
pub fn detect_release_platform() -> Result<String>
```

**åŠŸèƒ½**ï¼šæ£€æµ‹å½“å‰å¹³å°å¹¶è¿”å› GitHub Releases æ ¼å¼çš„å¹³å°æ ‡è¯†ç¬¦

**è¿”å›**ï¼šå¹³å°æ ‡è¯†ç¬¦å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ `"macOS-AppleSilicon"` æˆ– `"Linux-x86_64-static"`

**æ”¯æŒçš„å¹³å°æ ¼å¼**ï¼š
- macOS: `macOS-Intel`, `macOS-AppleSilicon`
- Linux: `Linux-x86_64`, `Linux-x86_64-static`, `Linux-ARM64`
- Windows: `Windows-x86_64`, `Windows-ARM64`

**æ£€æµ‹é€»è¾‘**ï¼š
- å¯¹äº Linux x86_64ï¼Œä¼šè‡ªåŠ¨æ£€æµ‹æ˜¯å¦éœ€è¦é™æ€é“¾æ¥ç‰ˆæœ¬ï¼ˆmusl/staticï¼‰ï¼š
  1. æ£€æŸ¥æ˜¯å¦æ˜¯ Alpine Linuxï¼ˆé€šå¸¸ä½¿ç”¨ muslï¼‰
  2. æ£€æµ‹å½“å‰äºŒè¿›åˆ¶æ˜¯å¦é™æ€é“¾æ¥ï¼ˆä½¿ç”¨ `ldd` å‘½ä»¤ï¼‰

**ç¤ºä¾‹**ï¼š
```rust
use workflow::base::util::detect_release_platform;
use workflow::log_message;

let platform = detect_release_platform()?;
log_message!("Detected platform: {}", platform);
```

### ä½¿ç”¨åœºæ™¯

- **æ›´æ–°åŠŸèƒ½**ï¼šæ£€æµ‹å¹³å°ä»¥åŒ¹é…å¯¹åº”çš„ GitHub Release èµ„æºæ–‡ä»¶
- **å®‰è£…åŠŸèƒ½**ï¼šæ£€æµ‹å¹³å°ä»¥é€‰æ‹©æ­£ç¡®çš„å®‰è£…åŒ…

#### 10. è¡¨æ ¼è¾“å‡ºå·¥å…· (`table.rs`)

### åŠŸèƒ½æ¦‚è¿°

æä¾›ç»Ÿä¸€çš„è¡¨æ ¼è¾“å‡ºæ¥å£ï¼Œä½¿ç”¨ `tabled` åº“ã€‚æ”¯æŒè‡ªå®šä¹‰æ ·å¼ã€è¾¹æ¡†ã€å¯¹é½ç­‰ã€‚

### æ ¸å¿ƒç»„ä»¶

#### TableBuilder

```rust
pub struct TableBuilder<T> {
    data: Vec<T>,
    title: Option<String>,
    style: Option<TableStyle>,
    max_width: Option<usize>,
    alignments: Vec<Alignment>,
}
```

**ä¸»è¦æ–¹æ³•**ï¼š
- `new(data)` - åˆ›å»ºæ–°çš„è¡¨æ ¼æ„å»ºå™¨
- `with_title(title)` - è®¾ç½®è¡¨æ ¼æ ‡é¢˜
- `with_style(style)` - è®¾ç½®è¡¨æ ¼æ ·å¼
- `with_max_width(width)` - è®¾ç½®æœ€å¤§å®½åº¦ï¼ˆè‡ªåŠ¨æ¢è¡Œï¼‰
- `with_alignment(alignments)` - è®¾ç½®åˆ—å¯¹é½æ–¹å¼
- `render()` - æ„å»ºå¹¶æ¸²æŸ“è¡¨æ ¼ä¸ºå­—ç¬¦ä¸²

**ç‰¹æ€§**ï¼š
- æ”¯æŒé“¾å¼è°ƒç”¨
- æ”¯æŒè‡ªå®šä¹‰æ ·å¼å’Œè¾¹æ¡†
- æ”¯æŒåˆ—å¯¹é½å’Œå®½åº¦æ§åˆ¶
- æ”¯æŒç´§å‡‘æ¨¡å¼å’Œå®Œæ•´æ¨¡å¼

#### TableStyle æšä¸¾

```rust
pub enum TableStyle {
    Default,  // é»˜è®¤æ ·å¼ï¼ˆASCIIï¼‰
    Modern,   // ç°ä»£æ ·å¼ï¼ˆå¸¦è¾¹æ¡†ï¼‰
    Compact,  // ç´§å‡‘æ ·å¼ï¼ˆæ— è¾¹æ¡†ï¼‰
    Minimal,  // æœ€å°æ ·å¼ï¼ˆä»…åˆ†éš”ç¬¦ï¼‰
    Grid,     // ç½‘æ ¼æ ·å¼ï¼ˆå®Œæ•´ç½‘æ ¼ï¼‰
}
```

### ä½¿ç”¨åœºæ™¯

- **PR åˆ—è¡¨æ˜¾ç¤º**ï¼šä½¿ç”¨ `PullRequestRow` ç»“æ„ä½“æ˜¾ç¤º PR åˆ—è¡¨
- **æ•°æ®è¡¨æ ¼**ï¼šæ˜¾ç¤ºä»»ä½•éœ€è¦è¡¨æ ¼æ ¼å¼çš„æ•°æ®

### è®¾è®¡å†³ç­–

1. **é“¾å¼è°ƒç”¨**ï¼šæ”¯æŒé“¾å¼é…ç½®ï¼Œæä¾›æ›´å¥½çš„ä»£ç å¯è¯»æ€§
2. **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨æ³›å‹å’Œ `Tabled` trait ä¿è¯ç±»å‹å®‰å…¨
3. **çµæ´»é…ç½®**ï¼šæ”¯æŒå¤šç§æ ·å¼å’Œå¯¹é½æ–¹å¼

### è®¾è®¡æ¨¡å¼

#### å·¥å…·ç±»è®¾è®¡

æ‰€æœ‰å·¥å…·å‡½æ•°é‡‡ç”¨é™æ€æ–¹æ³•è®¾è®¡ï¼Œæ— éœ€å®ä¾‹åŒ–ï¼š

```rust
// æ—¥å¿—ç³»ç»Ÿ
Logger::print_info("message");

// æµè§ˆå™¨æ“ä½œ
Browser::open("https://example.com");

// å‰ªè´´æ¿æ“ä½œ
Clipboard::copy("text");

// æ–‡ä»¶æ“ä½œ
Unzip::extract_tar_gz(path, dir)?;
Checksum::verify(file, hash)?;
```

**ä¼˜åŠ¿**ï¼š
- æ— éœ€ç®¡ç†å®ä¾‹çŠ¶æ€
- ä½¿ç”¨ç®€å•ï¼Œç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•
- é€‚åˆå·¥å…·å‡½æ•°çš„åœºæ™¯

#### æ—¥å¿—å®è®¾è®¡

ä½¿ç”¨ Rust å®ç³»ç»Ÿæä¾›ä¾¿æ·çš„æ—¥å¿—è¾“å‡ºæ¥å£ï¼š

```rust
log_info!("Processing {} items", count);
```

**ä¼˜åŠ¿**ï¼š
- æ”¯æŒæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆç±»ä¼¼ `println!`ï¼‰
- ç¼–è¯‘æ—¶å±•å¼€ï¼Œæ€§èƒ½å¼€é”€å°
- ç»Ÿä¸€çš„æ—¥å¿—è¾“å‡ºæ¥å£

#### é”™è¯¯å¤„ç†ç­–ç•¥

æ‰€æœ‰å¯èƒ½å¤±è´¥çš„æ“ä½œéƒ½è¿”å› `Result<T>`ï¼š

```rust
Browser::open(url)?;
Clipboard::copy(text)?;
Unzip::extract_tar_gz(path, dir)?;
Checksum::verify(file, hash)?;
```

**ä¼˜åŠ¿**ï¼š
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ–¹å¼
- ä½¿ç”¨ `?` æ“ä½œç¬¦ç®€åŒ–é”™è¯¯ä¼ æ’­
- ä½¿ç”¨ `anyhow` æä¾›è¯¦ç»†çš„é”™è¯¯ä¸Šä¸‹æ–‡

---

## ğŸ”„ è°ƒç”¨æµç¨‹ä¸æ•°æ®æµ

### æ•´ä½“æ¶æ„æµç¨‹

```
åº”ç”¨å±‚ï¼ˆå‘½ä»¤ã€æ¨¡å—ï¼‰
  â†“
å·¥å…·å‡½æ•° API
  â”œâ”€ æ—¥å¿—ç³»ç»Ÿ â†’ ç»ˆç«¯è¾“å‡º
  â”œâ”€ æµè§ˆå™¨æ“ä½œ â†’ ç³»ç»Ÿæµè§ˆå™¨
  â”œâ”€ å‰ªè´´æ¿æ“ä½œ â†’ ç³»ç»Ÿå‰ªè´´æ¿
  â”œâ”€ æ–‡ä»¶æ“ä½œ â†’ æ–‡ä»¶ç³»ç»Ÿ
  â””â”€ ç”¨æˆ·ç¡®è®¤ â†’ ç»ˆç«¯äº¤äº’
```

### æ•°æ®æµ

#### æ—¥å¿—è¾“å‡ºæµç¨‹

```
log_info!("message")
  â†“
Logger::print_info()
  â†“
æ£€æŸ¥æ—¥å¿—çº§åˆ«
  â†“
æ ¼å¼åŒ–æ¶ˆæ¯ï¼ˆæ·»åŠ é¢œè‰²å’Œå›¾æ ‡ï¼‰
  â†“
è¾“å‡ºåˆ°ç»ˆç«¯
```

#### æ–‡ä»¶æ“ä½œæµç¨‹

```
Unzip::extract_tar_gz(path, dir)
  â†“
è¯»å–æ–‡ä»¶
  â†“
è§£å‹åˆ°ç›®æ ‡ç›®å½•
  â†“
è¿”å› Result

Checksum::verify(file, hash)
  â†“
è¯»å–æ–‡ä»¶å†…å®¹
  â†“
è®¡ç®— SHA256
  â†“
æ¯”è¾ƒå“ˆå¸Œå€¼
  â†“
è¿”å› Result
```

### ä¸å…¶ä»–æ¨¡å—çš„é›†æˆ

util æ¨¡å—æ˜¯åŸºç¡€è®¾æ–½æ¨¡å—ï¼Œè¢«æ•´ä¸ªé¡¹ç›®å¹¿æ³›ä½¿ç”¨ï¼š

- **CLI å‘½ä»¤å±‚**ï¼šæ‰€æœ‰å‘½ä»¤ä½¿ç”¨æ—¥å¿—å®è¾“å‡ºç»“æœ
- **é…ç½®ç®¡ç†**ï¼šä½¿ç”¨æ—¥å¿—å®å’Œç¡®è®¤å¯¹è¯æ¡†
- **æ›´æ–°åŠŸèƒ½**ï¼šä½¿ç”¨è§£å‹å’Œæ ¡éªŒå’Œå·¥å…·
- **Git æ“ä½œ**ï¼šä½¿ç”¨æ—¥å¿—å®è¾“å‡ºçŠ¶æ€
- **Jira æ“ä½œ**ï¼šä½¿ç”¨æ—¥å¿—å®å’Œæµè§ˆå™¨å·¥å…·
- **PR æ“ä½œ**ï¼šä½¿ç”¨æ—¥å¿—å®ã€æµè§ˆå™¨å’Œå‰ªè´´æ¿å·¥å…·

**ä¾èµ–å…³ç³»**ï¼š

```
util (åŸºç¡€è®¾æ–½)
  â†“
æ‰€æœ‰ä¸šåŠ¡æ¨¡å—ï¼ˆcommands, lib/*ï¼‰
```

---

## ğŸ“ æ‰©å±•æ€§

### æ·»åŠ æ–°çš„æ—¥å¿—çº§åˆ«

1. åœ¨ `LogLevel` æšä¸¾ä¸­æ·»åŠ æ–°çº§åˆ«
2. åœ¨ `FromStr` å®ç°ä¸­æ·»åŠ å­—ç¬¦ä¸²è§£æ
3. åœ¨ `as_str` æ–¹æ³•ä¸­æ·»åŠ å­—ç¬¦ä¸²è½¬æ¢
4. æ·»åŠ å¯¹åº”çš„æ—¥å¿—å®ï¼ˆå¦‚æœéœ€è¦ï¼‰

### æ·»åŠ æ–°çš„å·¥å…·å‡½æ•°

1. åˆ›å»ºæ–°çš„æ¨¡å—æ–‡ä»¶ï¼ˆå¦‚ `new_tool.rs`ï¼‰
2. åœ¨ `mod.rs` ä¸­å£°æ˜æ¨¡å—å¹¶é‡æ–°å¯¼å‡º
3. åœ¨ `src/lib.rs` ä¸­æ·»åŠ åˆ°å…¨å±€å¯¼å‡ºï¼ˆå¦‚æœéœ€è¦ï¼‰

### æ·»åŠ æ–°çš„æ—¥å¿—å®

1. åœ¨ `logger.rs` ä¸­æ·»åŠ å®å®šä¹‰
2. ä½¿ç”¨ `#[macro_export]` å¯¼å‡ºå®
3. åœ¨ `src/lib.rs` ä¸­é‡æ–°å¯¼å‡ºï¼ˆå¦‚æœéœ€è¦ï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ€»ä½“æ¶æ„æ–‡æ¡£](../ARCHITECTURE.md)
- [Settings æ¨¡å—æ¶æ„æ–‡æ¡£](./SETTINGS_ARCHITECTURE.md)
- [HTTP æ¶æ„æ–‡æ¡£](./HTTP_ARCHITECTURE.md)
- [Dialog æ¨¡å—æ¶æ„æ–‡æ¡£](./DIALOG_ARCHITECTURE.md)
- [Indicator æ¨¡å—æ¶æ„æ–‡æ¡£](./INDICATOR_ARCHITECTURE.md)

---

## ğŸ“‹ ä½¿ç”¨ç¤ºä¾‹

### æ—¥å¿—è¾“å‡º

```rust
use workflow::{log_success, log_error, log_warning, log_info, log_debug};

// æˆåŠŸæ¶ˆæ¯
log_success!("Operation completed successfully");

// é”™è¯¯æ¶ˆæ¯
log_error!("Failed to process request");

// è­¦å‘Šæ¶ˆæ¯
log_warning!("This operation is deprecated");

// ä¿¡æ¯æ¶ˆæ¯
log_info!("Processing {} items", count);

// è°ƒè¯•æ¶ˆæ¯
log_debug!("Debug info: {:?}", data);

// åˆ†éš”çº¿
log_break!();
```

### å­—ç¬¦ä¸²å¤„ç†

```rust
use workflow::mask_sensitive_value;
use workflow::log_message;

let api_key = "verylongapikey123456";
log_message!("API Key: {}", mask_sensitive_value(api_key));
// è¾“å‡ºï¼šAPI Key: very***3456
```

### æµè§ˆå™¨æ“ä½œ

```rust
use workflow::Browser;

Browser::open("https://github.com")?;
```

### å‰ªè´´æ¿æ“ä½œ

```rust
use workflow::Clipboard;

Clipboard::copy("Hello, World!")?;
log_success!("Copied to clipboard");
```

### æ–‡ä»¶æ“ä½œ

```rust
use workflow::{Unzip, Checksum};

// è§£å‹æ–‡ä»¶
Unzip::extract_tar_gz("archive.tar.gz", "output_dir")?;

// éªŒè¯æ ¡éªŒå’Œ
Checksum::verify("file.bin", "expected_sha256_hash")?;
```

### ç”¨æˆ·ç¡®è®¤

```rust
use workflow::confirm;

if confirm("Do you want to continue?")? {
    log_info!("User confirmed");
} else {
    log_info!("User cancelled");
}
```

### æ ¼å¼åŒ–å·¥å…·

```rust
use workflow::base::util::format_size;
use workflow::log_message;

let size = format_size(1048576);
log_message!("File size: {}", size);  // è¾“å‡ºï¼šFile size: 1.00 MB
```

### å¹³å°æ£€æµ‹

```rust
use workflow::base::util::detect_release_platform;
use workflow::log_message;

let platform = detect_release_platform()?;
log_message!("Platform: {}", platform);  // è¾“å‡ºï¼šPlatform: macOS-AppleSilicon
```

### è¡¨æ ¼è¾“å‡º

```rust
use tabled::Tabled;
use workflow::base::table::{TableBuilder, TableStyle};

#[derive(Tabled)]
struct User {
    name: String,
    age: u32,
}

let users = vec![
    User { name: "Alice".to_string(), age: 30 },
    User { name: "Bob".to_string(), age: 25 },
];

let output = TableBuilder::new(users)
    .with_title("Users")
    .with_style(TableStyle::Modern)
    .render();
log_message!("{}", output);
```

---

## âœ… æ€»ç»“

å·¥å…·å‡½æ•°æ¨¡å—ä¸ºæ•´ä¸ªé¡¹ç›®æä¾›é€šç”¨çš„åŸºç¡€è®¾æ–½æ”¯æŒï¼š

1. **æ—¥å¿—ç³»ç»Ÿ**ï¼šå¸¦é¢œè‰²çš„æ—¥å¿—è¾“å‡ºï¼Œæ”¯æŒæ—¥å¿—çº§åˆ«æ§åˆ¶
2. **å­—ç¬¦ä¸²å¤„ç†**ï¼šæ•æ„Ÿå€¼éšè—
3. **æµè§ˆå™¨å’Œå‰ªè´´æ¿**ï¼šç³»ç»Ÿé›†æˆæ“ä½œ
4. **æ–‡ä»¶æ“ä½œ**ï¼šè§£å‹å’Œæ ¡éªŒå’ŒéªŒè¯
5. **ç”¨æˆ·ç¡®è®¤**ï¼šäº¤äº’å¼ç¡®è®¤å¯¹è¯æ¡†
6. **æ ¼å¼åŒ–å·¥å…·**ï¼šæ–‡ä»¶å¤§å°æ ¼å¼åŒ–
7. **å¹³å°æ£€æµ‹**ï¼šGitHub Releases å¹³å°è¯†åˆ«
8. **è¡¨æ ¼è¾“å‡º**ï¼šç»Ÿä¸€çš„è¡¨æ ¼æ˜¾ç¤ºæ¥å£

**æ³¨æ„**ï¼šäº¤äº’å¼å¯¹è¯æ¡†å’Œè¿›åº¦æŒ‡ç¤ºå™¨å·²ç§»è‡³ç‹¬ç«‹æ¨¡å—ï¼Œè¯·å‚è€ƒç›¸å…³æ¶æ„æ–‡æ¡£ã€‚

**è®¾è®¡ä¼˜åŠ¿**ï¼š
- âœ… **æ˜“ç”¨æ€§**ï¼šç®€æ´çš„ API å’Œå®ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨
- âœ… **ä¸€è‡´æ€§**ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ–¹å¼
- âœ… **å¯é…ç½®æ€§**ï¼šæ—¥å¿—çº§åˆ«å¯é€šè¿‡ç¯å¢ƒå˜é‡æˆ–è¿è¡Œæ—¶è®¾ç½®
- âœ… **è·¨å¹³å°**ï¼šæ‰€æœ‰å·¥å…·å‡½æ•°æ”¯æŒå¤šå¹³å°
- âœ… **é«˜æ€§èƒ½**ï¼šå®åœ¨ç¼–è¯‘æ—¶å±•å¼€ï¼Œæµå¼å¤„ç†æ–‡ä»¶
- âœ… **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨æ³›å‹å’Œ trait ä¿è¯ç±»å‹å®‰å…¨

---

**æœ€åæ›´æ–°**: 2025-12-16
