# Workflow æ¶æ„è®¾è®¡

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

Workflow æ˜¯ä¸€ä¸ª Rust ç¼–å†™çš„ CLI å·¥å…·ï¼Œç”¨äºè‡ªåŠ¨åŒ–å¼€å‘å·¥ä½œæµï¼Œæä¾› PR ç®¡ç†ã€Jira é›†æˆã€æ—¥å¿—å¤„ç†ç­‰åŠŸèƒ½ã€‚

---

## ğŸ—ï¸ æ¨¡å—åˆ’åˆ†

```
src/
â”œâ”€â”€ main.rs                 # CLI å…¥å£å’Œå‘½ä»¤åˆ†å‘
â”œâ”€â”€ lib.rs                  # åº“å…¥å£å’Œæ¨¡å—å£°æ˜ï¼ˆé‡æ–°å¯¼å‡ºæ‰€æœ‰å…¬å…± APIï¼‰
â”œâ”€â”€ bin/                    # ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆç‹¬ç«‹çš„ CLI å·¥å…·ï¼‰
â”‚   â””â”€â”€ install.rs          # å®‰è£…å‘½ä»¤å…¥å£ï¼ˆä½¿ç”¨ commands::lifecycle::installï¼‰
â”œâ”€â”€ commands/               # å‘½ä»¤å®ç°æ¨¡å—ï¼ˆCLI å‘½ä»¤å°è£…å±‚ï¼‰
â”‚   â”œâ”€â”€ mod.rs              # å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”œâ”€â”€ pr/                 # PR ç›¸å…³å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # PR å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ helpers.rs      # PR è¾…åŠ©å‡½æ•°ï¼ˆPR ID è§£æã€åˆ†æ”¯åå‰ç¼€åº”ç”¨ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ create.rs       # åˆ›å»º PR
â”‚   â”‚   â”œâ”€â”€ merge.rs        # åˆå¹¶ PR
â”‚   â”‚   â”œâ”€â”€ close.rs        # å…³é—­ PR
â”‚   â”‚   â”œâ”€â”€ status.rs       # PR çŠ¶æ€æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ list.rs         # åˆ—å‡º PR
â”‚   â”‚   â”œâ”€â”€ update.rs       # æ›´æ–° PR
â”‚   â”‚   â”œâ”€â”€ sync.rs         # åŒæ­¥åˆ†æ”¯å‘½ä»¤ï¼ˆåˆå¹¶äº†åŸ integrate åŠŸèƒ½ï¼‰
â”‚   â”‚   â”œâ”€â”€ rebase.rs       # Rebase åˆ†æ”¯å¹¶æ›´æ–° PR base
â”‚   â”‚   â”œâ”€â”€ pick.rs         # Pick æäº¤å¹¶åˆ›å»ºæ–° PR
â”‚   â”‚   â”œâ”€â”€ summarize.rs    # PR æ€»ç»“å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ approve.rs      # æ‰¹å‡† PR å‘½ä»¤
â”‚   â”‚   â””â”€â”€ comment.rs      # æ·»åŠ  PR è¯„è®ºå‘½ä»¤
â”‚   â”œâ”€â”€ log/                # æ—¥å¿—æ“ä½œå‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # Log å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ download.rs     # ä¸‹è½½æ—¥å¿—å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ find.rs         # æŸ¥æ‰¾è¯·æ±‚ ID å‘½ä»¤
â”‚   â”‚   â””â”€â”€ search.rs       # æœç´¢å…³é”®è¯å‘½ä»¤
â”‚   â”œâ”€â”€ jira/               # Jira æ“ä½œå‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # Jira å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ info.rs         # æ˜¾ç¤º ticket ä¿¡æ¯å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ attachments.rs  # ä¸‹è½½é™„ä»¶å‘½ä»¤
â”‚   â”‚   â””â”€â”€ clean.rs        # æ¸…ç†æ—¥å¿—ç›®å½•å‘½ä»¤
â”‚   â”œâ”€â”€ branch/             # åˆ†æ”¯ç®¡ç†å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # Branch å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ clean.rs        # æ¸…ç†æœ¬åœ°åˆ†æ”¯å‘½ä»¤
â”‚   â”‚   â””â”€â”€ ignore.rs      # ç®¡ç†åˆ†æ”¯å¿½ç•¥åˆ—è¡¨å‘½ä»¤
â”‚   â”œâ”€â”€ commit/             # Commit ç®¡ç†å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # Commit å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ amend.rs        # Commit amend å‘½ä»¤ï¼ˆä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ï¼‰
â”‚   â”‚   â”œâ”€â”€ reword.rs       # Commit reword å‘½ä»¤ï¼ˆä¿®æ”¹æäº¤æ¶ˆæ¯ï¼‰
â”‚   â”‚   â””â”€â”€ squash.rs       # Commit squash å‘½ä»¤ï¼ˆå‹ç¼©å¤šä¸ªæäº¤ï¼‰
â”‚   â”œâ”€â”€ github/             # GitHub è´¦å·ç®¡ç†å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # GitHub å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ github.rs       # GitHub è´¦å·ç®¡ç†å®ç°
â”‚   â”‚   â””â”€â”€ helpers.rs      # GitHub è¾…åŠ©å‡½æ•°ï¼ˆè´¦å·ä¿¡æ¯æ”¶é›†ç­‰ï¼‰
â”‚   â”œâ”€â”€ check/              # ç¯å¢ƒæ£€æŸ¥å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # Check å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â””â”€â”€ check.rs        # ç»¼åˆæ£€æŸ¥å‘½ä»¤ï¼ˆgit-_status, networkï¼‰
â”‚   â”œâ”€â”€ proxy/              # ä»£ç†ç®¡ç†å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # Proxy å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â””â”€â”€ proxy.rs        # ä»£ç†ç®¡ç†å‘½ä»¤ï¼ˆon, off, checkï¼‰
â”‚   â”œâ”€â”€ config/             # é…ç½®ç®¡ç†å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # Config å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ setup.rs        # åˆå§‹åŒ–è®¾ç½®å‘½ä»¤ï¼ˆäº¤äº’å¼é…ç½®ï¼‰
â”‚   â”‚   â”œâ”€â”€ show.rs         # é…ç½®æŸ¥çœ‹å‘½ä»¤ï¼ˆæ˜¾ç¤ºå½“å‰é…ç½®ï¼‰
â”‚   â”‚   â”œâ”€â”€ log.rs           # æ—¥å¿—çº§åˆ«ç®¡ç†å‘½ä»¤ï¼ˆset, checkï¼‰
â”‚   â”‚   â””â”€â”€ completion.rs   # Shell Completion ç®¡ç†å‘½ä»¤
â”‚   â”œâ”€â”€ repo/               # ä»“åº“é…ç½®ç®¡ç†å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ mod.rs          # Repo å‘½ä»¤æ¨¡å—å£°æ˜
â”‚   â”‚   â”œâ”€â”€ setup.rs        # ä»“åº“è®¾ç½®å‘½ä»¤ï¼ˆäº¤äº’å¼é…ç½®ï¼‰
â”‚   â”‚   â””â”€â”€ show.rs         # ä»“åº“é…ç½®æ˜¾ç¤ºå‘½ä»¤
â”‚   â””â”€â”€ lifecycle/          # ç”Ÿå‘½å‘¨æœŸç®¡ç†å‘½ä»¤
â”‚       â”œâ”€â”€ mod.rs          # Lifecycle å‘½ä»¤æ¨¡å—å£°æ˜
â”‚       â”œâ”€â”€ install.rs      # å®‰è£…å‘½ä»¤å®ç°ï¼ˆå®‰è£…äºŒè¿›åˆ¶å’Œè¡¥å…¨è„šæœ¬ï¼‰
â”‚       â”œâ”€â”€ uninstall.rs    # å¸è½½å‘½ä»¤å®ç°ï¼ˆæ¸…ç†æ‰€æœ‰ç›¸å…³æ–‡ä»¶ï¼‰
â”‚       â””â”€â”€ update.rs       # æ›´æ–°å‘½ä»¤å®ç°ï¼ˆé‡æ–°æ„å»ºã€æ›´æ–°äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰
â””â”€â”€ lib/                    # æ ¸å¿ƒåŠŸèƒ½åº“ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰
    â”œâ”€â”€ mod.rs              # åº“æ¨¡å—å£°æ˜
    â”œâ”€â”€ base/               # åŸºç¡€è®¾æ–½æ¨¡å—
    â”‚   â”œâ”€â”€ mod.rs          # Base æ¨¡å—å£°æ˜
    â”‚   â”œâ”€â”€ http/           # HTTP å®¢æˆ·ç«¯æ¨¡å—
    â”‚   â”‚   â”œâ”€â”€ mod.rs      # HTTP æ¨¡å—å£°æ˜
    â”‚   â”‚   â”œâ”€â”€ client.rs   # HTTP å®¢æˆ·ç«¯ï¼ˆå•ä¾‹æ¨¡å¼ï¼‰
    â”‚   â”‚   â”œâ”€â”€ config.rs   # è¯·æ±‚é…ç½®
    â”‚   â”‚   â”œâ”€â”€ response.rs # HTTP å“åº”ï¼ˆå»¶è¿Ÿè§£æï¼‰
    â”‚   â”‚   â”œâ”€â”€ auth.rs     # Basic Authentication
    â”‚   â”‚   â”œâ”€â”€ method.rs   # HTTP æ–¹æ³•æšä¸¾
    â”‚   â”‚   â”œâ”€â”€ parser.rs   # å“åº”è§£æå™¨
    â”‚   â”‚   â””â”€â”€ retry.rs   # HTTP é‡è¯•å·¥å…·
    â”‚   â”œâ”€â”€ llm/            # LLM é›†æˆï¼ˆAI åŠŸèƒ½ï¼‰
    â”‚   â”‚   â”œâ”€â”€ mod.rs      # LLM æ¨¡å—å£°æ˜
    â”‚   â”‚   â”œâ”€â”€ client.rs   # LLM ç»Ÿä¸€å®¢æˆ·ç«¯
    â”‚   â”‚   â””â”€â”€ types.rs    # LLM è¯·æ±‚å‚æ•°ç±»å‹
    â”‚   â”œâ”€â”€ settings/       # é…ç½®ç®¡ç†
    â”‚   â”‚   â”œâ”€â”€ mod.rs      # Settings æ¨¡å—å£°æ˜
    â”‚   â”‚   â”œâ”€â”€ settings.rs # Settings ç»“æ„ä½“å’Œé…ç½®åŠ è½½
    â”‚   â”‚   â”œâ”€â”€ paths.rs    # è·¯å¾„ç®¡ç†ï¼ˆé…ç½®æ–‡ä»¶ã€å®‰è£…è·¯å¾„ã€Shell è·¯å¾„ï¼‰
    â”‚   â”‚   â””â”€â”€ defaults.rs # é»˜è®¤å€¼è¾…åŠ©å‡½æ•°
    â”‚   â”œâ”€â”€ shell/          # Shell æ£€æµ‹ä¸ç®¡ç†
    â”‚   â”‚   â”œâ”€â”€ mod.rs      # Shell æ¨¡å—å£°æ˜
    â”‚   â”‚   â”œâ”€â”€ detect.rs  # Shell ç±»å‹æ£€æµ‹
    â”‚   â”‚   â”œâ”€â”€ reload.rs  # Shell é…ç½®é‡æ–°åŠ è½½
    â”‚   â”‚   â””â”€â”€ config.rs  # Shell é…ç½®æ–‡ä»¶ç®¡ç†
    â”‚   â””â”€â”€ util/           # å·¥å…·å‡½æ•°
    â”‚       â”œâ”€â”€ mod.rs      # Util æ¨¡å—å£°æ˜
    â”‚       â”œâ”€â”€ logger.rs  # æ—¥å¿—è¾“å‡ºç³»ç»Ÿ
    â”‚       â”œâ”€â”€ string.rs  # å­—ç¬¦ä¸²å¤„ç†å·¥å…·
    â”‚       â”œâ”€â”€ browser.rs # æµè§ˆå™¨æ“ä½œ
    â”‚       â”œâ”€â”€ clipboard.rs # å‰ªè´´æ¿æ“ä½œ
    â”‚       â”œâ”€â”€ unzip.rs   # æ–‡ä»¶è§£å‹å·¥å…·
    â”‚       â”œâ”€â”€ checksum.rs # æ ¡éªŒå’ŒéªŒè¯å·¥å…·
    â”‚       â””â”€â”€ confirm.rs # ç”¨æˆ·ç¡®è®¤å¯¹è¯æ¡†
    â”œâ”€â”€ git/                # Git æ“ä½œæ¨¡å—
    â”‚   â”œâ”€â”€ mod.rs          # Git æ¨¡å—å£°æ˜å’Œå¯¼å‡º
    â”‚   â”œâ”€â”€ branch.rs       # åˆ†æ”¯ç®¡ç†æ“ä½œ
    â”‚   â”œâ”€â”€ commit.rs       # æäº¤ç›¸å…³æ“ä½œ
    â”‚   â”œâ”€â”€ repo.rs         # ä»“åº“æ£€æµ‹å’Œç±»å‹è¯†åˆ«
    â”‚   â”œâ”€â”€ stash.rs        # æš‚å­˜ç®¡ç†
    â”‚   â”œâ”€â”€ config.rs       # Git é…ç½®ç®¡ç†
    â”‚   â”œâ”€â”€ pre-_commit.rs   # Pre-commit hooks æ”¯æŒ
    â”‚   â”œâ”€â”€ helpers.rs      # Git æ“ä½œè¾…åŠ©å‡½æ•°
    â”‚   â””â”€â”€ types.rs        # Git ç›¸å…³ç±»å‹å®šä¹‰
    â”œâ”€â”€ jira/               # Jira API é›†æˆ
    â”‚   â”œâ”€â”€ mod.rs          # Jira æ¨¡å—å£°æ˜
    â”‚   â”œâ”€â”€ api/            # API æ–¹æ³•å­æ¨¡å—
    â”‚   â”‚   â”œâ”€â”€ mod.rs      # API æ¨¡å—å£°æ˜
    â”‚   â”‚   â”œâ”€â”€ http-_client.rs  # JiraHttpClient (HTTP å±‚)
    â”‚   â”‚   â”œâ”€â”€ issue.rs    # Issue/Ticket ç›¸å…³ API
    â”‚   â”‚   â”œâ”€â”€ user.rs     # ç”¨æˆ·ç›¸å…³ API
    â”‚   â”‚   â””â”€â”€ project.rs  # é¡¹ç›®ç›¸å…³ API
    â”‚   â”œâ”€â”€ config.rs       # ConfigManager (TOML é…ç½®ç®¡ç†å™¨)
    â”‚   â”œâ”€â”€ client.rs       # JiraClient åŒ…è£…å™¨ï¼ˆå‘åå…¼å®¹ï¼‰
    â”‚   â”œâ”€â”€ helpers.rs      # Jira è¾…åŠ©å‡½æ•°ï¼ˆé¡¹ç›®æå–ç­‰ï¼‰
    â”‚   â”œâ”€â”€ types.rs        # æ•°æ®æ¨¡å‹å®šä¹‰
    â”‚   â”œâ”€â”€ users.rs        # ç”¨æˆ·ä¿¡æ¯ç®¡ç†
    â”‚   â”œâ”€â”€ ticket.rs       # Ticket/Issue æ“ä½œ
    â”‚   â”œâ”€â”€ status.rs       # çŠ¶æ€ç®¡ç†
    â”‚   â”œâ”€â”€ history.rs      # å·¥ä½œå†å²è®°å½•ç®¡ç†
    â”‚   â””â”€â”€ logs/           # æ—¥å¿—å¤„ç†æ¨¡å—
    â”‚       â”œâ”€â”€ mod.rs      # JiraLogs ç»“æ„ä½“å®šä¹‰
    â”‚       â”œâ”€â”€ constants.rs # å¸¸é‡å®šä¹‰
    â”‚       â”œâ”€â”€ helpers.rs  # æ—¥å¿—å¤„ç†è¾…åŠ©å‡½æ•°
    â”‚       â”œâ”€â”€ path.rs     # è·¯å¾„ç®¡ç†åŠŸèƒ½
    â”‚       â”œâ”€â”€ download.rs # ä¸‹è½½åŠŸèƒ½
    â”‚       â”œâ”€â”€ search.rs   # æœç´¢å’ŒæŸ¥æ‰¾åŠŸèƒ½
    â”‚       â”œâ”€â”€ zip.rs      # ZIP å¤„ç†åŠŸèƒ½
    â”‚       â””â”€â”€ clean.rs    # æ¸…ç†åŠŸèƒ½
    â”œâ”€â”€ pr/                 # PR ç›¸å…³åŠŸèƒ½
    â”‚   â”œâ”€â”€ mod.rs          # PR æ¨¡å—å£°æ˜
    â”‚   â”œâ”€â”€ platform.rs     # PlatformProvider trait å’Œå·¥å‚å‡½æ•°
    â”‚   â”œâ”€â”€ helpers.rs      # PR è¾…åŠ©å‡½æ•°
    â”‚   â”œâ”€â”€ llm.rs          # LLM åŠŸèƒ½ï¼ˆPR æ ‡é¢˜ç”Ÿæˆï¼‰
    â”‚   â”œâ”€â”€ body-_parser.rs  # PR Body è§£æå™¨ï¼ˆæå– Jira ticketã€æè¿°ã€å˜æ›´ç±»å‹ç­‰ï¼‰
    â”‚   â”œâ”€â”€ github/         # GitHub å¹³å°å®ç°
    â”‚   â”‚   â”œâ”€â”€ mod.rs      # GitHub æ¨¡å—å¯¼å‡º
    â”‚   â”‚   â”œâ”€â”€ platform.rs # GitHub å¹³å°å®ç°
    â”‚   â”‚   â”œâ”€â”€ requests.rs # GitHub API è¯·æ±‚ç»“æ„ä½“
    â”‚   â”‚   â”œâ”€â”€ responses.rs # GitHub API å“åº”ç»“æ„ä½“
    â”‚   â”‚   â””â”€â”€ errors.rs   # GitHub é”™è¯¯å¤„ç†
    â”‚   â””â”€â”€ codeup/         # Codeup å¹³å°å®ç°
    â”‚       â”œâ”€â”€ mod.rs      # Codeup æ¨¡å—å¯¼å‡º
    â”‚       â”œâ”€â”€ platform.rs # Codeup å¹³å°å®ç°
    â”‚       â”œâ”€â”€ requests.rs # Codeup API è¯·æ±‚ç»“æ„ä½“
    â”‚       â”œâ”€â”€ responses.rs # Codeup API å“åº”ç»“æ„ä½“
    â”‚       â””â”€â”€ errors.rs   # Codeup é”™è¯¯å¤„ç†
    â”œâ”€â”€ commit/             # Commit ä¸šåŠ¡é€»è¾‘
    â”‚   â”œâ”€â”€ mod.rs          # Commit æ¨¡å—å£°æ˜å’Œå¯¼å‡º
    â”‚   â”œâ”€â”€ amend.rs        # Commit Amend ä¸šåŠ¡é€»è¾‘ï¼ˆé¢„è§ˆã€æ ¼å¼åŒ–ç­‰ï¼‰
    â”‚   â”œâ”€â”€ reword.rs       # Commit Reword ä¸šåŠ¡é€»è¾‘ï¼ˆé¢„è§ˆã€æ ¼å¼åŒ–ã€å†å² rewordï¼‰
    â”‚   â””â”€â”€ squash.rs       # Commit Squash ä¸šåŠ¡é€»è¾‘ï¼ˆå‹ç¼©å¤šä¸ªæäº¤ï¼‰
    â”œâ”€â”€ completion/         # Shell Completion ç®¡ç†
    â”‚   â”œâ”€â”€ mod.rs          # Completion æ¨¡å—å£°æ˜
    â”‚   â”œâ”€â”€ completion.rs   # Completion ç®¡ç†å·¥å…·
    â”‚   â”œâ”€â”€ generate.rs     # Completion è„šæœ¬ç”Ÿæˆå™¨
    â”‚   â””â”€â”€ files.rs        # Completion æ–‡ä»¶å·¥å…·å‡½æ•°
    â”œâ”€â”€ proxy/              # ä»£ç†ç®¡ç†
    â”‚   â”œâ”€â”€ mod.rs          # Proxy æ¨¡å—å£°æ˜
    â”‚   â”œâ”€â”€ proxy.rs        # ç±»å‹å®šä¹‰ï¼ˆProxyType, ProxyInfo, ProxyConfigï¼‰
    â”‚   â”œâ”€â”€ system-_reader.rs # ç³»ç»Ÿä»£ç†è¯»å–å™¨
    â”‚   â”œâ”€â”€ config-_generator.rs # ä»£ç†é…ç½®ç”Ÿæˆå™¨
    â”‚   â””â”€â”€ manager.rs      # ä»£ç†ç®¡ç†å™¨
    â”œâ”€â”€ repo/               # ä»“åº“é…ç½®ç®¡ç†
    â”‚   â”œâ”€â”€ mod.rs          # Repo æ¨¡å—å£°æ˜
    â”‚   â””â”€â”€ config.rs       # ä»“åº“é…ç½®ç®¡ç†ï¼ˆé…ç½®æ£€æŸ¥ã€åŠ è½½ã€ä¿å­˜ï¼‰
    â”œâ”€â”€ template/           # æ¨¡æ¿ç³»ç»Ÿ
    â”‚   â”œâ”€â”€ mod.rs          # Template æ¨¡å—å£°æ˜
    â”‚   â”œâ”€â”€ config.rs       # æ¨¡æ¿é…ç½®ç®¡ç†ï¼ˆåŠ è½½å…¨å±€å’Œé¡¹ç›®çº§é…ç½®ï¼‰
    â”‚   â”œâ”€â”€ engine.rs       # æ¨¡æ¿å¼•æ“å°è£…ï¼ˆHandlebarsï¼‰
    â”‚   â””â”€â”€ vars.rs         # æ¨¡æ¿å˜é‡å®šä¹‰
    â””â”€â”€ rollback/           # å›æ»šç®¡ç†
        â”œâ”€â”€ mod.rs          # Rollback æ¨¡å—å£°æ˜
        â””â”€â”€ rollback.rs     # å›æ»šç®¡ç†å™¨ï¼ˆå¤‡ä»½ã€æ¢å¤ã€æ¸…ç†ï¼‰
```

---

## ğŸ›ï¸ æ¶æ„å±‚æ¬¡

### ä¸‰å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CLI å…¥å£å±‚                      â”‚
â”‚  - main.rs (workflow ä¸»å‘½ä»¤)            â”‚
â”‚  - bin/install.rs (ç‹¬ç«‹å®‰è£…å‘½ä»¤)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å‘½ä»¤å°è£…å±‚ (commands/)              â”‚
â”‚  - commands/log/  (æ—¥å¿—æ“ä½œ)              â”‚
â”‚  - commands/jira/ (Jira æ“ä½œ)             â”‚
â”‚  - commands/pr/  (PR æ“ä½œ)               â”‚
â”‚  - commands/branch/ (åˆ†æ”¯ç®¡ç†)           â”‚
â”‚  - commands/commit/ (Commit ç®¡ç†)        â”‚
â”‚  - commands/github/ (GitHub è´¦å·ç®¡ç†)   â”‚
â”‚  - commands/check/ (ç¯å¢ƒæ£€æŸ¥)            â”‚
â”‚  - commands/proxy/ (ä»£ç†ç®¡ç†)            â”‚
â”‚  - commands/config/ (é…ç½®ç®¡ç†)           â”‚
â”‚  - commands/repo/ (ä»“åº“é…ç½®ç®¡ç†)          â”‚
â”‚  - commands/lifecycle/ (ç”Ÿå‘½å‘¨æœŸç®¡ç†)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å±‚ (lib/)               â”‚
â”‚  - lib/base/     (åŸºç¡€è®¾æ–½ï¼šHTTPã€LLMã€Settingsã€Shellã€Util) â”‚
â”‚  - lib/pr/       (PR åŠŸèƒ½)               â”‚
â”‚  - lib/jira/     (Jira é›†æˆï¼ŒåŒ…å«æ—¥å¿—å¤„ç†) â”‚
â”‚  - lib/git/      (Git æ“ä½œ)              â”‚
â”‚  - lib/commit/   (Commit ä¸šåŠ¡é€»è¾‘)       â”‚
â”‚  - lib/completion/ (Completion ç®¡ç†)    â”‚
â”‚  - lib/proxy/    (ä»£ç†ç®¡ç†)              â”‚
â”‚  - lib/repo/     (ä»“åº“é…ç½®ç®¡ç†)          â”‚
â”‚  - lib/template/ (æ¨¡æ¿ç³»ç»Ÿ)              â”‚
â”‚  - lib/rollback/ (å›æ»šç®¡ç†)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—èŒè´£

- **CLI å…¥å£å±‚** (`main.rs` å’Œ `bin/`): `main.rs` æ˜¯ `workflow` ä¸»å‘½ä»¤çš„å…¥å£ï¼Œè´Ÿè´£å‘½ä»¤è¡Œå‚æ•°è§£æå’Œå‘½ä»¤åˆ†å‘ï¼›`bin/install.rs` æ˜¯ç‹¬ç«‹çš„å®‰è£…å‘½ä»¤å…¥å£
- **å‘½ä»¤å°è£…å±‚** (`commands/`): æä¾› CLI å‘½ä»¤å°è£…ï¼Œå¤„ç†ç”¨æˆ·äº¤äº’å’Œæ—¥å¿—è¾“å‡ºï¼Œæ‰€æœ‰å‘½ä»¤éƒ½é€šè¿‡ `workflow` ä¸»å‘½ä»¤è°ƒç”¨
- **æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å±‚** (`lib/`): åŒ…å«æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ï¼Œå¯è¢«å…¶ä»–æ¨¡å—å¤ç”¨

### æ•°æ®æµå‘

```
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/pr/*.rs â†’ lib/pr/*.rs â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/log/*.rs â†’ lib/jira/logs/*.rs â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/jira/*.rs â†’ lib/jira/*.rs â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/branch/*.rs â†’ lib/git/branch.rs â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/commit/*.rs â†’ lib/commit/*.rs â†’ lib/git/*.rs â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/github/*.rs â†’ lib/git/config.rs â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/check/*.rs â†’ lib/git/*.rs â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/proxy/*.rs â†’ lib/proxy/*.rs â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/config/*.rs â†’ lib/base/settings/*.rs â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/repo/*.rs â†’ lib/repo/*.rs â†’ .workflow/config.toml â†’ æ‰§è¡Œæ“ä½œ
ç”¨æˆ·è¾“å…¥ â†’ main.rs â†’ commands/lifecycle/*.rs â†’ lib/completion/*.rs â†’ æ‰§è¡Œæ“ä½œ
```

---

## ğŸ§  æ ¸å¿ƒæ¨¡å—è®¾è®¡

æ ¸å¿ƒæ¨¡å—ä½äº `lib/` ç›®å½•ä¸‹ï¼Œæä¾›æ‰€æœ‰ä¸šåŠ¡é€»è¾‘å®ç°ã€‚å„æ¨¡å—ç®€è¦è¯´æ˜å¦‚ä¸‹ï¼š

### åŸºç¡€è®¾æ–½æ¨¡å— (`lib::base`)

- **HTTP æ¨¡å—** (`lib::base::http`) - ç»Ÿä¸€ HTTP å®¢æˆ·ç«¯ï¼Œæ”¯æŒè®¤è¯ã€é‡è¯•ã€å»¶è¿Ÿè§£æç­‰ç‰¹æ€§
  - è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [http.md](./http.md)

- **LLM æ¨¡å—** (`lib::base::llm`) - ç»Ÿä¸€é…ç½®é©±åŠ¨çš„ LLM å®¢æˆ·ç«¯ï¼Œæ”¯æŒ OpenAIã€DeepSeek å’Œä»£ç† API
  - è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [llm.md](./llm.md)

- **Settings æ¨¡å—** (`lib::base::settings`) - é…ç½®ç®¡ç†ï¼Œæä¾›ç»Ÿä¸€çš„é…ç½®åŠ è½½å’Œè·¯å¾„ç®¡ç†ï¼Œæ”¯æŒ iCloud å­˜å‚¨ï¼ˆmacOSï¼‰
  - è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [settings.md](./settings.md)

- **Shell æ¨¡å—** (`lib::base::shell`) - Shell æ£€æµ‹ä¸ç®¡ç†ï¼Œæ”¯æŒé…ç½®è‡ªåŠ¨åŠ è½½
  - è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [shell.md](./shell.md)

- **å·¥å…·å‡½æ•°æ¨¡å—** (`lib::base::util`) - é€šç”¨å·¥å…·å‡½æ•°ï¼ˆæ—¥å¿—ã€å­—ç¬¦ä¸²ã€æµè§ˆå™¨ã€å‰ªè´´æ¿ç­‰ï¼‰
  - è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [tools.md](./tools.md)

### Git æ¨¡å— (`lib::git`)

æä¾› Git ä»“åº“æ“ä½œåŠŸèƒ½ï¼ŒåŒ…æ‹¬åˆ†æ”¯ç®¡ç†ã€æäº¤ã€æš‚å­˜ã€é…ç½®ç®¡ç†ç­‰ã€‚
- è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [git.md](./git.md)

### Commit æ¨¡å— (`lib::commit`)

æä¾› Commit ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘ï¼ŒåŒ…æ‹¬ amend å’Œ reword æ“ä½œçš„é¢„è§ˆä¿¡æ¯ç”Ÿæˆã€æ ¼å¼åŒ–æ˜¾ç¤ºã€å®Œæˆæç¤ºç”Ÿæˆä»¥åŠå†å² commit reword çš„æ‰§è¡Œé€»è¾‘ã€‚
- è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [commit.md](./commit.md)

### Jira æ¨¡å— (`lib::jira`)

æä¾› Jira API é›†æˆåŠŸèƒ½ï¼ŒåŒ…æ‹¬ Issue ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€çŠ¶æ€ç®¡ç†ã€å·¥ä½œå†å²è®°å½•å’Œæ—¥å¿—å¤„ç†ç­‰ã€‚
- è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [jira.md](./jira.md)

### PR æ¨¡å— (`lib::pr`)

æä¾›è·¨å¹³å° PR ç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒ GitHub å’Œ Codeupï¼ŒåŒ…æ‹¬åˆ›å»ºã€åˆå¹¶ã€å…³é—­ã€æ›´æ–°ç­‰æ“ä½œã€‚
- è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [pr.md](./pr.md)

### Completion æ¨¡å— (`lib::completion`)

æä¾› Shell è¡¥å…¨è„šæœ¬ç”Ÿæˆå’Œç®¡ç†åŠŸèƒ½ã€‚
- è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [completion.md](./completion.md)

### Proxy æ¨¡å— (`lib::proxy`)

æä¾›ä»£ç†ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç³»ç»Ÿä»£ç†è¯»å–ã€é…ç½®ç”Ÿæˆå’Œç®¡ç†ã€‚
- è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [proxy.md](./proxy.md)

### Repo æ¨¡å— (`lib::repo`)

æä¾›ä»“åº“çº§é…ç½®ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬é…ç½®æ£€æŸ¥ã€åŠ è½½ã€ä¿å­˜ç­‰ã€‚é…ç½®å­˜å‚¨åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `.workflow/config.toml` æ–‡ä»¶ä¸­ã€‚
- è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [repo.md](./repo.md)

### Template æ¨¡å— (`lib::template`)

æä¾›æ¨¡æ¿æ¸²æŸ“åŠŸèƒ½ï¼Œæ”¯æŒåˆ†æ”¯å‘½åæ¨¡æ¿ã€PR body æ¨¡æ¿ã€Commit æ¶ˆæ¯æ¨¡æ¿ç­‰ã€‚ä½¿ç”¨ Handlebars æ¨¡æ¿å¼•æ“ï¼Œæ”¯æŒä»å…¨å±€é…ç½®å’Œé¡¹ç›®çº§é…ç½®åŠ è½½æ¨¡æ¿ã€‚
- è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [template.md](./template.md)

### Rollback æ¨¡å— (`lib::rollback`)

æä¾›å›æ»šç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒå¤‡ä»½ã€æ¢å¤å’Œæ¸…ç†æ“ä½œã€‚
- è¯¦ç»†æ¶æ„è¯·å‚è€ƒ [rollback.md](./rollback.md)

---

## ğŸ’¾ æ•°æ®å­˜å‚¨

### é…ç½®æ–‡ä»¶ä½ç½®

é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨ä»¥ä¸‹ä½ç½®ï¼š

- `~/.workflow/config/workflow.toml` - ä¸»é…ç½®æ–‡ä»¶ï¼ˆJiraã€GitHubã€æ—¥å¿—ã€LLMã€Codeup é…ç½®ï¼‰
- `~/.workflow/config/llm.toml` - LLM é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼Œå¦‚æœé…ç½®äº† LLMï¼‰
- `~/.workflow/config/jira-status.toml` - Jira é¡¹ç›®çŠ¶æ€æ˜ å°„é…ç½®
- `~/.workflow/config/jira-users.toml` - Jira ç”¨æˆ·ç¼“å­˜é…ç½®
- `~/.workflow/work-history/` - PR å’Œ Jira ticket çš„å…³è”å†å²ï¼ˆæŒ‰ä»“åº“å­˜å‚¨ï¼‰

**æ³¨æ„**ï¼šåˆ†æ”¯é…ç½®å·²è¿ç§»åˆ°é¡¹ç›®çº§é…ç½®ï¼ˆ`.workflow/config.toml`ï¼‰ï¼Œä¸å†ä½¿ç”¨å…¨å±€é…ç½®æ–‡ä»¶ã€‚

### Jira Status é…ç½® (`jira-status.toml`)

å­˜å‚¨æ¯ä¸ª Jira é¡¹ç›®åœ¨åˆ›å»º PR å’Œåˆå¹¶ PR æ—¶çš„çŠ¶æ€æ˜ å°„å…³ç³»ã€‚

**æ ¼å¼**ï¼š
```toml
[WEW]
created-pr = "In Progress"
merged-pr = "Done"

[PROJ]
created-pr = "In Review"
merged-pr = "Done"
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- åˆ›å»º PR æ—¶è‡ªåŠ¨æ›´æ–° Jira ticket çŠ¶æ€ä¸º `created-pr` é…ç½®çš„çŠ¶æ€
- åˆå¹¶ PR æ—¶è‡ªåŠ¨æ›´æ–° Jira ticket çŠ¶æ€ä¸º `merged-pr` é…ç½®çš„çŠ¶æ€

### Branch é…ç½®ï¼ˆé¡¹ç›®çº§é…ç½®ï¼‰

åˆ†æ”¯é…ç½®å·²è¿ç§»åˆ°é¡¹ç›®çº§é…ç½®æ–‡ä»¶ï¼ˆ`.workflow/config.toml`ï¼‰ï¼Œæ¯ä¸ªé¡¹ç›®æœ‰ç‹¬ç«‹çš„é…ç½®ã€‚

**é…ç½®æ–‡ä»¶ä½ç½®**ï¼š`.workflow/config.toml`ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰

**æ ¼å¼**ï¼š
```toml
[branch]
prefix = "feature"
ignore = [
    "main",
    "master",
    "develop",
    "zw/important-feature",
]
```

**é…ç½®é¡¹è¯´æ˜**ï¼š
- `prefix` - åˆ†æ”¯å‰ç¼€ï¼ˆå¯é€‰ï¼‰ï¼Œç”¨äºç”Ÿæˆåˆ†æ”¯åæ—¶è‡ªåŠ¨æ·»åŠ å‰ç¼€ï¼ˆå¦‚ `feature/xxx`ã€`fix/xxx`ï¼‰
- `ignore` - å¿½ç•¥åˆ†æ”¯åˆ—è¡¨ï¼Œåˆ†æ”¯æ¸…ç†æ—¶ä¼šè‡ªåŠ¨æ’é™¤è¿™äº›åˆ†æ”¯

**ä½¿ç”¨åœºæ™¯**ï¼š
- `workflow branch clean` å‘½ä»¤ä¼šè‡ªåŠ¨æ’é™¤é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºçš„åˆ†æ”¯
- é€šè¿‡ `workflow branch ignore` å‘½ä»¤ç®¡ç†å¿½ç•¥åˆ—è¡¨ï¼ˆadd/remove/listï¼‰
- é€šè¿‡ `workflow repo setup` å‘½ä»¤è®¾ç½®åˆ†æ”¯å‰ç¼€
- åˆ›å»º PR æ—¶è‡ªåŠ¨ä½¿ç”¨é…ç½®çš„åˆ†æ”¯å‰ç¼€ç”Ÿæˆåˆ†æ”¯å
- é…ç½®å¯ä»¥æäº¤åˆ° Gitï¼Œå›¢é˜Ÿæˆå‘˜å…±äº«

**ç›¸å…³æ–‡ä»¶**ï¼š
- `src/lib/repo/config.rs` - é¡¹ç›®çº§é…ç½®ç®¡ç†ï¼ˆRepoConfigã€ProjectBranchConfigï¼‰
- `src/commands/branch/` - åˆ†æ”¯ç®¡ç†å‘½ä»¤å®ç°ï¼ˆcleanã€ignoreï¼‰
- `src/commands/repo/` - ä»“åº“é…ç½®ç®¡ç†å‘½ä»¤ï¼ˆsetupã€showï¼‰

### Work History (`~/.workflow/work-history/`)

å­˜å‚¨ PR ID åˆ° Jira ticket çš„æ˜ å°„å…³ç³»ï¼Œç”¨äºåœ¨åˆå¹¶ PR æ—¶è‡ªåŠ¨æŸ¥æ‰¾å¯¹åº”çš„ Jira ticketã€‚æŒ‰ä»“åº“åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„ JSON æ–‡ä»¶ä¸­ã€‚

**æ–‡ä»¶ä½ç½®**ï¼š
- `~/.workflow/work-history/{repo-_id}.json` - æ¯ä¸ªä»“åº“å¯¹åº”ä¸€ä¸ª JSON æ–‡ä»¶

**æ ¼å¼**ï¼š
```json
{
  "456": {
    "jira-_ticket": "PROJ-123",
    "pr-_url": "https://github.com/xxx/pull/456",
    "created-_at": "2024-01-15T10:30:00Z",
    "merged-_at": null,
    "repository": "github.com/xxx/yyy",
    "branch": "feature/PROJ-123-add-feature"
  }
}
```

**ä½¿ç”¨æµç¨‹**ï¼š
1. **å†™å…¥æ—¶æœº**ï¼šåˆ›å»º PR æ—¶è‡ªåŠ¨è®°å½•æ˜ å°„å…³ç³»
2. **è¯»å–æ—¶æœº**ï¼šåˆå¹¶ PR æ—¶æŸ¥æ‰¾å¯¹åº”çš„ Jira ticketï¼Œè‡ªåŠ¨æ›´æ–°çŠ¶æ€
3. **å®¹é”™æœºåˆ¶**ï¼šå¦‚æœå†å²è®°å½•ä¸­æ²¡æœ‰ï¼Œä¼šå°è¯•ä» PR æ ‡é¢˜ä¸­æå– Jira ticket ID

**ç›¸å…³æ–‡ä»¶**ï¼š
- `src/lib/jira/history.rs` - å·¥ä½œå†å²çš„è¯»å†™é€»è¾‘

---

## ğŸ“ å¼€å‘è§„èŒƒ

è¯¦ç»†çš„å¼€å‘è§„èŒƒè¯·å‚è€ƒ [å¼€å‘è§„èŒƒæ–‡æ¡£](../guidelines/development.md)ã€‚

è¯¥æ–‡æ¡£åŒ…å«ï¼š
- ä»£ç é£æ ¼è§„èŒƒï¼ˆæ ¼å¼åŒ–ã€Lintã€å‘½åçº¦å®šï¼‰
- é”™è¯¯å¤„ç†è§„èŒƒï¼ˆanyhowã€ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼‰
- æ–‡æ¡£è§„èŒƒï¼ˆå…¬å…± API æ–‡æ¡£ã€æ³¨é‡Šæ ¼å¼ï¼‰
- å‘½åè§„èŒƒï¼ˆæ–‡ä»¶ã€å‡½æ•°ã€ç»“æ„ä½“ã€å¸¸é‡ï¼‰
- æ¨¡å—ç»„ç»‡è§„èŒƒï¼ˆç›®å½•ç»“æ„ã€æ¨¡å—èŒè´£ï¼‰
- Git å·¥ä½œæµï¼ˆåˆ†æ”¯ç­–ç•¥ã€å·¥ä½œæµç¨‹ï¼‰
- æäº¤è§„èŒƒï¼ˆConventional Commitsï¼‰
- æµ‹è¯•è§„èŒƒï¼ˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼‰
- ä»£ç å®¡æŸ¥ï¼ˆå®¡æŸ¥æ¸…å•ã€å®¡æŸ¥é‡ç‚¹ï¼‰
- ä¾èµ–ç®¡ç†ï¼ˆæ·»åŠ ä¾èµ–ã€ç‰ˆæœ¬ç®¡ç†ï¼‰
- å¼€å‘å·¥å…·ï¼ˆå¿…éœ€å·¥å…·ã€å¸¸ç”¨å‘½ä»¤ï¼‰

---

**æœ€åæ›´æ–°**: 2025-12-16
