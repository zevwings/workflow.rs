# cargo-bloat ä½¿ç”¨æŒ‡å—

> æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨ `cargo-bloat` å·¥å…·åˆ†æ Rust äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ï¼Œå¸®åŠ©ä¼˜åŒ–é¡¹ç›®ä½“ç§¯ã€‚

---

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#-æ¦‚è¿°)
- [å®‰è£…](#-å®‰è£…)
- [åŸºæœ¬ä½¿ç”¨](#-åŸºæœ¬ä½¿ç”¨)
- [å¸¸ç”¨å‘½ä»¤](#-å¸¸ç”¨å‘½ä»¤)
- [è¾“å‡ºè§£è¯»](#-è¾“å‡ºè§£è¯»)
- [æœ€ä½³å®è·µ](#-æœ€ä½³å®è·µ)
- [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- [å‚è€ƒèµ„æº](#-å‚è€ƒèµ„æº)

---

## ğŸ“– æ¦‚è¿°

`cargo-bloat` æ˜¯ä¸€ä¸ªç”¨äºåˆ†æ Rust ç¼–è¯‘åäºŒè¿›åˆ¶æ–‡ä»¶å¤§å°çš„å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…ï¼š

- **è¯†åˆ«ä½“ç§¯å ç”¨**ï¼šæ‰¾å‡ºå“ªäº› crate æˆ–å‡½æ•°å ç”¨äº†æœ€å¤šçš„ç©ºé—´
- **ä¼˜åŒ–äºŒè¿›åˆ¶å¤§å°**ï¼šå®šä½å¯ä»¥ä¼˜åŒ–çš„ä¾èµ–å’Œä»£ç 
- **ä¾èµ–å®¡æŸ¥**ï¼šè¯„ä¼°å¼•å…¥æ–°ä¾èµ–çš„ä½“ç§¯æˆæœ¬
- **å‘å¸ƒå‰æ£€æŸ¥**ï¼šç¡®ä¿æœ€ç»ˆäºŒè¿›åˆ¶æ–‡ä»¶å¤§å°åœ¨åˆç†èŒƒå›´å†…

### é€‚ç”¨åœºæ™¯

- CLI å·¥å…·å¼€å‘ï¼ˆå¦‚æœ¬é¡¹ç›®ï¼‰
- åµŒå…¥å¼ç³»ç»Ÿå¼€å‘
- å®¹å™¨é•œåƒä¼˜åŒ–
- ç§»åŠ¨åº”ç”¨å¼€å‘
- ä»»ä½•éœ€è¦æ§åˆ¶äºŒè¿›åˆ¶å¤§å°çš„åœºæ™¯

---

## ğŸ”§ å®‰è£…

### æ–¹å¼ 1ï¼šä½¿ç”¨ cargo installï¼ˆæ¨èï¼‰

```bash
cargo install cargo-bloat
```

### æ–¹å¼ 2ï¼šä½¿ç”¨é¡¹ç›® Makefileï¼ˆæ¨èï¼‰

æœ¬é¡¹ç›®åœ¨ `Makefile` ä¸­æä¾›äº†ä¾¿æ·å‘½ä»¤ï¼š

```bash
# å®‰è£… cargo-bloat
make setup-bloat

# ä½¿ç”¨ cargo-bloat åˆ†æï¼ˆä¼šè‡ªåŠ¨æ£€æŸ¥æ˜¯å¦å®‰è£…ï¼‰
make bloat

# å¸¦å‚æ•°ä½¿ç”¨
make bloat ARGS="--crates --limit 10"
```

### éªŒè¯å®‰è£…

```bash
cargo bloat --version
```

### âš ï¸ ä¸ºä»€ä¹ˆä¸èƒ½ä½œä¸º dev-dependenciesï¼Ÿ

`cargo-bloat` **ä¸èƒ½**ä½œä¸º `dev-dependencies` æ·»åŠ åˆ° `Cargo.toml` ä¸­ï¼Œå› ä¸ºï¼š

1. **å®ƒæ˜¯äºŒè¿›åˆ¶å·¥å…·ï¼Œä¸æ˜¯åº“**ï¼š`cargo-bloat` æ˜¯ä¸€ä¸ª cargo å­å‘½ä»¤å·¥å…·ï¼Œæä¾›å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¸æä¾›åº“æ¥å£
2. **dev-dependencies ç”¨äºåº“ä¾èµ–**ï¼š`dev-dependencies` ç”¨äºæµ‹è¯•ã€ç¤ºä¾‹ã€åŸºå‡†æµ‹è¯•ç­‰éœ€è¦çš„**åº“**ï¼Œä¸é€‚ç”¨äºäºŒè¿›åˆ¶å·¥å…·
3. **å®‰è£…æ–¹å¼ä¸åŒ**ï¼šäºŒè¿›åˆ¶å·¥å…·éœ€è¦é€šè¿‡ `cargo install` å…¨å±€å®‰è£…ï¼Œè€Œä¸æ˜¯ä½œä¸ºé¡¹ç›®ä¾èµ–

**æ›¿ä»£æ–¹æ¡ˆ**ï¼š
- âœ… ä½¿ç”¨ `cargo install cargo-bloat` å…¨å±€å®‰è£…
- âœ… ä½¿ç”¨é¡¹ç›® `Makefile` ä¸­çš„ `make setup-bloat` å’Œ `make bloat` å‘½ä»¤
- âœ… åœ¨ CI/CD ä¸­å®‰è£…ï¼ˆè§ä¸‹æ–¹æœ€ä½³å®è·µï¼‰

---

## ğŸš€ åŸºæœ¬ä½¿ç”¨

### 1. åˆ†æå½“å‰é¡¹ç›®ï¼ˆDebug æ¨¡å¼ï¼‰

```bash
cargo bloat
```

è¿™ä¼šåˆ†æå½“å‰é¡¹ç›®çš„ Debug æ„å»ºï¼Œæ˜¾ç¤ºå„ crate çš„å¤§å°ä¿¡æ¯ã€‚

### 2. åˆ†æ Release æ„å»º

```bash
cargo bloat --release
```

**æ¨è**ï¼šé€šå¸¸ä½¿ç”¨ Release æ¨¡å¼è¿›è¡Œåˆ†æï¼Œå› ä¸ºè¿™æ˜¯æœ€ç»ˆå‘å¸ƒçš„ç‰ˆæœ¬ã€‚

### 3. æŒ‰ crate åˆ†æ

```bash
cargo bloat --release --crates
```

æ˜¾ç¤ºæ¯ä¸ª crate å ç”¨çš„ç©ºé—´å¤§å°ï¼ŒæŒ‰å¤§å°æ’åºã€‚

### 4. æŒ‰å‡½æ•°åˆ†æ

```bash
cargo bloat --release --functions
```

æ˜¾ç¤ºæ¯ä¸ªå‡½æ•°å ç”¨çš„ç©ºé—´å¤§å°ï¼Œå¸®åŠ©å®šä½ä½“ç§¯è¾ƒå¤§çš„å‡½æ•°ã€‚

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤

### åŸºæœ¬åˆ†æå‘½ä»¤

#### åˆ†ææ‰€æœ‰ crate

```bash
cargo bloat --release --crates
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
 File  .text     Size Crate
 0.0%   0.0%  1.2KiB [Unknown]
 0.0%   0.0%  1.2KiB std
 0.0%   0.0%  1.2KiB workflow
 0.0%   0.0%  1.2KiB serde
 0.0%   0.0%  1.2KiB tokio
 ...
```

#### åˆ†ææ‰€æœ‰å‡½æ•°

```bash
cargo bloat --release --functions
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
 File  .text     Size     Size Crate
 0.0%   0.0%  1.2KiB  1.2KiB workflow::main
 0.0%   0.0%  1.2KiB  1.2KiB workflow::commands::pr::execute
 ...
```

#### åˆ†æç‰¹å®š crate

```bash
cargo bloat --release --crates --filter serde
```

åªæ˜¾ç¤ºåŒ…å« "serde" çš„ crateã€‚

#### åˆ†æç‰¹å®šå‡½æ•°

```bash
cargo bloat --release --functions --filter main
```

åªæ˜¾ç¤ºåŒ…å« "main" çš„å‡½æ•°ã€‚

### é«˜çº§åˆ†æå‘½ä»¤

#### æ˜¾ç¤ºæ—¶é—´ä¿¡æ¯

```bash
cargo bloat --release --crates --time
```

æ˜¾ç¤ºç¼–è¯‘æ—¶é—´ä¿¡æ¯ï¼Œå¸®åŠ©è¯†åˆ«ç¼–è¯‘æ…¢çš„ä¾èµ–ã€‚

#### æ˜¾ç¤ºå®Œæ•´è·¯å¾„

```bash
cargo bloat --release --crates --full-fn
```

æ˜¾ç¤ºå®Œæ•´çš„å‡½æ•°è·¯å¾„ï¼Œè€Œä¸æ˜¯ç®€åŒ–çš„åç§°ã€‚

#### é™åˆ¶æ˜¾ç¤ºæ•°é‡

```bash
cargo bloat --release --crates --limit 10
```

åªæ˜¾ç¤ºå‰ 10 ä¸ªæœ€å¤§çš„ crateã€‚

#### æœ€å°å¤§å°è¿‡æ»¤

```bash
cargo bloat --release --crates --min-size 1000
```

åªæ˜¾ç¤ºå¤§å°è¶…è¿‡ 1000 å­—èŠ‚çš„ crateã€‚

#### æ ‘å½¢ç»“æ„æ˜¾ç¤º

```bash
cargo bloat --release --crates --tree
```

ä»¥æ ‘å½¢ç»“æ„æ˜¾ç¤º crate ä¾èµ–å…³ç³»ã€‚

### è¾“å‡ºæ ¼å¼é€‰é¡¹

#### JSON æ ¼å¼è¾“å‡º

```bash
cargo bloat --release --crates --json
```

è¾“å‡º JSON æ ¼å¼ï¼Œä¾¿äºç¨‹åºåŒ–å¤„ç†ã€‚

#### è¯¦ç»†è¾“å‡º

```bash
cargo bloat --release --crates --verbose
```

æ˜¾ç¤ºæ›´è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ã€‚

---

## ğŸ“Š è¾“å‡ºè§£è¯»

### è¾“å‡ºåˆ—è¯´æ˜

#### Crate åˆ†æè¾“å‡º

```
 File  .text     Size Crate
```

- **File**ï¼šå æ•´ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ç™¾åˆ†æ¯”
- **.text**ï¼šå  .text æ®µçš„ç™¾åˆ†æ¯”ï¼ˆä»£ç æ®µï¼‰
- **Size**ï¼šå®é™…å¤§å°ï¼ˆå­—èŠ‚ï¼‰
- **Crate**ï¼šcrate åç§°

#### å‡½æ•°åˆ†æè¾“å‡º

```
 File  .text     Size     Size Crate
```

- **File**ï¼šå æ•´ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ç™¾åˆ†æ¯”
- **.text**ï¼šå  .text æ®µçš„ç™¾åˆ†æ¯”
- **Size**ï¼šå‡½æ•°å¤§å°ï¼ˆå­—èŠ‚ï¼‰
- **Size**ï¼šç´¯è®¡å¤§å°ï¼ˆåŒ…å«å­å‡½æ•°ï¼‰
- **Crate**ï¼šå‡½æ•°æ‰€å±çš„ crate

### è¾“å‡ºç¤ºä¾‹è§£è¯»

#### Crate åˆ†æè¾“å‡ºç¤ºä¾‹

```bash
$ cargo bloat --release --crates --limit 5
 File  .text     Size Crate
 2.3%   2.3%  1.2MiB workflow
 1.8%   1.8%  950KiB tokio
 1.2%   1.2%  650KiB serde
 0.8%   0.8%  420KiB reqwest
 0.5%   0.5%  280KiB regex
```

**è§£è¯»**ï¼š
- `workflow` æ˜¯ä¸» crateï¼Œå ç”¨ 1.2MBï¼ˆ2.3%ï¼‰
- `tokio` å¼‚æ­¥è¿è¡Œæ—¶å ç”¨ 950KBï¼ˆ1.8%ï¼‰
- `serde` åºåˆ—åŒ–åº“å ç”¨ 650KBï¼ˆ1.2%ï¼‰
- `reqwest` HTTP å®¢æˆ·ç«¯å ç”¨ 420KBï¼ˆ0.8%ï¼‰
- `regex` æ­£åˆ™è¡¨è¾¾å¼åº“å ç”¨ 280KBï¼ˆ0.5%ï¼‰

#### å‡½æ•°åˆ†æè¾“å‡ºç¤ºä¾‹ï¼ˆåŒ…å«æ€»ç»“è¡Œï¼‰

```bash
$ cargo bloat --release --functions
 File  .text     Size     Size Crate
 0.5%   1.0%   50KiB   50KiB workflow::main
 0.3%   0.6%   30KiB   30KiB tokio::runtime::Runtime::new
 ...
48.7%  96.2%  6.7MiB                And 16633 smaller methods. Use -n N to show more.
50.7% 100.0%  7.0MiB                .text section size, the file size is 13.8MiB
```

**æ€»ç»“è¡Œè§£è¯»**ï¼š

1. **ç¬¬ä¸€è¡Œæ€»ç»“**ï¼š`48.7%  96.2%  6.7MiB                And 16633 smaller methods. Use -n N to show more.`
   - **48.7%**ï¼šå·²æ˜¾ç¤ºçš„å‡½æ•°å æ•´ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ 48.7%
   - **96.2%**ï¼šå·²æ˜¾ç¤ºçš„å‡½æ•°å  .text æ®µçš„ 96.2%
   - **6.7MiB**ï¼šå·²æ˜¾ç¤ºçš„å‡½æ•°æ€»å¤§å°ä¸º 6.7MB
   - **And 16633 smaller methods**ï¼šè¿˜æœ‰ 16633 ä¸ªæ›´å°çš„å‡½æ•°æœªæ˜¾ç¤º
   - **Use -n N to show more**ï¼šæç¤ºå¯ä»¥ä½¿ç”¨ `-n N` å‚æ•°æ˜¾ç¤ºæ›´å¤šå‡½æ•°

2. **ç¬¬äºŒè¡Œæ€»ç»“**ï¼š`50.7% 100.0%  7.0MiB                .text section size, the file size is 13.8MiB`
   - **50.7%**ï¼š.text æ®µå æ•´ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶çš„ 50.7%
   - **100.0%**ï¼š.text æ®µå è‡ªèº«çš„ 100%ï¼ˆè¿™æ˜¯ .text æ®µçš„æ€»ç»“è¡Œï¼‰
   - **7.0MiB**ï¼š.text æ®µçš„æ€»å¤§å°ä¸º 7.0MBï¼ˆä»£ç æ®µå¤§å°ï¼‰
   - **the file size is 13.8MiB**ï¼šæ•´ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ä¸º 13.8MB

**é‡è¦è¯´æ˜**ï¼š
- `.text` æ®µåŒ…å«æ‰€æœ‰å¯æ‰§è¡Œä»£ç 
- äºŒè¿›åˆ¶æ–‡ä»¶æ€»å¤§å°ï¼ˆ13.8MBï¼‰åŒ…å«ï¼š
  - `.text` æ®µï¼ˆä»£ç ï¼‰ï¼š7.0MBï¼ˆ50.7%ï¼‰
  - å…¶ä»–æ®µï¼ˆæ•°æ®ã€ç¬¦å·è¡¨ã€è°ƒè¯•ä¿¡æ¯ç­‰ï¼‰ï¼šçº¦ 6.8MBï¼ˆ49.3%ï¼‰
- å¦‚æœä½¿ç”¨ `strip` æˆ–å¯ç”¨ `strip = true`ï¼Œå¯ä»¥å‡å°äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ï¼ˆç§»é™¤ç¬¦å·è¡¨å’Œè°ƒè¯•ä¿¡æ¯ï¼‰

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å®šæœŸæ£€æŸ¥äºŒè¿›åˆ¶å¤§å°

åœ¨ä»¥ä¸‹æ—¶æœºè¿è¡Œ `cargo-bloat`ï¼š

- **æ·»åŠ æ–°ä¾èµ–å**ï¼šè¯„ä¼°æ–°ä¾èµ–çš„ä½“ç§¯æˆæœ¬
- **å‘å¸ƒå‰**ï¼šç¡®ä¿äºŒè¿›åˆ¶å¤§å°åœ¨é¢„æœŸèŒƒå›´å†…
- **æ€§èƒ½ä¼˜åŒ–æ—¶**ï¼šè¯†åˆ«å¯ä»¥ä¼˜åŒ–çš„ä¾èµ–
- **å®šæœŸå®¡æŸ¥**ï¼šä½œä¸ºä»£ç å®¡æŸ¥çš„ä¸€éƒ¨åˆ†

### 2. ä½¿ç”¨ Release æ¨¡å¼åˆ†æ

```bash
# âœ… æ¨èï¼šä½¿ç”¨ Release æ¨¡å¼
cargo bloat --release --crates

# âŒ ä¸æ¨èï¼šDebug æ¨¡å¼ä¸åæ˜ å®é™…å¤§å°
cargo bloat --crates
```

### 3. å…³æ³¨å¤§å‹ä¾èµ–

é‡ç‚¹å…³æ³¨å ç”¨ç©ºé—´å¤§çš„ä¾èµ–ï¼š

```bash
# æ‰¾å‡ºå ç”¨è¶…è¿‡ 100KB çš„ crate
cargo bloat --release --crates --min-size 100000
```

### 4. å¯¹æ¯”åˆ†æ

åœ¨æ·»åŠ æˆ–ç§»é™¤ä¾èµ–å‰åè¿›è¡Œå¯¹æ¯”ï¼š

```bash
# æ·»åŠ ä¾èµ–å‰
cargo bloat --release --crates > before.txt

# æ·»åŠ ä¾èµ–å
cargo bloat --release --crates > after.txt

# å¯¹æ¯”å·®å¼‚
diff before.txt after.txt
```

### 5. ä¼˜åŒ–ç­–ç•¥

æ ¹æ®åˆ†æç»“æœé‡‡å–ä¼˜åŒ–æªæ–½ï¼š

#### ç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–

```bash
# ä½¿ç”¨ cargo-udeps æ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–
cargo install cargo-udeps
cargo udeps
```

#### ä½¿ç”¨ feature flags

åœ¨ `Cargo.toml` ä¸­åªå¯ç”¨éœ€è¦çš„ featureï¼š

```toml
[dependencies]
serde = { version = "1.0", features = ["derive"] }  # åªå¯ç”¨éœ€è¦çš„ feature
tokio = { version = "1.0", features = ["rt", "net"] }  # é¿å…å¯ç”¨æ‰€æœ‰ feature
```

#### ä½¿ç”¨æ›¿ä»£ä¾èµ–

è€ƒè™‘ä½¿ç”¨æ›´è½»é‡çš„æ›¿ä»£æ–¹æ¡ˆï¼š

- `ureq` æ›¿ä»£ `reqwest`ï¼ˆåŒæ­¥ HTTPï¼‰
- `miniserde` æ›¿ä»£ `serde`ï¼ˆè½»é‡åºåˆ—åŒ–ï¼‰
- `smol` æ›¿ä»£ `tokio`ï¼ˆè½»é‡å¼‚æ­¥è¿è¡Œæ—¶ï¼‰

#### å¯ç”¨ LTOï¼ˆLink Time Optimizationï¼‰

åœ¨ `Cargo.toml` ä¸­å¯ç”¨ LTOï¼š

```toml
[profile.release]
lto = true
codegen-units = 1
```

#### ä½¿ç”¨ strip å‡å°‘ç¬¦å·

```bash
# ç¼–è¯‘å strip
strip target/release/workflow
```

æˆ–åœ¨ `Cargo.toml` ä¸­é…ç½®ï¼š

```toml
[profile.release]
strip = true
```

### 6. é›†æˆåˆ° CI/CD

åœ¨ CI æµç¨‹ä¸­æ£€æŸ¥äºŒè¿›åˆ¶å¤§å°ï¼š

```yaml
# .github/workflows/ci.yml
- name: Check binary size
  run: |
    cargo bloat --release --crates --limit 10
    # å¯ä»¥è®¾ç½®å¤§å°é˜ˆå€¼ï¼Œè¶…è¿‡åˆ™å¤±è´¥
```

### 7. æ–‡æ¡£åŒ–åŸºçº¿

åœ¨é¡¹ç›®æ–‡æ¡£ä¸­è®°å½•äºŒè¿›åˆ¶å¤§å°åŸºçº¿ï¼š

```markdown
## äºŒè¿›åˆ¶å¤§å°åŸºçº¿

- Release æ¨¡å¼ï¼š~5MB
- ä¸»è¦ä¾èµ–ï¼š
  - workflow: ~1.2MB
  - tokio: ~950KB
  - serde: ~650KB
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆ Debug å’Œ Release æ¨¡å¼çš„å¤§å°å·®å¼‚å¾ˆå¤§ï¼Ÿ

**A**: Debug æ¨¡å¼åŒ…å«è°ƒè¯•ä¿¡æ¯ã€æœªä¼˜åŒ–çš„ä»£ç å’Œç¬¦å·è¡¨ï¼Œè€Œ Release æ¨¡å¼ç»è¿‡ä¼˜åŒ–å¹¶å¯èƒ½ç§»é™¤äº†è°ƒè¯•ä¿¡æ¯ã€‚é€šå¸¸ Release æ¨¡å¼æ¯” Debug æ¨¡å¼å° 3-10 å€ã€‚

**å»ºè®®**ï¼šå§‹ç»ˆä½¿ç”¨ `--release` æ ‡å¿—åˆ†ææœ€ç»ˆå‘å¸ƒç‰ˆæœ¬ã€‚

### Q2: å¦‚ä½•æ‰¾å‡ºæŸä¸ªä¾èµ–ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤§ï¼Ÿ

**A**: ä½¿ç”¨å‡½æ•°çº§åˆ«åˆ†æï¼š

```bash
# åˆ†æç‰¹å®š crate çš„å‡½æ•°
cargo bloat --release --functions --filter serde
```

### Q3: äºŒè¿›åˆ¶å¤§å°çªç„¶å¢åŠ ï¼Œå¦‚ä½•å®šä½åŸå› ï¼Ÿ

**A**: ä½¿ç”¨å¯¹æ¯”åˆ†æï¼š

```bash
# 1. è®°å½•å½“å‰å¤§å°
cargo bloat --release --crates > current.txt

# 2. æ£€æŸ¥ git å†å²ï¼Œæ‰¾å‡ºæœ€è¿‘æ·»åŠ çš„ä¾èµ–
git log --oneline --all -- Cargo.toml

# 3. åˆ†ææ–°å¢ä¾èµ–çš„å¤§å°
cargo bloat --release --crates --filter <new-dependency>
```

### Q4: å¦‚ä½•å‡å°‘ tokio çš„å¤§å°ï¼Ÿ

**A**: åªå¯ç”¨éœ€è¦çš„ featureï¼š

```toml
[dependencies]
tokio = { version = "1.0", features = ["rt", "net", "fs"] }  # åªå¯ç”¨éœ€è¦çš„
# é¿å…ä½¿ç”¨ default features
tokio = { version = "1.0", default-features = false, features = ["rt"] }
```

### Q5: cargo-bloat åˆ†æå¾ˆæ…¢æ€ä¹ˆåŠï¼Ÿ

**A**:

1. ä½¿ç”¨ `--limit` é™åˆ¶è¾“å‡ºæ•°é‡
2. ä½¿ç”¨ `--min-size` è¿‡æ»¤å°ä¾èµ–
3. åªåœ¨éœ€è¦æ—¶è¿è¡Œï¼Œä¸è¦é¢‘ç¹æ‰§è¡Œ

### Q6: å¦‚ä½•åˆ†æç‰¹å®šäºŒè¿›åˆ¶æ–‡ä»¶ï¼Ÿ

**A**: å¦‚æœé¡¹ç›®æœ‰å¤šä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼š

```bash
# åˆ†æç‰¹å®šäºŒè¿›åˆ¶
cargo bloat --release --crates --bin workflow
```

### Q7: è¾“å‡ºä¸­çš„ [Unknown] æ˜¯ä»€ä¹ˆï¼Ÿ

**A**: `[Unknown]` è¡¨ç¤ºæ— æ³•ç¡®å®šæ¥æºçš„ä»£ç ï¼Œé€šå¸¸æ˜¯ï¼š
- å†…è”å‡½æ•°
- ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç 
- é“¾æ¥å™¨æ·»åŠ çš„ä»£ç 

è¿™é€šå¸¸æ˜¯æ­£å¸¸çš„ï¼Œå¯ä»¥å¿½ç•¥ã€‚

---

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹èµ„æº

- **GitHub ä»“åº“**ï¼šhttps://github.com/RazrFalcon/cargo-bloat
- **crates.io**ï¼šhttps://crates.io/crates/cargo-bloat

### ç›¸å…³å·¥å…·

- **cargo-udeps**ï¼šæ£€æŸ¥æœªä½¿ç”¨çš„ä¾èµ–
  ```bash
  cargo install cargo-udeps
  cargo udeps
  ```

- **cargo-tree**ï¼šæ˜¾ç¤ºä¾èµ–æ ‘
  ```bash
  cargo tree
  ```

- **cargo-audit**ï¼šå®‰å…¨å®¡è®¡
  ```bash
  cargo install cargo-audit
  cargo audit
  ```

### ä¼˜åŒ–èµ„æº

- **Rust äºŒè¿›åˆ¶å¤§å°ä¼˜åŒ–æŒ‡å—**ï¼šhttps://github.com/johnthagen/min-sized-rust
- **Cargo æ–‡æ¡£ - é…ç½®æ–‡ä»¶**ï¼šhttps://doc.rust-lang.org/cargo/reference/profiles.html

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å¼€å‘è§„èŒƒæŒ‡å—](./DEVELOPMENT_GUIDELINES.md)
- [æµ‹è¯•è§„èŒƒæŒ‡å—](./TESTING_GUIDELINES.md)
- [æäº¤å‰æ£€æŸ¥æŒ‡å—](./PRE_COMMIT_GUIDELINES.md)

---

**æœ€åæ›´æ–°**ï¼š2024-12-19
