# 文档更新时间维护指南

> 本指南说明如何维护项目文档的更新时间标记，确保所有文档都有统一格式的"最后更新"时间戳。

---

## 📋 目录

- [概述](#-概述)
- [目标](#-目标)
- [格式规范](#-格式规范)
- [维护流程](#-维护流程)
- [自动化工具](#-自动化工具)
- [适用范围](#-适用范围)
- [最佳实践](#-最佳实践)
- [故障排除](#-故障排除)
- [相关文档](#-相关文档)

---

## 📋 概述

本指南说明如何维护项目文档的更新时间标记，确保所有文档都有统一格式的"最后更新"时间戳。

## 🎯 目标

- **标准化格式**：所有文档使用统一的更新时间格式
- **提高透明度**：让用户和开发者了解文档的最新状态
- **便于维护**：建立自动化检查机制

## 📝 格式规范

### 标准格式

在所有文档末尾添加以下格式的更新时间标记：

```markdown
---

**最后更新**: YYYY-MM-DD
```

### 格式要求

1. **分隔线**：使用 `---` 作为分隔线
2. **标记格式**：使用 `**最后更新**: ` （注意英文冒号和空格）
3. **日期格式**：使用 `YYYY-MM-DD` 格式（ISO 8601 标准）
4. **位置**：放在文档的最末尾

### 正确示例

```markdown
## 结论

本文档介绍了...

---

**最后更新**: 2025-12-18
```

### 错误格式

❌ 使用中文冒号：
```markdown
**最后更新：** 2025-12-18
```

❌ 错误的日期格式：
```markdown
**最后更新**: 12/18/2025
**最后更新**: 2025年12月18日
```

❌ 缺少分隔线：
```markdown
**最后更新**: 2025-12-18
```

## 🔧 维护流程

### 1. 创建新文档时

在创建新文档时，必须在文档末尾添加更新时间标记：

```markdown
---

**最后更新**: YYYY-MM-DD
```

### 2. 修改现有文档时

当对文档进行实质性修改时，需要更新时间戳：

1. 修改文档内容
2. 更新末尾的时间戳为当前日期
3. 提交更改

### 3. 批量检查和更新

使用项目提供的检查脚本：

```bash
# 检查所有文档的更新时间格式
make check-docs

# 或直接运行脚本
./scripts/check-doc-timestamps.sh
```

## 🛠️ 自动化工具

### 检查脚本

项目提供了 `scripts/check-doc-timestamps.sh` 脚本来验证文档更新时间：

- **格式检查**：验证是否使用正确的格式
- **完整性检查**：检查重要文档是否包含更新时间
- **统计信息**：显示包含更新时间的文档数量

### Make 目标

可以使用 `make check-docs` 命令快速检查：

```bash
make check-docs
```

### 检查结果示例

```
=== 文档更新时间标准化检查 ===
1. 检查格式一致性（中文冒号，应该为0）：
   发现中文冒号格式: 0
2. 统计更新时间标记数量：
   包含更新时间的文档: 70
3. 验证日期格式 (YYYY-MM-DD)：
   正确格式的文档: 70
4. 检查重要文档的更新时间：
   ✅ README.md - 有更新时间
   ✅ CHANGELOG.md - 有更新时间
   ✅ docs/README.md - 有更新时间

✅ 格式检查通过 - 所有文档使用统一的英文冒号格式
📊 总结: 70 个文档包含更新时间标记
```

## 📂 适用范围

### 需要更新时间的文档

- **README.md** - 项目主文档
- **CHANGELOG.md** - 变更日志
- **docs/** 目录下的所有参考文档：
  - 架构文档 (`docs/architecture/`)
  - 指南文档 (`docs/guidelines/`)
  - 迁移文档 (`docs/migration/`)
  - 待办文档 (`docs/requirements/`)

### 不需要更新时间的文档

- **临时文档**：
  - `report/` 目录下的分析报告
  - `requirements/` 目录下的需求分析
- **模板文件**：
  - `docs/architecture/templates/` 目录下的模板

## 🎯 最佳实践

### 1. 及时更新

- 每次修改文档后立即更新时间戳
- 不要等到提交时才更新

### 2. 实质性修改

只有在进行实质性修改时才更新时间戳：
- ✅ 添加新内容
- ✅ 修改现有内容
- ✅ 修复错误
- ❌ 仅修复拼写错误
- ❌ 格式调整

### 3. 批量更新

在进行项目级别的文档标准化时：
- 使用统一的日期
- 运行检查脚本验证
- 在提交信息中说明批量更新的原因

### 4. CI/CD 集成

考虑在 CI/CD 流程中添加文档检查：
- 在 PR 检查中运行 `make check-docs`
- 确保新增文档包含更新时间
- 验证格式的一致性

## 🔍 故障排除

### 常见问题

1. **格式不一致**
   - 检查是否使用了中文冒号 `：`
   - 确保使用英文冒号 `:` 和空格

2. **日期格式错误**
   - 使用 `YYYY-MM-DD` 格式
   - 避免使用其他日期格式

3. **缺少分隔线**
   - 在更新时间前添加 `---` 分隔线

### 修复命令

```bash
# 查找使用中文冒号的文档
grep -r "最后更新：" docs/

# 查找缺少更新时间的重要文档
find docs -name "*.md" -exec grep -L "最后更新" {} \;
```

## 📚 相关文档

- [文档编写指南](./document.md) - 完整的文档编写规范
- [开发规范](./development.md) - 项目开发规范
- [提交前检查指南](./workflows/pre-commit.md) - 提交前的检查清单

---

**最后更新**: 2025-12-23
