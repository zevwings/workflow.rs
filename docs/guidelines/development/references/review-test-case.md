# æµ‹è¯•ç”¨ä¾‹å®¡æŸ¥æŒ‡å—

> æœ¬æ–‡æ¡£ä¸“ä¸º AI åŠ©æ‰‹è®¾è®¡ï¼Œæä¾›æµ‹è¯•ç”¨ä¾‹æ£€æŸ¥çš„æ ¸å¿ƒåŸåˆ™å’Œå®ç”¨æŒ‡å¯¼ï¼Œå¸®åŠ© AI é«˜æ•ˆåœ°è¿›è¡Œæµ‹è¯•è¦†ç›–åˆ†æå’Œæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆã€‚

## ğŸ“‹ ç›®å½•

- [æ ¸å¿ƒåŸåˆ™](#-æ ¸å¿ƒåŸåˆ™)
- [æ£€æŸ¥ç›®æ ‡](#-æ£€æŸ¥ç›®æ ‡)
- [æµ‹è¯•è¾¹ç•Œå’ŒèŒƒå›´](#-æµ‹è¯•è¾¹ç•Œå’ŒèŒƒå›´)
- [æ£€æŸ¥æµç¨‹](#-æ£€æŸ¥æµç¨‹)
- [é¡¹ç›®æµ‹è¯•ç°çŠ¶](#-é¡¹ç›®æµ‹è¯•ç°çŠ¶)
- [æµ‹è¯•ç¤ºä¾‹](#-æµ‹è¯•ç¤ºä¾‹)
- [å¿«é€Ÿæ£€æŸ¥è„šæœ¬](#-å¿«é€Ÿæ£€æŸ¥è„šæœ¬)
- [æ£€æŸ¥æŠ¥å‘Šæ¨¡æ¿](#-æ£€æŸ¥æŠ¥å‘Šæ¨¡æ¿)

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

**æµ‹è¯•è¾¹ç•Œ**ï¼šæµ‹è¯•æˆ‘ä»¬è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸æµ‹è¯•å¤–éƒ¨ä¾èµ–å’Œç¬¬ä¸‰æ–¹åº“ã€‚

**æ£€æŸ¥é‡ç‚¹**ï¼š
- âœ… ä¸šåŠ¡é€»è¾‘ã€æ•°æ®è½¬æ¢ã€çŠ¶æ€ç®¡ç†ã€é”™è¯¯å¤„ç†
- âœ… CLI å‚æ•°è§£æã€ç”¨æˆ·äº¤äº’ã€è¾“å‡ºæ ¼å¼åŒ–
- âœ… API å°è£…ã€é‡è¯•æœºåˆ¶ã€å“åº”å¤„ç†
- âŒ å¤–éƒ¨å·¥å…·åŠŸèƒ½ã€ç¬¬ä¸‰æ–¹åº“å®ç°ã€è¿œç¨‹ API ä¸šåŠ¡é€»è¾‘

---

## ğŸ¯ æ£€æŸ¥ç›®æ ‡

æµ‹è¯•ç”¨ä¾‹æ£€æŸ¥çš„ä¸»è¦ç›®æ ‡ï¼š

1. **ç¡®ä¿æµ‹è¯•è¦†ç›–å®Œæ•´**ï¼šæ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€CLI å‘½ä»¤ã€é”™è¯¯å¤„ç†éƒ½æœ‰å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹
2. **ç¡®ä¿æµ‹è¯•è¾¹ç•Œæ­£ç¡®**ï¼šæµ‹è¯•æˆ‘ä»¬è‡ªå·±çš„ä»£ç ï¼Œä¸æµ‹è¯•å¤–éƒ¨ä¾èµ–å’Œç¬¬ä¸‰æ–¹åº“
3. **ç¡®ä¿æµ‹è¯•è´¨é‡**ï¼šæµ‹è¯•ç”¨ä¾‹åˆç†ã€æœ‰æ•ˆï¼Œä½¿ç”¨åˆé€‚çš„æµ‹è¯•å·¥å…·å’Œæ–¹æ³•
4. **è¯†åˆ«ç¼ºå¤±æµ‹è¯•**ï¼šå‘ç°æœªæµ‹è¯•çš„åŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ
5. **ä¼˜åŒ–æµ‹è¯•ç»“æ„**ï¼šç¡®ä¿æµ‹è¯•ç»„ç»‡æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤

### æ£€æŸ¥èŒƒå›´

- **å•å…ƒæµ‹è¯•**ï¼š`#[cfg(test)]` æ¨¡å—ä¸­çš„æµ‹è¯•
- **é›†æˆæµ‹è¯•**ï¼š`tests/` ç›®å½•ä¸­çš„æµ‹è¯•æ–‡ä»¶
- **æ–‡æ¡£æµ‹è¯•**ï¼šæ–‡æ¡£ä¸­çš„ä»£ç ç¤ºä¾‹ï¼ˆdoctestï¼‰
- **æµ‹è¯•å·¥å…·ä½¿ç”¨**ï¼šæ˜¯å¦ä½¿ç”¨æ¨èçš„æµ‹è¯•å·¥å…·ï¼ˆrstestã€pretty_assertionsã€mockitoã€insta ç­‰ï¼‰

### æ£€æŸ¥åŸåˆ™

1. **æµ‹è¯•è¾¹ç•ŒåŸåˆ™**ï¼šæµ‹è¯•æˆ‘ä»¬è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸æµ‹è¯•å¤–éƒ¨ä¾èµ–å’Œç¬¬ä¸‰æ–¹åº“
2. **å…¨é¢æ€§åŸåˆ™**ï¼šæ£€æŸ¥æ‰€æœ‰æ¨¡å—çš„æµ‹è¯•è¦†ç›–æƒ…å†µ
3. **è´¨é‡åŸåˆ™**ï¼šç¡®ä¿æµ‹è¯•ç”¨ä¾‹åˆç†ã€æœ‰æ•ˆï¼Œä½¿ç”¨åˆé€‚çš„æµ‹è¯•å·¥å…·
4. **å¯æ“ä½œæ€§åŸåˆ™**ï¼šæ£€æŸ¥ç»“æœåº”æä¾›æ˜ç¡®çš„æ”¹è¿›å»ºè®®

---

## ğŸ¯ æµ‹è¯•è¾¹ç•Œå’ŒèŒƒå›´

> **æ ¸å¿ƒåŸåˆ™**ï¼šæˆ‘ä»¬åº”è¯¥æµ‹è¯•è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯æµ‹è¯•å¤–éƒ¨ä¾èµ–å’Œç¬¬ä¸‰æ–¹åº“çš„å®ç°ã€‚

### âœ… éœ€è¦æµ‹è¯•çš„å†…å®¹

#### 1. ä¸šåŠ¡é€»è¾‘å±‚

æµ‹è¯•æˆ‘ä»¬è‡ªå·±å®ç°çš„ä¸šåŠ¡è§„åˆ™å’Œå¤„ç†é€»è¾‘ï¼š

- âœ… **ä¸šåŠ¡è§„åˆ™å®ç°**
  - åˆ†æ”¯å‰ç¼€å¤„ç†ï¼ˆå¦‚ `feature/` + åˆ†æ”¯åï¼‰
  - åˆå¹¶ç­–ç•¥é€‰æ‹©ï¼ˆå¦‚æ ¹æ®é…ç½®é€‰æ‹© `--no-ff` æˆ– `--ff-only`ï¼‰
  - æ•°æ®éªŒè¯è§„åˆ™ï¼ˆå¦‚åˆ†æ”¯åç§°éªŒè¯ã€é…ç½®éªŒè¯ï¼‰
  - ä¸šåŠ¡æµç¨‹æ§åˆ¶ï¼ˆå¦‚ PR åˆ›å»ºæµç¨‹ã€æ—¥å¿—å·¥ä½œæµï¼‰

- âœ… **æ•°æ®è½¬æ¢å’Œå¤„ç†**
  - JSON/TOML æ•°æ®è§£æåçš„è½¬æ¢
  - æ•°æ®æ ¼å¼åŒ–ï¼ˆå¦‚æ—¥æœŸæ ¼å¼ã€æ ‡é¢˜ç”Ÿæˆï¼‰
  - æ•°æ®èšåˆå’Œè®¡ç®—ï¼ˆå¦‚ç»Ÿè®¡ã€æ±‡æ€»ï¼‰

- âœ… **çŠ¶æ€ç®¡ç†**
  - çŠ¶æ€è½¬æ¢é€»è¾‘ï¼ˆå¦‚ Git ä»“åº“çŠ¶æ€ã€å·¥ä½œæ ‘çŠ¶æ€ï¼‰
  - çŠ¶æ€è§£æï¼ˆå¦‚ `WorktreeStatus` ç»“æ„ä½“çš„æ­£ç¡®æ€§ï¼‰
  - çŠ¶æ€éªŒè¯ï¼ˆå¦‚æ£€æŸ¥æ˜¯å¦æœ‰æœªæäº¤çš„æ›´æ”¹ï¼‰

- âœ… **æ•°æ®ç»“æ„çš„æ­£ç¡®æ€§**
  - è‡ªå®šä¹‰æ•°æ®ç»“æ„ï¼ˆå¦‚ `CommitInfo`ã€`WorktreeStatus`ã€`BranchInfo`ï¼‰
  - æ•°æ®ç»“æ„çš„åºåˆ—åŒ–/ååºåˆ—åŒ–
  - æ•°æ®ç»“æ„çš„é»˜è®¤å€¼å’ŒéªŒè¯

#### 2. CLI å‘½ä»¤å±‚æµ‹è¯•

æµ‹è¯•å‘½ä»¤è¡Œæ¥å£çš„æ­£ç¡®æ€§å’Œç”¨æˆ·ä½“éªŒï¼š

- âœ… **å‘½ä»¤å‚æ•°è§£æ**
  - å‚æ•°éªŒè¯é€»è¾‘ï¼ˆå¿…éœ€å‚æ•°ã€å¯é€‰å‚æ•°ã€é»˜è®¤å€¼ï¼‰
  - å‚æ•°ç±»å‹è½¬æ¢å’Œæ ¼å¼éªŒè¯ï¼ˆå¦‚ Jira ID æ ¼å¼ã€PR æ ‡é¢˜é•¿åº¦ï¼‰
  - å‚æ•°ç»„åˆçš„æœ‰æ•ˆæ€§æ£€æŸ¥ï¼ˆäº’æ–¥å‚æ•°ã€ä¾èµ–å‚æ•°ï¼‰
  - é”™è¯¯å‚æ•°çš„å¤„ç†å’Œå‹å¥½æç¤º

- âœ… **å‘½ä»¤æ‰§è¡Œæµç¨‹**
  - å‘½ä»¤çš„ä¸»è¦æ‰§è¡Œè·¯å¾„å’Œä¸šåŠ¡é€»è¾‘
  - å‰ç½®æ¡ä»¶æ£€æŸ¥ï¼ˆGit ä»“åº“ã€é…ç½®æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ï¼‰
  - å‘½ä»¤é—´çš„ä¾èµ–å…³ç³»å¤„ç†å’Œæ‰§è¡Œé¡ºåº
  - å‘½ä»¤æ‰§è¡Œçš„çŠ¶æ€ç®¡ç†å’Œé”™è¯¯æ¢å¤

- âœ… **ç”¨æˆ·äº¤äº’æµ‹è¯•**
  - Dialog ç»„ä»¶çš„é…ç½®å’ŒéªŒè¯é€»è¾‘
  - ç”¨æˆ·è¾“å…¥çš„å¤„ç†å’ŒéªŒè¯ï¼ˆè¾“å…¥æ¡†ã€é€‰æ‹©æ¡†ã€å¤šé€‰æ¡†ï¼‰
  - äº¤äº’æµç¨‹çš„æ­£ç¡®æ€§ï¼ˆç¡®è®¤ã€å–æ¶ˆã€é‡è¯•ï¼‰
  - ç”¨æˆ·ä½“éªŒçš„ä¸€è‡´æ€§ï¼ˆæç¤ºä¿¡æ¯ã€é”™è¯¯å¤„ç†ï¼‰

- âœ… **è¾“å‡ºæ ¼å¼åŒ–**
  - å¤šç§è¾“å‡ºæ ¼å¼çš„æ­£ç¡®æ€§ï¼ˆTableã€JSONã€YAMLã€Markdownï¼‰
  - è¾“å‡ºå†…å®¹çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§
  - é”™è¯¯æ¶ˆæ¯å’Œè­¦å‘Šä¿¡æ¯çš„æ ¼å¼åŒ–
  - å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æ”¯æŒ

**CLI æµ‹è¯•ç¤ºä¾‹**ï¼š
```rust
// âœ… æµ‹è¯•å‘½ä»¤å‚æ•°è§£æï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_pr-_create-_args-_validation() {
    let args = PrCreateArgs {
        jira-_ticket: Some("PROJ-123".to-_string()),
        title: Some("Test PR".to-_string()),
        description: None,
        dry-_run: false,
    };

    // æµ‹è¯•æˆ‘ä»¬çš„å‚æ•°éªŒè¯é€»è¾‘
    let result = validate-_pr-_create-_args(&args);
    assert!(result.is-_ok());

    // æµ‹è¯•æ— æ•ˆçš„ Jira ID
    let invalid-_args = PrCreateArgs {
        jira-_ticket: Some("invalid-id".to-_string()),
        ..args
    };
    let result = validate-_pr-_create-_args(&invalid-_args);
    assert!(result.is-_err());
    assert!(result.unwrap-_err().to-_string().contains("Jira ID æ ¼å¼æ— æ•ˆ"));
}

// âœ… æµ‹è¯•ç”¨æˆ·äº¤äº’é€»è¾‘ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_branch-_selection-_dialog-_config() {
    let branches = vec!["main", "develop", "feature/test"];
    let dialog = create-_branch-_selection-_dialog(&branches);

    // æµ‹è¯•æˆ‘ä»¬çš„ Dialog é…ç½®é€»è¾‘
    assert-_eq!(dialog.prompt(), "é€‰æ‹©ç›®æ ‡åˆ†æ”¯:");
    assert-_eq!(dialog.options().len(), 3);
    assert-_eq!(dialog.default-_index(), Some(0));
    assert!(dialog.enable-_filter()); // å¯ç”¨æ¨¡ç³ŠåŒ¹é…
}

// âœ… æµ‹è¯•è¾“å‡ºæ ¼å¼åŒ–ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_pr-_list-_output-_formats() {
    let prs = create-_mock-_pr-_list();

    // æµ‹è¯•è¡¨æ ¼æ ¼å¼
    let table-_output = format-_pr-_list-_as-_table(&prs);
    assert!(table-_output.contains("ID"));
    assert!(table-_output.contains("Title"));
    assert!(table-_output.contains("Status"));

    // æµ‹è¯• JSON æ ¼å¼
    let json-_output = format-_pr-_list-_as-_json(&prs);
    let parsed: serde-_json::Value = serde-_json::from-_str(&json-_output).unwrap();
    assert!(parsed.is-_array());
    assert-_eq!(parsed.as-_array().unwrap().len(), prs.len());
}

// âœ… æµ‹è¯•å‘½ä»¤æ‰§è¡Œå‰ç½®æ¡ä»¶ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_pr-_create-_preconditions() {
    // æµ‹è¯• Git ä»“åº“æ£€æŸ¥
    let temp-_dir = tempfile::tempdir().unwrap();
    std::env::set-_current-_dir(&temp-_dir).unwrap();

    let result = PrCreateCommand::validate-_git-_repo();
    assert!(result.is-_err());
    assert!(result.unwrap-_err().to-_string().contains("ä¸æ˜¯ Git ä»“åº“"));

    // æµ‹è¯•é…ç½®æ–‡ä»¶æ£€æŸ¥
    let result = PrCreateCommand::validate-_github-_config();
    assert!(result.is-_err());
    assert!(result.unwrap-_err().to-_string().contains("GitHub é…ç½®"));
}
```

#### 3. é”™è¯¯å¤„ç†é€»è¾‘

æµ‹è¯•æˆ‘ä»¬å¦‚ä½•å¤„ç†é”™è¯¯ï¼Œè€Œä¸æ˜¯æµ‹è¯•é”™è¯¯æ˜¯å¦ä¼šå‘ç”Ÿï¼š

- âœ… **å¼‚å¸¸æƒ…å†µå¤„ç†**
  - æ£€æŸ¥é”™è¯¯æƒ…å†µæ˜¯å¦è¢«æ­£ç¡®æ•è·
  - æ£€æŸ¥é”™è¯¯æ¢å¤æœºåˆ¶æ˜¯å¦æ­£ç¡®
  - æ£€æŸ¥å¤±è´¥åçš„æ¸…ç†é€»è¾‘

- âœ… **é”™è¯¯æ¶ˆæ¯å’Œä¸Šä¸‹æ–‡**
  - æ£€æŸ¥é”™è¯¯æ¶ˆæ¯æ˜¯å¦æ¸…æ™°å‡†ç¡®
  - æ£€æŸ¥é”™è¯¯ä¸Šä¸‹æ–‡æ˜¯å¦å®Œæ•´ï¼ˆä½¿ç”¨ `anyhow::Context`ï¼‰
  - æ£€æŸ¥é”™è¯¯ç±»å‹æ˜¯å¦æ­£ç¡®ä¼ é€’

- âœ… **é”™è¯¯ä¼ æ’­**
  - æ£€æŸ¥é”™è¯¯æ˜¯å¦æ­£ç¡®å‘ä¸Šä¼ æ’­
  - æ£€æŸ¥é”™è¯¯è½¬æ¢æ˜¯å¦æ­£ç¡®ï¼ˆå¦‚å°†åº•å±‚é”™è¯¯è½¬æ¢ä¸ºä¸šåŠ¡é”™è¯¯ï¼‰

#### 3. è¾¹ç•Œæ¡ä»¶

æµ‹è¯•å„ç§è¾¹ç•Œæƒ…å†µå’Œç‰¹æ®Šè¾“å…¥ï¼š

- âœ… **è¾“å…¥è¾¹ç•Œ**
  - ç©ºè¾“å…¥ï¼ˆç©ºå­—ç¬¦ä¸²ã€ç©ºæ•°ç»„ã€ç©ºé…ç½®ï¼‰
  - æœ€å¤§/æœ€å°å€¼ï¼ˆé•¿åº¦é™åˆ¶ã€æ•°å€¼èŒƒå›´ï¼‰
  - ç‰¹æ®Šå­—ç¬¦ï¼ˆUnicodeã€æ¢è¡Œç¬¦ã€ç‰¹æ®Šç¬¦å·ï¼‰
  - æ— æ•ˆè¾“å…¥ï¼ˆæ ¼å¼é”™è¯¯ã€ç±»å‹é”™è¯¯ï¼‰

- âœ… **è¾“å‡ºè¾¹ç•Œ**
  - ç©ºç»“æœå¤„ç†
  - è¶…å¤§ç»“æœå¤„ç†
  - æ ¼å¼åŒ–è¾“å‡ºçš„æ­£ç¡®æ€§

- âœ… **å¹¶å‘å’Œå¼‚æ­¥åœºæ™¯**
  - å¼‚æ­¥å‡½æ•°çš„æ­£ç¡®æ€§æµ‹è¯•ï¼ˆä½¿ç”¨ `#[tokio::test]`ï¼‰
  - å¹¶å‘æ‰§è¡Œçš„å®‰å…¨æ€§æµ‹è¯•ï¼ˆæ•°æ®ç«äº‰ã€æ­»é”æ£€æµ‹ï¼‰
  - å¹¶å‘é™åˆ¶å’Œèµ„æºç®¡ç†ï¼ˆå¦‚å¹¶å‘æ‰§è¡Œå™¨çš„é™åˆ¶ï¼‰
  - è¶…æ—¶å’Œå–æ¶ˆæœºåˆ¶æµ‹è¯•ï¼ˆä»»åŠ¡è¶…æ—¶ã€ç”¨æˆ·å–æ¶ˆï¼‰
  - å¼‚æ­¥é”™è¯¯å¤„ç†å’Œä¼ æ’­
  - å¹¶å‘åœºæ™¯ä¸‹çš„çŠ¶æ€ä¸€è‡´æ€§

#### 4. é›†æˆé€»è¾‘

æµ‹è¯•æˆ‘ä»¬å¦‚ä½•å°è£…å’Œä½¿ç”¨å¤–éƒ¨ä¾èµ–ï¼š

- âœ… **API è°ƒç”¨å°è£…**
  - å‚æ•°æ„é€ å’Œä¼ é€’
  - è¯·æ±‚é…ç½®ï¼ˆheadersã€authã€timeoutï¼‰
  - å“åº”å¤„ç†å’Œæ•°æ®æå–

- âœ… **æ•°æ®è§£æå’Œè½¬æ¢**
  - API å“åº”çš„è§£æ
  - æ•°æ®æ˜ å°„åˆ°å†…éƒ¨æ•°æ®ç»“æ„
  - é”™è¯¯å“åº”çš„å¤„ç†

- âœ… **é‡è¯•å’Œå®¹é”™æœºåˆ¶**
  - é‡è¯•é€»è¾‘çš„æ­£ç¡®æ€§ï¼ˆæŒ‡æ•°é€€é¿ã€æœ€å¤§é‡è¯•æ¬¡æ•°ï¼‰
  - å¯é‡è¯•é”™è¯¯çš„åˆ¤æ–­
  - é‡è¯•å¤±è´¥çš„å¤„ç†

### âŒ ä¸éœ€è¦æµ‹è¯•çš„å†…å®¹

#### 1. å¤–éƒ¨ä¾èµ–å’Œç¬¬ä¸‰æ–¹åº“

**æ ¸å¿ƒåŸåˆ™**ï¼šä¸è¦æµ‹è¯•å¤–éƒ¨å·¥å…·å’Œåº“çš„å®ç°ï¼Œå®ƒä»¬å·²ç»æœ‰è‡ªå·±çš„æµ‹è¯•ã€‚

#### åˆ¤æ–­ä¾æ®

ä½¿ç”¨ä»¥ä¸‹é—®é¢˜åˆ¤æ–­æ˜¯å¦éœ€è¦æµ‹è¯•ï¼š

1. **è¿™æ®µä»£ç æ˜¯è°å†™çš„ï¼Ÿ**
   - âŒ å¤–éƒ¨åº“/å·¥å…·çš„ä½œè€… â†’ ä¸éœ€è¦æµ‹è¯•
   - âœ… æˆ‘ä»¬è‡ªå·±çš„å›¢é˜Ÿ â†’ éœ€è¦æµ‹è¯•

2. **è¿™æ®µä»£ç åœ¨å“ªé‡Œç»´æŠ¤ï¼Ÿ**
   - âŒ åœ¨å¤–éƒ¨ä»“åº“ï¼ˆå¦‚ crates.ioã€GitHubã€ç³»ç»Ÿå·¥å…·ï¼‰ â†’ ä¸éœ€è¦æµ‹è¯•
   - âœ… åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ â†’ éœ€è¦æµ‹è¯•

3. **æµ‹è¯•çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ**
   - âŒ éªŒè¯å¤–éƒ¨åº“æ˜¯å¦æŒ‰æ–‡æ¡£å·¥ä½œ â†’ ä¸éœ€è¦æµ‹è¯•ï¼ˆä¿¡ä»»å¤–éƒ¨åº“ï¼‰
   - âœ… éªŒè¯æˆ‘ä»¬çš„ä»£ç é€»è¾‘æ˜¯å¦æ­£ç¡® â†’ éœ€è¦æµ‹è¯•

#### ä¸éœ€è¦æµ‹è¯•çš„å…¸å‹åœºæ™¯

- âŒ **å¤–éƒ¨å‘½ä»¤è¡Œå·¥å…·çš„åŠŸèƒ½**
  - ä¾‹å¦‚ï¼šGitã€Dockerã€npm ç­‰å‘½ä»¤çš„åŸºæœ¬åŠŸèƒ½
  - ä¸è¦æµ‹è¯•ï¼šå‘½ä»¤æœ¬èº«æ˜¯å¦æ­£ç¡®æ‰§è¡Œ
  - åº”è¯¥æµ‹è¯•ï¼šæˆ‘ä»¬å¦‚ä½•æ„å»ºå‘½ä»¤å‚æ•°ã€å¦‚ä½•è§£æå‘½ä»¤è¾“å‡º

- âŒ **ç¬¬ä¸‰æ–¹åº“çš„ API å®ç°**
  - ä¾‹å¦‚ï¼šHTTP å®¢æˆ·ç«¯ã€æ•°æ®åº“é©±åŠ¨ã€åºåˆ—åŒ–åº“
  - ä¸è¦æµ‹è¯•ï¼šåº“çš„å†…éƒ¨å®ç°å’Œåè®®å¤„ç†
  - åº”è¯¥æµ‹è¯•ï¼šæˆ‘ä»¬å¦‚ä½•é…ç½®å’Œä½¿ç”¨è¿™äº›åº“

- âŒ **è¿œç¨‹ API æœåŠ¡çš„ä¸šåŠ¡é€»è¾‘**
  - ä¾‹å¦‚ï¼šGitHub APIã€Jira APIã€äº‘æœåŠ¡ API
  - ä¸è¦æµ‹è¯•ï¼šAPI æ˜¯å¦è¿”å›æ­£ç¡®çš„ä¸šåŠ¡æ•°æ®
  - åº”è¯¥æµ‹è¯•ï¼šæˆ‘ä»¬å¦‚ä½•è°ƒç”¨ APIã€å¦‚ä½•å¤„ç† API å“åº”

- âŒ **æ ‡å‡†åº“å’Œç³»ç»Ÿè°ƒç”¨**
  - ä¾‹å¦‚ï¼šæ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹ç®¡ç†ã€ç½‘ç»œæ“ä½œ
  - ä¸è¦æµ‹è¯•ï¼šæ ‡å‡†åº“çš„æ­£ç¡®æ€§
  - åº”è¯¥æµ‹è¯•ï¼šæˆ‘ä»¬çš„æ–‡ä»¶å¤„ç†é€»è¾‘ã€é”™è¯¯å¤„ç†

- âŒ **è¯­è¨€å’Œæ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½**
  - ä¾‹å¦‚ï¼šRust æ ‡å‡†åº“ã€è¯­è¨€ç‰¹æ€§ã€ç¼–è¯‘å™¨è¡Œä¸º
  - ä¸è¦æµ‹è¯•ï¼šè¯­è¨€æœ¬èº«çš„åŠŸèƒ½
  - åº”è¯¥æµ‹è¯•ï¼šæˆ‘ä»¬ä½¿ç”¨è¿™äº›åŠŸèƒ½çš„ä¸šåŠ¡é€»è¾‘

#### 2. æµ‹è¯•ç­–ç•¥

å¯¹äºå¤–éƒ¨ä¾èµ–ï¼Œé‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š

- âœ… **ä½¿ç”¨ Mock å’Œ Stub éš”ç¦»æµ‹è¯•**
  - ä½¿ç”¨ `mockito` Mock HTTP API
  - ä½¿ç”¨æµ‹è¯•å·¥å…·æ¨¡æ‹Ÿ Git ä»“åº“çŠ¶æ€
  - ä½¿ç”¨ Stub æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–çš„è¿”å›å€¼

- âœ… **æµ‹è¯•æˆ‘ä»¬çš„ä»£ç å¦‚ä½•ä½¿ç”¨å¤–éƒ¨ä¾èµ–**
  - æµ‹è¯•æˆ‘ä»¬ä¼ é€’ç»™å¤–éƒ¨ä¾èµ–çš„å‚æ•°æ˜¯å¦æ­£ç¡®
  - æµ‹è¯•æˆ‘ä»¬å¦‚ä½•å¤„ç†å¤–éƒ¨ä¾èµ–çš„è¿”å›å€¼
  - æµ‹è¯•æˆ‘ä»¬å¦‚ä½•å¤„ç†å¤–éƒ¨ä¾èµ–çš„é”™è¯¯

- âœ… **æµ‹è¯•è¾¹ç•Œå’Œå¼‚å¸¸æƒ…å†µ**
  - æµ‹è¯•å¤–éƒ¨ä¾èµ–è¿”å›é”™è¯¯æ—¶çš„å¤„ç†
  - æµ‹è¯•å¤–éƒ¨ä¾èµ–è¿”å›å¼‚å¸¸æ•°æ®æ—¶çš„å¤„ç†
  - æµ‹è¯•å¤–éƒ¨ä¾èµ–è¶…æ—¶æˆ–ä¸å¯ç”¨æ—¶çš„å¤„ç†

### ğŸ“š å…·ä½“ç¤ºä¾‹

#### ç¤ºä¾‹ 0: é¡¹ç›®å®é™…ç»“æ„å¯¹ç…§

**å®é™…é¡¹ç›®æ¨¡å—ç»“æ„**ï¼š

##### Core ä¸šåŠ¡æ¨¡å— (`src/lib/`)
- âœ… **Base æ¨¡å—** (`lib/base/`): HTTP å®¢æˆ·ç«¯ã€LLM å®¢æˆ·ç«¯ã€Settingsã€Dialogã€Logger ç­‰åŸºç¡€ç»„ä»¶
- âœ… **Git æ¨¡å—** (`lib/git/`): åˆ†æ”¯ç®¡ç†ã€æäº¤ç®¡ç†ã€ä»“åº“æ“ä½œã€Stash ç®¡ç†
- âœ… **Jira æ¨¡å—** (`lib/jira/`): API é›†æˆã€æ—¥å¿—ç®¡ç†ã€é™„ä»¶å¤„ç†ã€çŠ¶æ€ç®¡ç†
- âœ… **PR æ¨¡å—** (`lib/pr/`): GitHub å¹³å°é›†æˆã€LLM ç”Ÿæˆã€Body è§£æ
- âœ… **Branch æ¨¡å—** (`lib/branch/`): åˆ†æ”¯å‘½åã€LLM ç”Ÿæˆã€åŒæ­¥ç®¡ç†
- âœ… **Commit æ¨¡å—** (`lib/commit/`): æäº¤ä¿®æ”¹ã€é‡å†™ã€å‹ç¼©
- âœ… **Template æ¨¡å—** (`lib/template/`): æ¨¡æ¿é…ç½®ã€å¼•æ“ã€å˜é‡ç®¡ç†
- âœ… **Proxy æ¨¡å—** (`lib/proxy/`): ä»£ç†é…ç½®ç”Ÿæˆå’Œç®¡ç†
- âœ… **Repo æ¨¡å—** (`lib/repo/`): ä»“åº“é…ç½®ç®¡ç†
- âœ… **Rollback æ¨¡å—** (`lib/rollback/`): æ“ä½œå›æ»š

##### CLI å‘½ä»¤å±‚ (`src/commands/`)
- âœ… **é…ç½®ç®¡ç†**: `config/`, `github/`, `check/`, `proxy/`, `llm/`
- âœ… **ä¸šåŠ¡åŠŸèƒ½**: `pr/`, `jira/`, `branch/`, `commit/`, `stash/`, `log/`
- âœ… **å·¥å…·ç®¡ç†**: `lifecycle/`, `migrate/`, `repo/`, `alias/`, `tag/`

**å®é™…æµ‹è¯•å·¥å…·é…ç½®** (`Cargo.toml`):
```toml
[dev-dependencies]
pretty_assertions = "1.4"    # æ¸…æ™°çš„æ–­è¨€è¾“å‡º
rstest = "0.18"             # å‚æ•°åŒ–æµ‹è¯•å’Œ fixtures
mockito = "1.2"             # HTTP API Mock æµ‹è¯•
insta = "1.38"              # å¿«ç…§æµ‹è¯•ï¼ˆJSON åŠŸèƒ½ï¼‰
assert-_cmd = "2.0"          # CLI å‘½ä»¤æµ‹è¯•
predicates = "3.0"          # æ–­è¨€è°“è¯
tempfile = "3.8"            # ä¸´æ—¶æ–‡ä»¶å’Œç›®å½•
```

**å®é™…æµ‹è¯•ç›®å½•ç»“æ„**:
```
tests/
â”œâ”€â”€ base/           # Base æ¨¡å—æµ‹è¯•ï¼ˆLLMã€Settingsã€Dialogã€Utilï¼‰
â”œâ”€â”€ cli/            # CLI å‘½ä»¤æµ‹è¯•ï¼ˆæ‰€æœ‰ commands/ å¯¹åº”æµ‹è¯•ï¼‰
â”‚   â”œâ”€â”€ basic-_cli.rs        # åŸºç¡€ CLI æµ‹è¯•
â”‚   â”œâ”€â”€ integration-_cli.rs  # CLI é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ [å„å‘½ä»¤æµ‹è¯•æ–‡ä»¶]    # PRã€Branchã€Config ç­‰
â”œâ”€â”€ completion/     # è‡ªåŠ¨è¡¥å…¨æµ‹è¯•
â”œâ”€â”€ git/            # Git æ¨¡å—æµ‹è¯•ï¼ˆç›®å‰ä¸ºç©ºï¼Œéœ€è¦è¡¥å……ï¼‰
â”œâ”€â”€ http/           # HTTP å®¢æˆ·ç«¯æµ‹è¯•
â”œâ”€â”€ integration/    # é›†æˆæµ‹è¯•
â”œâ”€â”€ jira/           # Jira æ¨¡å—æµ‹è¯•
â”œâ”€â”€ pr/             # PR æ¨¡å—æµ‹è¯•
â”œâ”€â”€ proxy/          # Proxy æ¨¡å—æµ‹è¯•
â”œâ”€â”€ rollback/       # Rollback æ¨¡å—æµ‹è¯•
â”œâ”€â”€ common/         # å…±äº«æµ‹è¯•å·¥å…·
â”‚   â”œâ”€â”€ cli-_helpers.rs      # CLI æµ‹è¯•è¾…åŠ©å·¥å…·
â”‚   â”œâ”€â”€ helpers.rs          # é€šç”¨æµ‹è¯•å·¥å…·
â”‚   â””â”€â”€ http-_helpers.rs     # HTTP æµ‹è¯•å·¥å…·
â””â”€â”€ fixtures/       # æµ‹è¯•æ•°æ®æ–‡ä»¶
```

**æµ‹è¯•è¦†ç›–ç°çŠ¶**:
- ğŸŸ¢ **å·²å®Œæ•´è¦†ç›–**: Base æ¨¡å—ï¼ˆLLMã€Settingsã€Dialogï¼‰ã€CLI å‚æ•°è§£æã€PR æ¨¡å—ã€Jira æ¨¡å—
- ğŸŸ¢ **CLI æµ‹è¯•å·¥å…·**: å·²æ·»åŠ  assert-_cmdã€predicatesã€tempfile å’Œå®Œæ•´çš„æµ‹è¯•è¾…åŠ©å·¥å…·
- ğŸŸ¡ **éƒ¨åˆ†è¦†ç›–**: HTTP æ¨¡å—ã€Completion æ¨¡å—ã€Proxy æ¨¡å—ã€CLI é›†æˆæµ‹è¯•ï¼ˆåŸºç¡€æ¡†æ¶å·²å»ºç«‹ï¼‰
- ğŸ”´ **ç¼ºå¤±è¦†ç›–**: Git æ¨¡å—ï¼ˆæµ‹è¯•æ–‡ä»¶ä¸ºç©ºï¼‰ã€Template æ¨¡å—ã€Branch æ¨¡å—ã€Commit æ¨¡å—ã€Stash æ¨¡å—

#### ç¤ºä¾‹ 1: Git æ¨¡å—

**âœ… åº”è¯¥æµ‹è¯•çš„**ï¼š

```rust
// âœ… æµ‹è¯•åˆ†æ”¯å‰ç¼€å¤„ç†é€»è¾‘ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_format-_branch-_name-_with-_prefix() {
    let result = format-_branch-_name("feature", "login");
    assert-_eq!(result, "feature/login");
}

// âœ… æµ‹è¯•åˆå¹¶ç­–ç•¥é€‰æ‹©é€»è¾‘ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_merge-_strategy-_selection() {
    let strategy = determine-_merge-_strategy(true, false);
    assert-_eq!(strategy, MergeStrategy::NoFastForward);
}

// âœ… æµ‹è¯•åˆ†æ”¯åç§°éªŒè¯é€»è¾‘ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_validate-_branch-_name() {
    assert!(validate-_branch-_name("feature/login").is-_ok());
    assert!(validate-_branch-_name("invalid//name").is-_err());
    assert!(validate-_branch-_name("").is-_err());
}

// âœ… æµ‹è¯• Git å‘½ä»¤æ‰§è¡Œå¤±è´¥æ—¶çš„é”™è¯¯å¤„ç†ï¼ˆæˆ‘ä»¬çš„é”™è¯¯å¤„ç†ï¼‰
#[test]
fn test-_branch-_create-_error-_handling() {
    // ä½¿ç”¨ Mock æ¨¡æ‹Ÿ Git å‘½ä»¤å¤±è´¥
    let result = GitBranch::create("invalid/name");
    assert!(result.is-_err());
    assert!(result.unwrap-_err().to-_string().contains("åˆ†æ”¯åç§°æ— æ•ˆ"));
}

// âœ… æµ‹è¯• CommitInfo æ•°æ®ç»“æ„è§£æï¼ˆæˆ‘ä»¬çš„æ•°æ®å¤„ç†ï¼‰
#[test]
fn test-_parse-_commit-_info() {
    let output = "abc123\nJohn Doe\n2024-01-01\nInitial commit";
    let info = CommitInfo::from-_output(output).unwrap();
    assert-_eq!(info.hash, "abc123");
    assert-_eq!(info.author, "John Doe");
}
```

**âŒ ä¸åº”è¯¥æµ‹è¯•çš„**ï¼š

```rust
// âŒ ä¸è¦æµ‹è¯• Git å‘½ä»¤æœ¬èº«æ˜¯å¦æ­£ç¡®ï¼ˆè¿™æ˜¯ Git çš„è´£ä»»ï¼‰
#[test]
fn test-_git-_branch-_command-_creates-_branch() {
    // è¿™æ˜¯åœ¨æµ‹è¯• Git æœ¬èº«ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ä»£ç 
    Command::new("git").args(["branch", "test"]).status().unwrap();
    let output = Command::new("git").args(["branch", "--list", "test"]).output().unwrap();
    assert!(String::from-_utf8_lossy(&output.stdout).contains("test"));
}

// âŒ ä¸è¦æµ‹è¯• Git å‚æ•°çš„åŠŸèƒ½ï¼ˆè¿™æ˜¯ Git çš„è´£ä»»ï¼‰
#[test]
fn test-_git-_merge-_ff-_only-_parameter() {
    // è¿™æ˜¯åœ¨æµ‹è¯• Git çš„ --ff-only å‚æ•°ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ä»£ç 
    Command::new("git").args(["merge", "--ff-only", "feature"]).status().unwrap();
}

// âŒ ä¸è¦æµ‹è¯• Git çš„åº•å±‚å®ç°ï¼ˆè¿™æ˜¯ Git çš„è´£ä»»ï¼‰
#[test]
fn test-_git-_internal-_merge-_algorithm() {
    // è¿™æ˜¯åœ¨æµ‹è¯• Git çš„åˆå¹¶ç®—æ³•ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ä»£ç 
}
```

#### ç¤ºä¾‹ 2: HTTP æ¨¡å—

**âœ… åº”è¯¥æµ‹è¯•çš„**ï¼š

```rust
// âœ… æµ‹è¯•è¯·æ±‚é…ç½®æ„å»ºé€»è¾‘ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_build-_request-_with-_auth() {
    let client = HttpClient::new();
    let request = client.request("https://api.example.com")
        .with-_auth("token", "abc123")
        .build();

    assert!(request.headers().contains-_key("Authorization"));
    assert-_eq!(request.headers().get("Authorization").unwrap(), "Bearer abc123");
}

// âœ… æµ‹è¯•é‡è¯•é€»è¾‘ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_retry-_on-_network-_error() {
    let mut mock-_server = mockito::Server::new();
    let mock = mock-_server.mock("GET", "/api")
        .with-_status(500)
        .expect(3)  // åº”è¯¥é‡è¯• 3 æ¬¡
        .create();

    let result = HttpClient::new().get(&format!("{}/api", mock-_server.url())).await;
    assert!(result.is-_err());
    mock.assert();
}

// âœ… æµ‹è¯•å“åº”æ•°æ®è§£æï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_parse-_api-_response() {
    let json = r#"{"id": 123, "name": "test"}"#;
    let data: ApiResponse = serde-_json::from-_str(json).unwrap();
    assert-_eq!(data.id, 123);
    assert-_eq!(data.name, "test");
}
```

**âŒ ä¸åº”è¯¥æµ‹è¯•çš„**ï¼š

```rust
// âŒ ä¸è¦æµ‹è¯• reqwest æ˜¯å¦æ­£ç¡®å‘é€ HTTP è¯·æ±‚ï¼ˆè¿™æ˜¯ reqwest çš„è´£ä»»ï¼‰
#[test]
fn test-_reqwest-_sends-_http-_request() {
    // è¿™æ˜¯åœ¨æµ‹è¯• reqwest åº“ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ä»£ç 
    let response = reqwest::blocking::get("https://httpbin.org/get").unwrap();
    assert-_eq!(response.status(), 200);
}

// âŒ ä¸è¦æµ‹è¯• HTTP åè®®çš„æ­£ç¡®æ€§ï¼ˆè¿™æ˜¯æ ‡å‡†åè®®ï¼‰
#[test]
fn test-_http-_protocol() {
    // è¿™æ˜¯åœ¨æµ‹è¯• HTTP åè®®ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ä»£ç 
}
```

#### ç¤ºä¾‹ 3: Jira æ¨¡å—

**âœ… åº”è¯¥æµ‹è¯•çš„**ï¼š

```rust
// âœ… æµ‹è¯• Jira API è¯·æ±‚æ„å»ºï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_build-_jira-_search-_request() {
    let query = build-_jira-_query("PROJECT-123");
    assert-_eq!(query, "project = PROJECT AND key = PROJECT-123");
}

// âœ… æµ‹è¯• Jira å“åº”æ•°æ®è½¬æ¢ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_convert-_jira-_issue-_to-_internal-_format() {
    let jira-_issue = mock-_jira-_issue();
    let issue = Issue::from-_jira-_response(jira-_issue);
    assert-_eq!(issue.key, "PROJECT-123");
    assert-_eq!(issue.summary, "Test Issue");
}

// âœ… æµ‹è¯•æ—¥å¿—æ ¼å¼åŒ–ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[test]
fn test-_format-_worklog() {
    let worklog = Worklog {
        time-_spent: 3600,
        comment: "Fixed bug",
    };
    let formatted = format-_worklog(&worklog);
    assert-_eq!(formatted, "1h - Fixed bug");
}
```

**âŒ ä¸åº”è¯¥æµ‹è¯•çš„**ï¼š

```rust
// âŒ ä¸è¦æµ‹è¯• Jira API æœ¬èº«çš„åŠŸèƒ½ï¼ˆè¿™æ˜¯ Jira çš„è´£ä»»ï¼‰
#[test]
fn test-_jira-_api-_returns-_correct-_issue() {
    // è¿™æ˜¯åœ¨æµ‹è¯• Jira APIï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ä»£ç 
    let issue = jira-_client.get-_issue("PROJECT-123").await.unwrap();
    assert-_eq!(issue.fields.summary, "Expected Summary");
}

// âŒ ä¸è¦æµ‹è¯• Jira çš„ä¸šåŠ¡é€»è¾‘ï¼ˆè¿™æ˜¯ Jira çš„è´£ä»»ï¼‰
#[test]
fn test-_jira-_calculates-_time-_tracking() {
    // è¿™æ˜¯åœ¨æµ‹è¯• Jira çš„æ—¶é—´è·Ÿè¸ªé€»è¾‘ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ä»£ç 
}
```

#### ç¤ºä¾‹ 4: å¹¶å‘å’Œå¼‚æ­¥æµ‹è¯•

**âœ… åº”è¯¥æµ‹è¯•çš„**ï¼š

```rust
// âœ… æµ‹è¯•å¼‚æ­¥å‡½æ•°çš„æ­£ç¡®æ€§ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[tokio::test]
async fn test-_concurrent-_http-_requests() {
    let client = HttpClient::new();
    let urls = vec!["url1", "url2", "url3"];

    // æµ‹è¯•æˆ‘ä»¬çš„å¹¶å‘è¯·æ±‚é€»è¾‘
    let results = client.fetch-_all(urls).await;
    assert-_eq!(results.len(), 3);
    assert!(results.iter().all(|r| r.is-_ok()));
}

// âœ… æµ‹è¯•å¹¶å‘æ‰§è¡Œå™¨çš„é™åˆ¶ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[tokio::test]
async fn test-_concurrent-_executor-_limits() {
    let executor = ConcurrentExecutor::new(2); // æœ€å¤§2ä¸ªå¹¶å‘
    let tasks = create-_test-_tasks(5); // 5ä¸ªä»»åŠ¡

    // æµ‹è¯•æˆ‘ä»¬çš„å¹¶å‘æ§åˆ¶é€»è¾‘
    let start-_time = Instant::now();
    let results = executor.execute-_all(tasks).await;
    let duration = start-_time.elapsed();

    // éªŒè¯ç»“æœå’Œå¹¶å‘é™åˆ¶
    assert-_eq!(results.len(), 5);
    assert!(duration >= Duration::from-_millis(500)); // è‡³å°‘éœ€è¦3è½®æ‰§è¡Œ
}

// âœ… æµ‹è¯•è¶…æ—¶å’Œå–æ¶ˆæœºåˆ¶ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[tokio::test]
async fn test-_task-_timeout-_handling() {
    let executor = ConcurrentExecutor::new(1);
    let timeout-_task = create-_long-_running-_task(Duration::from-_secs(10));

    // æµ‹è¯•æˆ‘ä»¬çš„è¶…æ—¶å¤„ç†é€»è¾‘
    let result = tokio::time::timeout(
        Duration::from-_millis(100),
        executor.execute(timeout-_task)
    ).await;

    assert!(result.is-_err()); // åº”è¯¥è¶…æ—¶
}

// âœ… æµ‹è¯•å¹¶å‘å®‰å…¨æ€§ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[tokio::test]
async fn test-_concurrent-_state-_consistency() {
    let shared-_state = Arc::new(Mutex::new(Vec::new()));
    let tasks = (0..10).map(|i| {
        let state = shared-_state.clone();
        tokio::spawn(async move {
            let mut guard = state.lock().await;
            guard.push(i);
        })
    }).collect::<Vec<_>>();

    // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
    for task in tasks {
        task.await.unwrap();
    }

    // éªŒè¯çŠ¶æ€ä¸€è‡´æ€§
    let final-_state = shared-_state.lock().await;
    assert-_eq!(final-_state.len(), 10);
}

// âœ… æµ‹è¯•å¼‚æ­¥é”™è¯¯å¤„ç†ï¼ˆæˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ï¼‰
#[tokio::test]
async fn test-_async-_error-_propagation() {
    let client = HttpClient::new();

    // æµ‹è¯•æˆ‘ä»¬çš„å¼‚æ­¥é”™è¯¯å¤„ç†
    let result = client.fetch-_with-_retry("invalid-url", 3).await;
    assert!(result.is-_err());

    let error = result.unwrap-_err();
    assert!(error.to-_string().contains("ç½‘ç»œè¯·æ±‚å¤±è´¥"));
    assert!(error.to-_string().contains("é‡è¯• 3 æ¬¡åä»ç„¶å¤±è´¥"));
}
```

**âŒ ä¸åº”è¯¥æµ‹è¯•çš„**ï¼š

```rust
// âŒ ä¸è¦æµ‹è¯• tokio è¿è¡Œæ—¶çš„æ­£ç¡®æ€§ï¼ˆè¿™æ˜¯ tokio çš„è´£ä»»ï¼‰
#[tokio::test]
async fn test-_tokio-_runtime-_behavior() {
    // è¿™æ˜¯åœ¨æµ‹è¯• tokio æœ¬èº«ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ä»£ç 
    tokio::spawn(async {
        tokio::time::sleep(Duration::from-_millis(100)).await;
    }).await.unwrap();
}

// âŒ ä¸è¦æµ‹è¯•æ ‡å‡†åº“çš„å¹¶å‘åŸè¯­ï¼ˆè¿™æ˜¯æ ‡å‡†åº“çš„è´£ä»»ï¼‰
#[test]
fn test-_mutex-_locking() {
    // è¿™æ˜¯åœ¨æµ‹è¯• Mutex çš„å®ç°ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬çš„ä»£ç 
    let mutex = Mutex::new(0);
    let guard = mutex.lock().unwrap();
    assert-_eq!(*guard, 0);
}
```

### ğŸ¯ æµ‹è¯•è¾¹ç•Œæ€»ç»“

| æµ‹è¯•ç±»å‹ | åº”è¯¥æµ‹è¯• âœ… | ä¸åº”è¯¥æµ‹è¯• âŒ |
|---------|------------|--------------|
| **ä¸šåŠ¡é€»è¾‘** | æˆ‘ä»¬çš„ä¸šåŠ¡è§„åˆ™ã€æ•°æ®è½¬æ¢ã€çŠ¶æ€ç®¡ç† | å¤–éƒ¨å·¥å…·çš„ä¸šåŠ¡é€»è¾‘ |
| **é”™è¯¯å¤„ç†** | æˆ‘ä»¬å¦‚ä½•å¤„ç†é”™è¯¯ã€é”™è¯¯æ¶ˆæ¯ã€é”™è¯¯æ¢å¤ | å¤–éƒ¨å·¥å…·æ˜¯å¦ä¼šäº§ç”Ÿé”™è¯¯ |
| **æ•°æ®ç»“æ„** | æˆ‘ä»¬çš„æ•°æ®ç»“æ„ã€åºåˆ—åŒ–ã€éªŒè¯ | æ ‡å‡†åº“çš„æ•°æ®ç»“æ„ |
| **API é›†æˆ** | æˆ‘ä»¬å¦‚ä½•è°ƒç”¨ APIã€å¤„ç†å“åº”ã€é”™è¯¯å¤„ç† | API æœ¬èº«çš„å®ç°å’Œæ­£ç¡®æ€§ |
| **Git æ“ä½œ** | æˆ‘ä»¬çš„ Git å°è£…ã€å‚æ•°æ„å»ºã€ç»“æœè§£æ | Git å‘½ä»¤æœ¬èº«çš„åŠŸèƒ½ |
| **HTTP è¯·æ±‚** | æˆ‘ä»¬çš„è¯·æ±‚é…ç½®ã€é‡è¯•é€»è¾‘ã€å“åº”å¤„ç† | HTTP å®¢æˆ·ç«¯åº“çš„å®ç° |
| **CLI å‘½ä»¤** | æˆ‘ä»¬çš„å‚æ•°è§£æã€æ‰§è¡Œæµç¨‹ã€ç”¨æˆ·äº¤äº’ | clap åº“æœ¬èº«çš„å‚æ•°è§£æåŠŸèƒ½ |
| **å¹¶å‘å¼‚æ­¥** | æˆ‘ä»¬çš„å¹¶å‘æ§åˆ¶ã€å¼‚æ­¥é€»è¾‘ã€é”™è¯¯å¤„ç† | tokio è¿è¡Œæ—¶å’Œæ ‡å‡†åº“å¹¶å‘åŸè¯­ |

**å…³é”®åŸåˆ™**ï¼š**æµ‹è¯•æˆ‘ä»¬è‡ªå·±å†™çš„ä»£ç ï¼Œä¿¡ä»»å¤–éƒ¨ä¾èµ–å·²ç»è¿‡å……åˆ†æµ‹è¯•ã€‚**

---

## ğŸ”„ æ£€æŸ¥æµç¨‹

### æ­¥éª¤ 1ï¼šé¡¹ç›®ç»“æ„æ‰«æ

#### 1.1 æ”¶é›†æºä»£ç ä¿¡æ¯
```bash
# åˆ—å‡ºæ‰€æœ‰ lib æ¨¡å—
echo "=== Core ä¸šåŠ¡æ¨¡å— (src/lib/) ==="
find src/lib -name "*.rs" -not -name "mod.rs" | sort

# åˆ—å‡ºæ‰€æœ‰ commands æ¨¡å—
echo "=== CLI å‘½ä»¤æ¨¡å— (src/commands/) ==="
find src/commands -name "*.rs" -not -name "mod.rs" | sort

# ç»Ÿè®¡æ¨¡å—æ•°é‡
echo "Core æ¨¡å—æ•°é‡: $(find src/lib -name "*.rs" -not -name "mod.rs" | wc -l)"
echo "Commands æ¨¡å—æ•°é‡: $(find src/commands -name "*.rs" -not -name "mod.rs" | wc -l)"
```

#### 1.2 æ”¶é›†æµ‹è¯•æ–‡ä»¶ä¿¡æ¯
```bash
# åˆ—å‡ºæ‰€æœ‰æµ‹è¯•æ–‡ä»¶
echo "=== æµ‹è¯•æ–‡ä»¶ (tests/) ==="
find tests -name "*.rs" | sort

# ç»Ÿè®¡æµ‹è¯•æ–‡ä»¶æ•°é‡
echo "æµ‹è¯•æ–‡ä»¶æ•°é‡: $(find tests -name "*.rs" | wc -l)"

# æ£€æŸ¥æµ‹è¯•ç›®å½•ç»“æ„
echo "=== æµ‹è¯•ç›®å½•ç»“æ„ ==="
tree tests/ -I "target|snapshots" 2>/dev/null || find tests -type d | sort
```

### æ­¥éª¤ 2ï¼šè¦†ç›–æƒ…å†µæ£€æŸ¥

#### 2.1 æ¨¡å—è¦†ç›–å¯¹æ¯”
```bash
# åˆ›å»ºæ¨¡å—è¦†ç›–æ£€æŸ¥è„šæœ¬
cat > check-_coverage.sh << 'EOF'
#!/bin/bash
echo "=== æ¨¡å—è¦†ç›–æƒ…å†µæ£€æŸ¥ ==="

echo "ğŸŸ¢ å·²è¦†ç›–çš„æ¨¡å—:"
for lib-_file in $(find src/lib -name "*.rs" -not -name "mod.rs"); do
    module-_name=$(basename $(dirname $lib-_file))
    test-_file="tests/${module-_name}/mod.rs"
    if [[ -f "$test-_file" ]] && [[ $(grep -c "#\[test\]" "$test-_file" 2>/dev/null || echo 0) -gt 0 ]]; then
        echo "  âœ… $module-_name ($(basename $lib-_file))"
    fi
done

echo ""
echo "ğŸŸ¡ éƒ¨åˆ†è¦†ç›–çš„æ¨¡å—:"
for lib-_file in $(find src/lib -name "*.rs" -not -name "mod.rs"); do
    module-_name=$(basename $(dirname $lib-_file))
    test-_file="tests/${module-_name}/mod.rs"
    if [[ -f "$test-_file" ]] && [[ $(grep -c "#\[test\]" "$test-_file" 2>/dev/null || echo 0) -eq 0 ]]; then
        echo "  âš ï¸  $module-_name (æµ‹è¯•æ–‡ä»¶å­˜åœ¨ä½†ä¸ºç©º)"
    fi
done

echo ""
echo "ğŸ”´ ç¼ºå¤±è¦†ç›–çš„æ¨¡å—:"
for lib-_file in $(find src/lib -name "*.rs" -not -name "mod.rs"); do
    module-_name=$(basename $(dirname $lib-_file))
    test-_file="tests/${module-_name}/mod.rs"
    if [[ ! -f "$test-_file" ]]; then
        echo "  âŒ $module-_name (æ— æµ‹è¯•æ–‡ä»¶)"
    fi
done
EOF

chmod +x check-_coverage.sh
./check-_coverage.sh
```

#### 2.2 åŠŸèƒ½è¦†ç›–æ£€æŸ¥
```bash
# æ£€æŸ¥å…¬å…±å‡½æ•°è¦†ç›–æƒ…å†µ
echo "=== å…¬å…±å‡½æ•°è¦†ç›–æ£€æŸ¥ ==="
for module in src/lib/*/mod.rs; do
    module-_name=$(basename $(dirname $module))
    echo "æ£€æŸ¥æ¨¡å—: $module-_name"

    # æå–å…¬å…±å‡½æ•°
    pub-_functions=$(grep -n "pub fn " $module 2>/dev/null | head -5)
    if [[ -n "$pub-_functions" ]]; then
        echo "  å…¬å…±å‡½æ•°:"
        echo "$pub-_functions" | sed 's/^/    /'

        # æ£€æŸ¥å¯¹åº”æµ‹è¯•
        test-_file="tests/${module-_name}/mod.rs"
        if [[ -f "$test-_file" ]]; then
            test-_count=$(grep -c "#\[test\]" "$test-_file" 2>/dev/null || echo 0)
            echo "  æµ‹è¯•ç”¨ä¾‹æ•°é‡: $test-_count"
        else
            echo "  âŒ æ— æµ‹è¯•æ–‡ä»¶"
        fi
    fi
    echo ""
done
```

### æ­¥éª¤ 3ï¼šæµ‹è¯•è´¨é‡è¯„ä¼°

#### 3.1 æµ‹è¯•å·¥å…·ä½¿ç”¨æ£€æŸ¥
```bash
echo "=== æµ‹è¯•å·¥å…·ä½¿ç”¨æƒ…å†µ ==="

# æ£€æŸ¥ rstest ä½¿ç”¨
rstest-_count=$(grep -r "#\[rstest\]" tests/ 2>/dev/null | wc -l)
echo "ğŸ“Š rstest å‚æ•°åŒ–æµ‹è¯•: $rstest-_count ä¸ª"

# æ£€æŸ¥ pretty_assertions ä½¿ç”¨
pretty_assertions=$(grep -r "use pretty_assertions" tests/ 2>/dev/null | wc -l)
echo "ğŸ“Š pretty_assertions ä½¿ç”¨: $pretty_assertions ä¸ªæ–‡ä»¶"

# æ£€æŸ¥ insta å¿«ç…§æµ‹è¯•
insta-_count=$(grep -r "insta::" tests/ 2>/dev/null | wc -l)
echo "ğŸ“Š insta å¿«ç…§æµ‹è¯•: $insta-_count ä¸ª"

# æ£€æŸ¥ mockito Mock æµ‹è¯•
mockito-_count=$(grep -r "mockito::" tests/ 2>/dev/null | wc -l)
echo "ğŸ“Š mockito Mock æµ‹è¯•: $mockito-_count ä¸ª"

# æ£€æŸ¥ tokio å¼‚æ­¥æµ‹è¯•
tokio-_test-_count=$(grep -r "#\[tokio::test\]" tests/ 2>/dev/null | wc -l)
echo "ğŸ“Š tokio å¼‚æ­¥æµ‹è¯•: $tokio-_test-_count ä¸ª"
```

#### 3.2 æµ‹è¯•ç»“æ„æ£€æŸ¥
```bash
echo "=== æµ‹è¯•ç»“æ„å’Œè´¨é‡æ£€æŸ¥ ==="

# æ£€æŸ¥æµ‹è¯•å‘½åè§„èŒƒ
echo "ğŸ” æµ‹è¯•å‘½åè§„èŒƒæ£€æŸ¥:"
non-_standard-_tests=$(grep -r "fn test" tests/ | grep -v "fn test_" | wc -l)
if [[ $non-_standard-_tests -eq 0 ]]; then
    echo "  âœ… æ‰€æœ‰æµ‹è¯•éƒ½éµå¾ª test_ å‘½åè§„èŒƒ"
else
    echo "  âš ï¸  å‘ç° $non-_standard-_tests ä¸ªä¸è§„èŒƒçš„æµ‹è¯•å‘½å"
fi

# æ£€æŸ¥æµ‹è¯•æ–‡æ¡£æ³¨é‡Š
documented-_tests=$(grep -r "/// " tests/ 2>/dev/null | wc -l)
total-_tests=$(grep -r "#\[test\]" tests/ 2>/dev/null | wc -l)
echo "ğŸ“ æµ‹è¯•æ–‡æ¡£è¦†ç›–: $documented-_tests/$total-_tests"

# æ£€æŸ¥é”™è¯¯å¤„ç†æµ‹è¯•
error-_tests=$(grep -r "assert.*is-_err\|expect.*err\|unwrap-_err" tests/ 2>/dev/null | wc -l)
echo "ğŸš¨ é”™è¯¯å¤„ç†æµ‹è¯•: $error-_tests ä¸ª"

# æ£€æŸ¥è¾¹ç•Œæ¡ä»¶æµ‹è¯•
boundary-_tests=$(grep -r "empty\|null\|zero\|max\|min\|boundary" tests/ 2>/dev/null | wc -l)
echo "ğŸ¯ è¾¹ç•Œæ¡ä»¶æµ‹è¯•: $boundary-_tests ä¸ª"
```

### æ­¥éª¤ 4ï¼šç¼ºå¤±æµ‹è¯•è¯†åˆ«

#### 4.1 ç”Ÿæˆç¼ºå¤±æµ‹è¯•æŠ¥å‘Š
```bash
cat > generate-_missing-_tests-_report.sh << 'EOF'
#!/bin/bash
echo "# ç¼ºå¤±æµ‹è¯•åˆ†ææŠ¥å‘Š"
echo ""
echo "## ğŸ“Š ç»Ÿè®¡æ¦‚è§ˆ"
echo ""

# ç»Ÿè®¡æ€»ä½“æƒ…å†µ
total-_lib-_modules=$(find src/lib -name "*.rs" -not -name "mod.rs" | wc -l)
total-_test-_files=$(find tests -name "*.rs" | wc -l)
total-_tests=$(grep -r "#\[test\]" tests/ 2>/dev/null | wc -l)

echo "- **Core æ¨¡å—æ€»æ•°**: $total-_lib-_modules"
echo "- **æµ‹è¯•æ–‡ä»¶æ€»æ•°**: $total-_test-_files"
echo "- **æµ‹è¯•ç”¨ä¾‹æ€»æ•°**: $total-_tests"
echo ""

# è®¡ç®—è¦†ç›–ç‡
covered-_modules=0
for lib-_file in $(find src/lib -name "*.rs" -not -name "mod.rs"); do
    module-_name=$(basename $(dirname $lib-_file))
    test-_file="tests/${module-_name}/mod.rs"
    if [[ -f "$test-_file" ]] && [[ $(grep -c "#\[test\]" "$test-_file" 2>/dev/null || echo 0) -gt 0 ]]; then
        covered-_modules=$((covered-_modules + 1))
    fi
done

coverage-_percent=$(echo "scale=1; $covered-_modules * 100 / $total-_lib-_modules" | bc -l 2>/dev/null || echo "0")
echo "- **æ¨¡å—è¦†ç›–ç‡**: $covered-_modules/$total-_lib-_modules ($coverage-_percent%)"
echo ""

echo "## ğŸ”´ å®Œå…¨ç¼ºå¤±æµ‹è¯•çš„æ¨¡å—"
echo ""
for lib-_file in $(find src/lib -name "*.rs" -not -name "mod.rs"); do
    module-_name=$(basename $(dirname $lib-_file))
    test-_file="tests/${module-_name}/mod.rs"
    if [[ ! -f "$test-_file" ]]; then
        echo "- âŒ **$module-_name** (\`$(basename $lib-_file)\`)"
        # å°è¯•è¯†åˆ«ä¸»è¦åŠŸèƒ½
        pub-_functions=$(grep "pub fn " $lib-_file 2>/dev/null | head -3 | sed 's/.*pub fn \([^(]*\).*/  - \1()/')
        if [[ -n "$pub-_functions" ]]; then
            echo "  - ä¸»è¦åŠŸèƒ½:"
            echo "$pub-_functions"
        fi
        echo ""
    fi
done

echo "## ğŸŸ¡ æµ‹è¯•æ–‡ä»¶ä¸ºç©ºçš„æ¨¡å—"
echo ""
for lib-_file in $(find src/lib -name "*.rs" -not -name "mod.rs"); do
    module-_name=$(basename $(dirname $lib-_file))
    test-_file="tests/${module-_name}/mod.rs"
    if [[ -f "$test-_file" ]] && [[ $(grep -c "#\[test\]" "$test-_file" 2>/dev/null || echo 0) -eq 0 ]]; then
        echo "- âš ï¸  **$module-_name** (æµ‹è¯•æ–‡ä»¶å­˜åœ¨ä½†æ— å®é™…æµ‹è¯•)"
        echo ""
    fi
done

echo "## ğŸŸ¢ å·²å®Œæ•´è¦†ç›–çš„æ¨¡å—"
echo ""
for lib-_file in $(find src/lib -name "*.rs" -not -name "mod.rs"); do
    module-_name=$(basename $(dirname $lib-_file))
    test-_file="tests/${module-_name}/mod.rs"
    if [[ -f "$test-_file" ]] && [[ $(grep -c "#\[test\]" "$test-_file" 2>/dev/null || echo 0) -gt 0 ]]; then
        test-_count=$(grep -c "#\[test\]" "$test-_file")
        echo "- âœ… **$module-_name** ($test-_count ä¸ªæµ‹è¯•)"
    fi
done
EOF

chmod +x generate-_missing-_tests-_report.sh
./generate-_missing-_tests-_report.sh
```

### æ­¥éª¤ 5ï¼šç”Ÿæˆæ£€æŸ¥æŠ¥å‘Š

#### 5.1 åˆ›å»ºå®Œæ•´æŠ¥å‘Š
```bash
cat > generate-_full-_report.sh << 'EOF'
#!/bin/bash
REPORT_FILE="report/TEST_COVERAGE_REPORT_$(date +%Y%m%d_%H%M%S).md"
mkdir -p report

echo "# æµ‹è¯•ç”¨ä¾‹æ£€æŸ¥æŠ¥å‘Š" > $REPORT_FILE
echo "" >> $REPORT_FILE
echo "**ç”Ÿæˆæ—¶é—´**: $(date '+%Y-%m-%d %H:%M:%S')" >> $REPORT_FILE
echo "" >> $REPORT_FILE

# æ‰§è¡Œæ‰€æœ‰æ£€æŸ¥å¹¶å†™å…¥æŠ¥å‘Š
echo "## ğŸ“ˆ è¦†ç›–æƒ…å†µæ€»ç»“" >> $REPORT_FILE
echo "" >> $REPORT_FILE

# è¿™é‡Œå¯ä»¥è°ƒç”¨ä¹‹å‰çš„æ£€æŸ¥è„šæœ¬å¹¶å°†ç»“æœè¿½åŠ åˆ°æŠ¥å‘Šä¸­
./check-_coverage.sh >> $REPORT_FILE 2>&1
echo "" >> $REPORT_FILE

./generate-_missing-_tests-_report.sh >> $REPORT_FILE 2>&1

echo "## ğŸ› ï¸ æ”¹è¿›å»ºè®®" >> $REPORT_FILE
echo "" >> $REPORT_FILE
echo "### é«˜ä¼˜å…ˆçº§" >> $REPORT_FILE
echo "- [ ] è¡¥å…… Git æ¨¡å—æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•" >> $REPORT_FILE
echo "- [ ] æ·»åŠ  Template æ¨¡å—æµ‹è¯•" >> $REPORT_FILE
echo "- [ ] å®ç° Branch æ¨¡å—æµ‹è¯•" >> $REPORT_FILE
echo "" >> $REPORT_FILE
echo "### ä¸­ä¼˜å…ˆçº§" >> $REPORT_FILE
echo "- [ ] å®Œå–„ HTTP æ¨¡å—é‡è¯•é€»è¾‘æµ‹è¯•" >> $REPORT_FILE
echo "- [ ] å¢å¼º Proxy æ¨¡å—é…ç½®éªŒè¯æµ‹è¯•" >> $REPORT_FILE
echo "" >> $REPORT_FILE

echo "æŠ¥å‘Šå·²ç”Ÿæˆ: $REPORT_FILE"
EOF

chmod +x generate-_full-_report.sh
./generate-_full-_report.sh
```

---

## ğŸ“Š é¡¹ç›®æµ‹è¯•ç°çŠ¶

### æµ‹è¯•å·¥å…·é…ç½®
```toml
[dev-dependencies]
pretty_assertions = "1.4"    # æ¸…æ™°çš„æ–­è¨€è¾“å‡º
rstest = "0.18"             # å‚æ•°åŒ–æµ‹è¯•
mockito = "1.2"             # HTTP Mock æµ‹è¯•
insta = "1.38"              # å¿«ç…§æµ‹è¯•
tempfile = "3.8"            # ä¸´æ—¶æ–‡ä»¶ç®¡ç†
```

### æµ‹è¯•ç›®å½•ç»“æ„
```
tests/
â”œâ”€â”€ base/           # Base æ¨¡å—æµ‹è¯•
â”œâ”€â”€ cli/            # CLI å‘½ä»¤æµ‹è¯•
â”œâ”€â”€ git/            # Git æ¨¡å—æµ‹è¯•ï¼ˆç›®å‰ä¸ºç©ºï¼‰
â”œâ”€â”€ jira/           # Jira æ¨¡å—æµ‹è¯•
â”œâ”€â”€ pr/             # PR æ¨¡å—æµ‹è¯•
â”œâ”€â”€ common/         # å…±äº«æµ‹è¯•å·¥å…·
â””â”€â”€ fixtures/       # æµ‹è¯•æ•°æ®æ–‡ä»¶
```

### å½“å‰è¦†ç›–çŠ¶æ€
- ğŸŸ¢ **å·²å®Œæ•´è¦†ç›–**ï¼šBaseï¼ˆLLMã€Settingsã€Dialogï¼‰ã€PRã€Jiraã€CLI å‚æ•°è§£æ
- ğŸŸ¡ **éƒ¨åˆ†è¦†ç›–**ï¼šHTTPã€Completionã€Proxy
- ğŸ”´ **ç¼ºå¤±è¦†ç›–**ï¼šGitã€Templateã€Branchã€Commitã€Stash

---
## ğŸ¯ æµ‹è¯•ç¤ºä¾‹

### âœ… å¥½çš„æµ‹è¯•ç¤ºä¾‹

```rust
// âœ… æµ‹è¯•ä¸šåŠ¡é€»è¾‘ï¼šåˆ†æ”¯åç§°æ ¼å¼åŒ–
#[test]
fn test-_format-_branch-_name() {
    assert-_eq!(format-_branch-_name("feature", "login"), "feature/login");
    assert-_eq!(format-_branch-_name("", "test"), "test");
}

// âœ… æµ‹è¯•é”™è¯¯å¤„ç†ï¼šå‚æ•°éªŒè¯
#[test]
fn test-_validate-_jira-_id() {
    assert!(validate-_jira-_id("PROJ-123").is-_ok());
    assert!(validate-_jira-_id("invalid").is-_err());
}

// âœ… ä½¿ç”¨ Mock æµ‹è¯•ï¼šHTTP API è°ƒç”¨
#[test]
async fn test-_github-_api-_call() {
    let mut server = mockito::Server::new();
    let mock = server.mock("GET", "/repos/owner/repo")
        .with-_status(200)
        .with-_body(r#"{"name": "repo"}"#)
        .create();

    let result = github-_client.get-_repo("owner/repo").await;
    assert!(result.is-_ok());
    mock.assert();
}

// âœ… å‚æ•°åŒ–æµ‹è¯•ï¼šå¤šç§è¾“å…¥éªŒè¯
#[rstest]
#[case("feature/test", true)]
#[case("invalid//name", false)]
#[case("", false)]
fn test-_branch-_name-_validation(#[case] name: &str, #[case] expected: bool) {
    assert-_eq!(is-_valid-_branch-_name(name), expected);
}
```

### âŒ é¿å…çš„æµ‹è¯•

```rust
// âŒ ä¸è¦æµ‹è¯•å¤–éƒ¨å·¥å…·
#[test]
fn test-_git-_command() {
    Command::new("git").args(["status"]).status().unwrap();
}

// âŒ ä¸è¦æµ‹è¯•ç¬¬ä¸‰æ–¹åº“
#[test]
fn test-_reqwest-_http() {
    reqwest::blocking::get("https://api.github.com").unwrap();
}
```

---

## ğŸ“‹ å¿«é€Ÿæ£€æŸ¥è„šæœ¬

### æ£€æŸ¥æµ‹è¯•è¦†ç›–
```bash
# æ£€æŸ¥ç¼ºå¤±çš„æµ‹è¯•æ–‡ä»¶
for module in src/lib/*/mod.rs; do
    test-_file="tests/$(basename $(dirname $module))/mod.rs"
    if [[ ! -f "$test-_file" ]]; then
        echo "âŒ ç¼ºå¤±æµ‹è¯•: $module"
    fi
done

# æ£€æŸ¥ç©ºçš„æµ‹è¯•æ–‡ä»¶
find tests -name "*.rs" -exec sh -c 'if [ $(grep -c "#\[test\]" "$1") -eq 0 ]; then echo "âš ï¸  ç©ºæµ‹è¯•æ–‡ä»¶: $1"; fi' _ {} \;
```

### æ£€æŸ¥æµ‹è¯•å·¥å…·ä½¿ç”¨
```bash
# æ£€æŸ¥æ˜¯å¦ä½¿ç”¨æ¨èçš„æµ‹è¯•å·¥å…·
grep -r "use pretty_assertions" tests/ || echo "âŒ æœªä½¿ç”¨ pretty_assertions"
grep -r "#\[rstest\]" tests/ || echo "âŒ æœªä½¿ç”¨ rstest"
grep -r "insta::" tests/ || echo "âŒ æœªä½¿ç”¨ insta"
grep -r "mockito::" tests/ || echo "âŒ æœªä½¿ç”¨ mockito"
```

---

## ğŸ“Š æ£€æŸ¥æŠ¥å‘Šæ¨¡æ¿

```markdown
# æµ‹è¯•ç”¨ä¾‹æ£€æŸ¥æŠ¥å‘Š

## ğŸ“ˆ è¦†ç›–æƒ…å†µæ€»ç»“
- **æ€»æµ‹è¯•æ–‡ä»¶æ•°**: X ä¸ª
- **å·²è¦†ç›–æ¨¡å—**: X/Y (Z%)
- **æµ‹è¯•ç”¨ä¾‹æ€»æ•°**: ~X ä¸ª

## ğŸŸ¢ å·²å®Œæ•´è¦†ç›–
- Base æ¨¡å— (LLMã€Settingsã€Dialog)
- PR æ¨¡å— (GitHub é›†æˆã€LLM ç”Ÿæˆ)
- Jira æ¨¡å— (API é›†æˆã€æ—¥å¿—ç®¡ç†)

## ğŸŸ¡ éƒ¨åˆ†è¦†ç›–
- HTTP æ¨¡å— (ç¼ºå°‘é‡è¯•é€»è¾‘æµ‹è¯•)
- Proxy æ¨¡å— (ç¼ºå°‘é…ç½®éªŒè¯æµ‹è¯•)

## ğŸ”´ ç¼ºå¤±è¦†ç›–
- Git æ¨¡å— (æµ‹è¯•æ–‡ä»¶ä¸ºç©º)
- Template æ¨¡å— (æ— æµ‹è¯•æ–‡ä»¶)
- Branch æ¨¡å— (æ— æµ‹è¯•æ–‡ä»¶)

## ğŸ› ï¸ æ”¹è¿›å»ºè®®
1. **ä¼˜å…ˆçº§ 1**: è¡¥å…… Git æ¨¡å—æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
2. **ä¼˜å…ˆçº§ 2**: æ·»åŠ  Template å’Œ Branch æ¨¡å—æµ‹è¯•
3. **ä¼˜å…ˆçº§ 3**: å®Œå–„ HTTP å’Œ Proxy æ¨¡å—æµ‹è¯•

## ğŸ“‹ è¡ŒåŠ¨è®¡åˆ’
- [ ] åˆ›å»º Git æ¨¡å—æµ‹è¯•æ¡†æ¶
- [ ] å®ç°åˆ†æ”¯ç®¡ç†åŠŸèƒ½æµ‹è¯•
- [ ] æ·»åŠ æäº¤ç®¡ç†åŠŸèƒ½æµ‹è¯•
- [ ] è¡¥å……é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶æµ‹è¯•
```

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [æµ‹è¯•è§„èŒƒæŒ‡å—](../../testing/README.md) - è¯¦ç»†çš„æµ‹è¯•ç»„ç»‡å’Œæœ€ä½³å®è·µ
- [å¼€å‘è§„èŒƒç´¢å¼•](../../development/README.md) - å¼€å‘è§„èŒƒæ€»è§ˆ
- [æäº¤å‰æ£€æŸ¥æŒ‡å—](../workflows/pre-commit.md) - æµ‹è¯•æ£€æŸ¥çš„ç®€è¦è¯´æ˜

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

### æµ‹è¯•è¾¹ç•Œæ£€æŸ¥æ¸…å•

- [ ] å·²æ˜ç¡®æµ‹è¯•è¾¹ç•Œï¼šæµ‹è¯•æˆ‘ä»¬è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸æµ‹è¯•å¤–éƒ¨ä¾èµ–
- [ ] å·²è¯†åˆ«éœ€è¦æµ‹è¯•çš„å†…å®¹ï¼ˆä¸šåŠ¡é€»è¾‘ã€CLIã€é”™è¯¯å¤„ç†ç­‰ï¼‰
- [ ] å·²è¯†åˆ«ä¸éœ€è¦æµ‹è¯•çš„å†…å®¹ï¼ˆå¤–éƒ¨å·¥å…·ã€ç¬¬ä¸‰æ–¹åº“ç­‰ï¼‰

### æµ‹è¯•è¦†ç›–æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰ Lib å±‚æ¨¡å—éƒ½æœ‰å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶
- [ ] æ‰€æœ‰ Commands å±‚æ¨¡å—éƒ½æœ‰å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶
- [ ] æ–°å¢çš„å…¬å…±å‡½æ•°æ˜¯å¦æœ‰å•å…ƒæµ‹è¯•ï¼Ÿ
- [ ] æ–°å¢çš„ CLI å‘½ä»¤æ˜¯å¦æœ‰é›†æˆæµ‹è¯•ï¼Ÿ
- [ ] é”™è¯¯å¤„ç†è·¯å¾„æ˜¯å¦æœ‰æµ‹è¯•ï¼Ÿ
- [ ] è¾¹ç•Œæƒ…å†µæ˜¯å¦æœ‰æµ‹è¯•ï¼Ÿ

### æµ‹è¯•è´¨é‡æ£€æŸ¥æ¸…å•

- [ ] æ˜¯å¦ä½¿ç”¨äº†æ¨èçš„æµ‹è¯•å·¥å…·ï¼ˆrstestã€pretty_assertionsã€mockitoã€insta ç­‰ï¼‰ï¼Ÿ
- [ ] æµ‹è¯•å‘½åæ˜¯å¦éµå¾ª `test_` è§„èŒƒï¼Ÿ
- [ ] æµ‹è¯•æ˜¯å¦æœ‰æ–‡æ¡£æ³¨é‡Šï¼Ÿ
- [ ] æµ‹è¯•ç»“æ„æ˜¯å¦æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ï¼Ÿ

### æµ‹è¯•å·¥å…·ä½¿ç”¨æ£€æŸ¥æ¸…å•

- [ ] æ˜¯å¦ä½¿ç”¨ `rstest` è¿›è¡Œå‚æ•°åŒ–æµ‹è¯•ï¼Ÿ
- [ ] æ˜¯å¦ä½¿ç”¨ `pretty_assertions` æä¾›æ¸…æ™°çš„æ–­è¨€è¾“å‡ºï¼Ÿ
- [ ] æ˜¯å¦ä½¿ç”¨ `mockito` è¿›è¡Œ HTTP API Mock æµ‹è¯•ï¼Ÿ
- [ ] æ˜¯å¦ä½¿ç”¨ `insta` è¿›è¡Œå¿«ç…§æµ‹è¯•ï¼ˆå¦‚é€‚ç”¨ï¼‰ï¼Ÿ
- [ ] æ˜¯å¦ä½¿ç”¨ `tokio::test` è¿›è¡Œå¼‚æ­¥æµ‹è¯•ï¼ˆå¦‚é€‚ç”¨ï¼‰ï¼Ÿ

### ç¼ºå¤±æµ‹è¯•è¯†åˆ«æ£€æŸ¥æ¸…å•

- [ ] å·²è¯†åˆ«å®Œå…¨ç¼ºå¤±æµ‹è¯•çš„æ¨¡å—
- [ ] å·²è¯†åˆ«æµ‹è¯•æ–‡ä»¶ä¸ºç©ºçš„æ¨¡å—
- [ ] å·²è¯†åˆ«éƒ¨åˆ†è¦†ç›–çš„æ¨¡å—
- [ ] å·²ç”Ÿæˆç¼ºå¤±æµ‹è¯•æŠ¥å‘Š

---

**æœ€åæ›´æ–°**: 2025-12-23
