# å¼€å‘å·¥å…·è§„èŒƒ

> æœ¬æ–‡æ¡£å®šä¹‰äº† Workflow CLI é¡¹ç›®å¼€å‘å·¥å…·çš„ä½¿ç”¨è§„èŒƒå’Œæœ€ä½³å®è·µï¼Œæ‰€æœ‰è´¡çŒ®è€…éƒ½åº”éµå¾ªè¿™äº›è§„èŒƒã€‚

---

## ğŸ“‹ ç›®å½•

- [æ¦‚è¿°](#-æ¦‚è¿°)
- [å¿…éœ€å·¥å…·](#-å¿…éœ€å·¥å…·)
- [å¸¸ç”¨å‘½ä»¤](#-å¸¸ç”¨å‘½ä»¤)
- [å·¥å…·é…ç½®](#-å·¥å…·é…ç½®)
- [ç›¸å…³æ–‡æ¡£](#-ç›¸å…³æ–‡æ¡£)

---

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº†å¼€å‘å·¥å…·çš„ä½¿ç”¨è§„èŒƒï¼ŒåŒ…æ‹¬å¿…éœ€å·¥å…·ã€å¸¸ç”¨å‘½ä»¤å’Œå·¥å…·é…ç½®ã€‚

### æ ¸å¿ƒåŸåˆ™

- **å·¥å…·ç»Ÿä¸€**ï¼šä½¿ç”¨ç»Ÿä¸€çš„å¼€å‘å·¥å…·å’Œå‘½ä»¤
- **è‡ªåŠ¨åŒ–**ï¼šä½¿ç”¨å·¥å…·è‡ªåŠ¨åŒ–æ£€æŸ¥å’Œæ ¼å¼åŒ–
- **æŒç»­é›†æˆ**ï¼šå·¥å…·æ£€æŸ¥åº”é›†æˆåˆ° CI/CD æµç¨‹

### ä½¿ç”¨åœºæ™¯

- å¼€å‘ç¯å¢ƒè®¾ç½®æ—¶å‚è€ƒ
- æ—¥å¸¸å¼€å‘æ—¶ä½¿ç”¨
- CI/CD é…ç½®æ—¶å‚è€ƒ

---

## å¿…éœ€å·¥å…·

### Rust å·¥å…·é“¾

- **rustc**ï¼šRust ç¼–è¯‘å™¨
- **cargo**ï¼šRust åŒ…ç®¡ç†å™¨
- **rustfmt**ï¼šä»£ç æ ¼å¼åŒ–å·¥å…·
- **clippy**ï¼šä»£ç æ£€æŸ¥å·¥å…·

### å®‰è£…æ–¹æ³•

```bash
# å®‰è£… Rust å·¥å…·é“¾
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# å®‰è£… rustfmt å’Œ clippy
rustup component add rustfmt
rustup component add clippy
```

### å¼€å‘å·¥å…·

- **cargo-audit**ï¼šä¾èµ–å®‰å…¨æ£€æŸ¥å·¥å…·
- **cargo-outdated**ï¼šä¾èµ–æ›´æ–°æ£€æŸ¥å·¥å…·
- **cargo-tarpaulin**ï¼šæµ‹è¯•è¦†ç›–ç‡å·¥å…·
- **cargo-bloat**ï¼šäºŒè¿›åˆ¶å¤§å°åˆ†æå·¥å…·ï¼ˆå¯é€‰ï¼‰

### å®‰è£…æ–¹æ³•

```bash
# å®‰è£… cargo-audit
cargo install cargo-audit

# å®‰è£… cargo-outdated
cargo install cargo-outdated

# å®‰è£… cargo-tarpaulin
cargo install cargo-tarpaulin

# å®‰è£… cargo-bloatï¼ˆå¯é€‰ï¼‰
cargo install cargo-bloat
```

---

## å¸¸ç”¨å‘½ä»¤

### ä»£ç æ ¼å¼åŒ–

```bash
# æ ¼å¼åŒ–ä»£ç 
cargo fmt

# æ£€æŸ¥ä»£ç æ ¼å¼ï¼ˆCI/CD ä¸­ä½¿ç”¨ï¼‰
cargo fmt --check
```

### ä»£ç æ£€æŸ¥

```bash
# è¿è¡Œ Clippy æ£€æŸ¥
cargo clippy -- -D warnings

# è‡ªåŠ¨ä¿®å¤ Clippy è­¦å‘Š
cargo clippy --fix --allow-dirty --allow-staged
```

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test test_name

# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¾“å‡º
cargo test -- --nocapture

# æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡
cargo tarpaulin --out Html
```

### æ„å»º

```bash
# è°ƒè¯•æ„å»º
cargo build

# å‘å¸ƒæ„å»º
cargo build --release

# æ£€æŸ¥ç¼–è¯‘ï¼ˆä¸ç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰
cargo check
```

### ä¾èµ–ç®¡ç†

```bash
# æ·»åŠ ä¾èµ–
cargo add package-name

# æ·»åŠ å¼€å‘ä¾èµ–
cargo add --dev package-name

# æ£€æŸ¥ä¾èµ–å®‰å…¨æ¼æ´
cargo audit

# æ£€æŸ¥è¿‡æ—¶çš„ä¾èµ–
cargo outdated

# æ›´æ–°ä¾èµ–
cargo update
```

### æ€§èƒ½åˆ†æ

```bash
# è¿è¡ŒåŸºå‡†æµ‹è¯•
cargo bench

# åˆ†æäºŒè¿›åˆ¶å¤§å°
cargo bloat --release
```

---

## å·¥å…·é…ç½®

### rustfmt é…ç½®

é¡¹ç›®æ ¹ç›®å½•çš„ `rustfmt.toml` æ–‡ä»¶é…ç½®ä»£ç æ ¼å¼åŒ–è§„åˆ™ï¼š

```toml
# rustfmt.toml
edition = "2021"
max_width = 100
tab_spaces = 4
```

### Clippy é…ç½®

é¡¹ç›®æ ¹ç›®å½•çš„ `.clippy.toml` æ–‡ä»¶é…ç½® Clippy æ£€æŸ¥è§„åˆ™ï¼š

```toml
# .clippy.toml
cognitive-complexity-threshold = 25
```

### Makefile å‘½ä»¤

é¡¹ç›®æä¾›äº† Makefile å‘½ä»¤ç®€åŒ–å¸¸ç”¨æ“ä½œï¼š

```bash
# æ ¼å¼åŒ–ä»£ç 
make fmt

# è¿è¡Œ Lint æ£€æŸ¥
make lint

# è¿è¡Œæµ‹è¯•
make test

# è¿è¡Œæ‰€æœ‰æ£€æŸ¥
make check
```

---

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šå·¥å…·æœªå®‰è£…

**ç—‡çŠ¶**ï¼šè¿è¡Œå‘½ä»¤æ—¶æç¤ºå·¥å…·æœªæ‰¾åˆ°

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ£€æŸ¥å·¥å…·æ˜¯å¦å·²å®‰è£…
2. æ£€æŸ¥ `PATH` ç¯å¢ƒå˜é‡
3. é‡æ–°å®‰è£…å·¥å…·

### é—®é¢˜ 2ï¼šå·¥å…·ç‰ˆæœ¬ä¸å…¼å®¹

**ç—‡çŠ¶**ï¼šå·¥å…·ç‰ˆæœ¬ä¸å…¼å®¹å¯¼è‡´é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ›´æ–°å·¥å…·åˆ°æœ€æ–°ç‰ˆæœ¬
2. æ£€æŸ¥é¡¹ç›®è¦æ±‚çš„å·¥å…·ç‰ˆæœ¬
3. ä½¿ç”¨ `rustup` ç®¡ç†å·¥å…·ç‰ˆæœ¬

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### å¼€å‘è§„èŒƒ

- [ä»£ç é£æ ¼è§„èŒƒ](../code-style.md) - ä»£ç é£æ ¼è§„èŒƒï¼ˆåŒ…å« rustfmt å’Œ clippy ä½¿ç”¨ï¼‰
- [ä¾èµ–ç®¡ç†è§„èŒƒ](./dependency-management.md) - ä¾èµ–ç®¡ç†è§„èŒƒï¼ˆåŒ…å« cargo-audit ä½¿ç”¨ï¼‰
- [æ€§èƒ½ä¼˜åŒ–è§„èŒƒ](./performance.md) - æ€§èƒ½ä¼˜åŒ–è§„èŒƒï¼ˆåŒ…å«åŸºå‡†æµ‹è¯•å·¥å…·ï¼‰

### å·¥å…·æ–‡æ¡£

- [Rust å®˜æ–¹æ–‡æ¡£](https://doc.rust-lang.org/) - Rust è¯­è¨€å’Œå·¥å…·é“¾æ–‡æ¡£
- [Cargo æ–‡æ¡£](https://doc.rust-lang.org/cargo/) - Cargo åŒ…ç®¡ç†å™¨æ–‡æ¡£

---

## âœ… æ£€æŸ¥æ¸…å•

ä½¿ç”¨æœ¬è§„èŒƒæ—¶ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] å¿…éœ€å·¥å…·å·²å®‰è£…
- [ ] å·¥å…·é…ç½®å·²è®¾ç½®
- [ ] å¸¸ç”¨å‘½ä»¤å·²ç†Ÿæ‚‰
- [ ] CI/CD å·²é›†æˆå·¥å…·æ£€æŸ¥

---

**æœ€åæ›´æ–°**: 2025-12-23

